{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u00davod","text":"<p>Ot\u00e1zky k p\u0159edm\u011btu Hardware Software Codesign</p>"},{"location":"HSC_1/","title":"Jazyk C: Jednoduch\u00e9 datov\u00e9 typy, reprezentace signed a unsigned, dvojkov\u00fd dopln\u011bk, floating point","text":"<p>Jednoduch\u00e9 datov\u00e9 typy se rozd\u011bluj\u00ed na \u010d\u00edseln\u00e9 a znakov\u00e9. \u010c\u00edseln\u00e9 se d\u00e1le d\u011bl\u00ed na datov\u00e9 typy s\u00a0pevnou \u0159\u00e1dovou \u010d\u00e1rkou a s\u00a0plovouc\u00ed \u0159\u00e1dovou \u010d\u00e1rkou. Datov\u00e9 typy s\u00a0pevnou \u0159\u00e1dovou \u010d\u00e1rkou lze n\u00e1sledn\u011b rozd\u011blit na znam\u00e9nkov\u00e9 a neznam\u00e9nkov\u00e9.</p> <p></p>"},{"location":"HSC_1/#neznamenkove","title":"Neznam\u00e9nkov\u00e9","text":"<p>Rozsah \u010d\u00edsla m\u016f\u017ee b\u00fdt od 0 do maxima, nap\u0159. pro 8 bit\u016f: 0 a\u017e 255.</p> <p>Druhy celo\u010d\u00edseln\u00fdch neznam\u00e9nkov\u00fdch datov\u00fdch typ\u016f: - 8b \u2013 unsigned char, %c/%hhu - 16b \u2013 unsigned short int, %hu - 16b \u2013 unsigned int, %u - 32b \u2013 unsigned long int, %lu - 64b \u2013 unsigned long long int, %llu</p> <p>Hodnota se ur\u010duje pomoc\u00ed:</p>"},{"location":"HSC_1/#vahovovy-kod","title":"V\u00e1hovov\u00fd k\u00f3d","text":"<p>Ka\u017ed\u00fd bit m\u00e1 svou v\u00e1hu (hodnotu), kter\u00e1 odpov\u00edd\u00e1 mocnin\u011b \u010d\u00edsla 2 podle pozice bitu. Bit na pozici (po\u010d\u00edt\u00e1no od nuly zprava) m\u00e1 v\u00e1hu . Hodnota cel\u00e9ho \u010d\u00edsla se ur\u010d\u00ed jako sou\u010det vah v\u0161ech bit\u016f nastaven\u00fdch na 1.</p>"},{"location":"HSC_1/#bcd-kodovani","title":"BCD k\u00f3dov\u00e1n\u00ed","text":"<p>V\u00e1hov\u00fd k\u00f3d pro ka\u017edou \u010dtve\u0159ici bit\u016f.</p>"},{"location":"HSC_1/#fixed-point","title":"Fixed point","text":"<p>Pozice \u0159\u00e1dov\u00e9 \u010d\u00e1rky (desetinn\u00e9 te\u010dky) je pevn\u011b dan\u00e1, to znamen\u00e1, \u017ee nen\u00ed ulo\u017eena v samotn\u00e9m \u010d\u00edsle (na rozd\u00edl od floating point). \u010c\u00edslo je reprezentov\u00e1no jako cel\u00e9 bin\u00e1rn\u00ed \u010d\u00edslo, ale interpretace je rozd\u011blena na celou a desetinou \u010d\u00e1st podle p\u0159edem ur\u010den\u00e9ho po\u010dtu bit\u016f.</p>"},{"location":"HSC_1/#znamenkove","title":"Znam\u00e9nkov\u00e9","text":"<p>Rozsah \u010d\u00edsla je posunut\u00fd, nap\u0159. pro 8 bit\u016f: -128 a\u017e +127.</p> <p>Druhy celo\u010d\u00edseln\u00fdch znam\u00e9nkov\u00fdch datov\u00fdch typ\u016f: - 8b \u2013 signed char, %c/hhi - 16b \u2013 signed short int, %hi - 16b \u2013 signed int, %i/d - 32b \u2013 signed long int, %li - 64b \u2013 signed long long int, %lli</p> <p>Existuj\u00ed t\u0159i z\u00e1kladn\u00ed zp\u016fsoby k\u00f3dov\u00e1n\u00ed z\u00e1porn\u00fdch \u010d\u00edsel, kter\u00e9 p\u0159edpokl\u00e1daj\u00ed zvolen\u00ed konkr\u00e9tn\u00ed velikosti pam\u011b\u0165ov\u00e9 bu\u0148ky (nap\u0159. 8 bit\u016f):</p>"},{"location":"HSC_1/#vyhrazeny-bit-tzv-znamenkovy-signum","title":"Vyhrazen\u00fd bit (tzv. znam\u00e9nkov\u00fd \u2013 signum)","text":"<p>Jeden bit v bu\u0148ce vyhrad\u00edme a d\u00e1me mu v\u00fdznam znam\u00e9nka. Pro hodnotu \u010d\u00edsla zbude men\u0161\u00ed po\u010det bit\u016f. Je nutn\u00e9 zvolit, kter\u00fd bit bude m\u00edt v\u00fdznam znam\u00e9nka a jak\u00e1 jeho hodnota bude m\u00edt v\u00fdznam m\u00ednus.</p> <p>V\u00fdhoda: Snadno se k\u00f3duje i dek\u00f3duje. Okam\u017eit\u011b vid\u00edme, zda je \u010d\u00edslo kladn\u00e9 nebo z\u00e1porn\u00e9.</p> <p>Nev\u00fdhoda: Nula je reprezentov\u00e1na dv\u011bma k\u00f3dy (nevyu\u017e\u00edv\u00e1 v\u0161echny stavy syst\u00e9mu). Nen\u00ed vhodn\u00e9 pro po\u010d\u00edt\u00e1n\u00ed.</p>"},{"location":"HSC_1/#pricteni-konstanty-offset","title":"P\u0159i\u010dten\u00ed konstanty (offset)","text":"<p>Zvol\u00edme si konstantu K, kterou p\u0159i\u010dteme k hodnot\u011b \u010d\u00edsla (pro kladn\u00e1 i z\u00e1porn\u00e1 \u010d\u00edsla). Do pam\u011bti pak ukl\u00e1d\u00e1me takto upravenou hodnotu. P\u0159i dek\u00f3dov\u00e1n\u00ed naopak hodnotu K ode\u010dteme. Hodnotu K lze zvolit libovoln\u011b, obvykle se vol\u00ed jako polovina kapacity soustavy. Jestli je \u010d\u00edslo z\u00e1porn\u00e9 lze snadno rozli\u0161it pouze pokud je konstanta K volena jako polovina kapacity soustavy.</p> <p>V\u00fdhoda: Vyu\u017e\u00edv\u00e1 pln\u00fd po\u010det stav\u016f syst\u00e9mu. Vhodnou volbou konstanty K lze pokr\u00fdt i nesymetrii.</p> <p>Nev\u00fdhoda: Nen\u00ed vhodn\u00e9 pro po\u010d\u00edt\u00e1n\u00ed, jeliko\u017e v\u00a0sob\u011b zahrnuje konstantu K.</p>"},{"location":"HSC_1/#dvojkovy-doplnek","title":"Dvojkov\u00fd dopln\u011bk","text":"<p>Dvojkov\u00fdm dopl\u0148kem rozum\u00edme rozd\u00edl kapacity soustavy a absolutn\u00ed hodnoty \u010d\u00edsla. Do pam\u011bti po\u010d\u00edta\u010de ukl\u00e1d\u00e1me u kladn\u00fdch \u010d\u00edsel jejich hodnotu p\u0159\u00edmo, u z\u00e1porn\u00fdch pak jejich dvojkov\u00fd dopln\u011bk. \u0158e\u0161\u00ed probl\u00e9m dvou reprezentac\u00ed nul a p\u0159i s\u010d\u00edt\u00e1n\u00ed nevy\u017eaduje speci\u00e1ln\u00ed hardware (sta\u010d\u00ed prost\u00e1 s\u010d\u00edta\u010dka), ale nast\u00e1v\u00e1 probl\u00e9m v\u00a0rozsahu (overflow), kdy se se\u010dtou dv\u011b \u010d\u00edsla, jejich\u017e v\u00fdsledek je v\u011bt\u0161\u00ed, ne\u017e dan\u00fd rozsah dovoluje, a proto se mus\u00ed nastavit spr\u00e1vn\u00fd po\u010det bit\u016f pro rozsah, aby k\u00a0p\u0159ete\u010den\u00ed nedoch\u00e1zelo. Nastaven\u00ed spr\u00e1vn\u00e9ho rozsahu pro s\u010d\u00edt\u00e1n\u00ed je jeho zv\u011bt\u0161en\u00ed o jeden bit oproti po\u010dtu bit\u016f toho v\u011bt\u0161\u00edho \u010d\u00edsla, kter\u00e9 chceme s\u010d\u00edtat. U n\u00e1soben\u00ed se spr\u00e1vn\u00fd po\u010det bit\u016f rozsahu nastavuje jako sou\u010det bit\u016f \u010d\u00edsel, kter\u00e9 chceme mezi sebou vyn\u00e1sobit a spr\u00e1vn\u00fd v\u00fdsledek je zaru\u010den pomoc\u00ed aritmetick\u00e9ho posuvu. Dvojkov\u00fd dopln\u011bk lze dle sv\u00e9 definice zapsat jako \\(2^n - |x|\\) a postup k\u00f3dov\u00e1n\u00ed je n\u00e1sleduj\u00edc\u00ed:</p> <ul> <li>P\u0159evedeme absolutn\u00ed hodnotu \u010d\u00edsla do bin\u00e1rn\u00ed soustavy a dopln\u00edme na po\u017eadovan\u00fd po\u010det m\u00edst. </li> <li>Provedeme negaci v\u0161ech bit\u016f. </li> <li>P\u0159i\u010dteme bin\u00e1rn\u011b hodnotu 1.</li> </ul> <p>V\u00fdhoda: Vyu\u017e\u00edv\u00e1 pln\u00fd po\u010det stav\u016f syst\u00e9mu. Okam\u017eit\u011b vid\u00edme, zda \u010d\u00edslo je kladn\u00e9 nebo z\u00e1porn\u00e9. Lze tak\u00e9 p\u0159\u00edmo s\u010d\u00edtat a ode\u010d\u00edtat.</p> <p>Nev\u00fdhoda: Je slo\u017eit\u011bj\u0161\u00ed na k\u00f3dov\u00e1n\u00ed a dek\u00f3dov\u00e1n\u00ed.</p>"},{"location":"HSC_1/#prevod-cisel-s-radovou-carkou-do-binarni-soustavy","title":"P\u0159evod \u010d\u00edsel s \u0159\u00e1dovou \u010d\u00e1rkou do bin\u00e1rn\u00ed soustavy","text":"<p>Rozd\u011bl\u00edme si \u010d\u00edslo na celou a desetinnou \u010d\u00e1st. Celou \u010d\u00e1st p\u0159evedeme standardn\u00edm zp\u016fsobem. Desetinnou \u010d\u00e1st p\u0159evedeme analogicky, pouze m\u00edsto d\u011blen\u00ed dv\u011bma pou\u017eijeme n\u00e1soben\u00ed dv\u011bma a m\u00edsto zbytku po d\u011blen\u00ed opisujeme jako v\u00fdsledek celou \u010d\u00e1st. V\u00fdsledn\u00e9 \u010d\u00edslo v bin\u00e1rn\u00ed soustav\u011b z\u00edsk\u00e1me slo\u017een\u00edm cel\u00e9 a desetinn\u00e9 \u010d\u00e1sti.</p>"},{"location":"HSC_1/#konstrukce-datove-promenne-typu-single","title":"Konstrukce datov\u00e9 prom\u011bnn\u00e9 typu Single","text":"<ol> <li> <p>Vyj\u00e1d\u0159ete absolutn\u00ed hodnotu dan\u00e9ho \u010d\u00edsla X v bin\u00e1rn\u00ed soustav\u011b (odd\u011blen\u011b p\u0159eve\u010fte celou a desetinnou \u010d\u00e1st).</p> </li> <li> <p>Vytvo\u0159te normalizovan\u00fd tvar: \u0158\u00e1dovou te\u010dku posu\u0148te za prvn\u00ed jedni\u010dku zleva, po\u010det posunut\u00ed ur\u010d\u00ed hodnotu EXPONENTU:</p> <ul> <li>\u017d\u00e1dn\u00fd posun =&gt; e = 0</li> <li>Posun vpravo =&gt; e &lt; 0</li> <li>Posun vlevo =&gt; e &gt; 0</li> </ul> </li> <li> <p>Ur\u010dete obsah pole S:</p> <ul> <li>X &gt;=0 =&gt; S=0</li> <li>X &lt; 0 =&gt; S=1</li> </ul> </li> <li> <p>Ur\u010dete obsah pole E: Vyj\u00e1d\u0159ete hodnotu e+127 bin\u00e1rn\u00edm v\u00e1hov\u00fdm k\u00f3dov\u00e1n\u00edm (jako typ Byte)</p> </li> <li> <p>Ur\u010dete obsah pole M: Jsou to bity, kter\u00e9 z\u016fstaly po posunut\u00ed \u0159\u00e1dov\u00e9 te\u010dky vpravo od n\u00ed.</p> </li> </ol> <p></p> <p>Z\u00edsk\u00e1n\u00ed hodnoty re\u00e1ln\u00e9ho \u010d\u00edsla z\u00a0datov\u00e9ho typu Single se prov\u00e1d\u00ed opa\u010dn\u00fdm postupem nebo dosazen\u00edm do vzorce:</p> <p>\\((-1)^S \\cdot 2^{E-127} \\cdot (1,M)\\)</p> <p>Popsan\u00fd zp\u016fsob k\u00f3dov\u00e1n\u00ed m\u00e1 sv\u00e9 limity \u2013 nap\u0159\u00edklad nen\u00ed mo\u017en\u00e9 vyj\u00e1d\u0159it hodnotu nula nebo nekone\u010dno. Proto jsou zavedeny n\u00e1sleduj\u00edc\u00ed v\u00fdjimky: - Pokud S = 0, E = 0 a M = 0 : hodnota \u010d\u00edsla je nula - Pokud e = -127 : exponent se bere jako \u2013126 a absolutn\u00ed hodnota nem\u00e1 tvar (1,M), ale (0,M) - Pokud e = 128 : hodnota \u010d\u00edsla je nekone\u010dno, M mus\u00ed b\u00fdt 0. Jin\u00e9 hodnoty M jsou neplatn\u00e9</p> <p>Probl\u00e9m nast\u00e1v\u00e1 tak\u00e9 p\u0159i s\u010d\u00edt\u00e1n\u00ed velmi velk\u00e9ho a velmi mal\u00e9ho \u010d\u00edsla, kde v\u00a0d\u016fsledku zaokrouhlovac\u00edch chyb doch\u00e1z\u00ed k\u00a0zanedb\u00e1n\u00ed \u010d\u00edsla s\u00a0malou hodnotou. </p>"},{"location":"HSC_10/","title":"Zp\u016fsoby obsluhy periferi\u00ed, polling, interrupt, z\u00e1kladn\u00ed struktura ovlada\u010de s jednoduch\u00fdm p\u0159\u00edkladem","text":"<p>Procesor m\u016f\u017ee komunikovat s periferiemi a reagovat na jejich stav dv\u011bma z\u00e1kladn\u00edmi zp\u016fsoby: aktivn\u00edm dotazov\u00e1n\u00edm (Polling) nebo pomoc\u00ed p\u0159eru\u0161en\u00ed (Interrupt).</p>"},{"location":"HSC_10/#polling-dotazovani","title":"Polling (Dotazov\u00e1n\u00ed)","text":"<ul> <li>Jde o nejjednodu\u0161\u0161\u00ed, ale \u010dasto neefektivn\u00ed metodu.</li> <li>Princip: Procesor v nekone\u010dn\u00e9 smy\u010dce aktivn\u011b a opakovan\u011b kontroluje stav periferie (nap\u0159. \u010dte stavov\u00fd registr, zda p\u0159i\u0161la data nebo zda je \u010d\u00edta\u010d hotov)</li> <li>Modely obsluhy:<ul> <li>Sekven\u010dn\u00ed: Zkontroluje periferii A -&gt; provede akci, zkontroluje B -&gt; provede akci</li> <li>Hromadn\u00fd: Zkontroluje v\u0161echny periferie a n\u00e1sledn\u011b provede akce dle zji\u0161t\u011bn\u00fdch stav\u016f</li> </ul> </li> <li>Nev\u00fdhody:<ul> <li>Vyt\u011b\u017euje CPU neust\u00e1l\u00fdm dotazov\u00e1n\u00edm, i kdy\u017e se nic ned\u011bje</li> <li>Obt\u00ed\u017en\u00e9 \u0159e\u0161en\u00ed priorit (pokud obsluha jedn\u00e9 periferie trv\u00e1 dlouho, druh\u00e1 mus\u00ed \u010dekat)</li> <li>blokuje ostatn\u00ed v\u00fdpo\u010dty</li> </ul> </li> </ul>"},{"location":"HSC_10/#interupt-preruseni","title":"Interupt (P\u0159eru\u0161en\u00ed)","text":"<ul> <li>Kontrola periferie vyvol\u00e1na ud\u00e1lost\u00ed</li> <li>Princip: Procesor vykon\u00e1v\u00e1 sv\u016fj hlavn\u00ed program. Jakmile periferie pot\u0159ebuje pozornost (Timer dopo\u010d\u00edtal, p\u0159i\u0161la sign\u00e1l z\u00a0komunikace, tla\u010d\u00edtko atd), po\u0161le sign\u00e1l IRQ (Interrupt Request). CPU pozastav\u00ed pr\u00e1ci a sko\u010d\u00ed do speci\u00e1ln\u00ed funkce obsluhy</li> <li>Kl\u00ed\u010dov\u00e9 pojmy:<ul> <li>Exception \u2013 v\u00fdjimka \u2013 ud\u00e1lost uvnit\u0159 CPU kter\u00e1 zp\u016fsob\u00ed skok do re\u017eimu obsluhy</li> <li>Interrupt \u2013 p\u0159eru\u0161en\u00ed \u2013 \u017e\u00e1dost o obsluhu vyvolan\u00e1 zm\u011bnou stavu ext. sign\u00e1lu</li> <li>IRQ \u2013 Interrupt Request \u2013 Identifik\u00e1tor p\u0159eru\u0161en\u00ed podle kter\u00e9ho CPU najde spr\u00e1vnou obsluhu</li> <li>Interrupt vector table - Tabulka adres, kam m\u00e1 procesor sko\u010dit pro konkr\u00e9tn\u00ed p\u0159eru\u0161en\u00ed</li> <li>Handler(ISR) \u2013 Funkce, kter\u00e1 vykon\u00e1 samotnou reakci na ud\u00e1lost</li> <li>Callback \u2013 U\u017eivatelsk\u00e1 funkce volan\u00e1 z handleru (\"rozsvi\u0165 LED, kdy\u017e Timer dojede\")<ul> <li>V\u00a0stm je to t\u0159eba kdy\u017e p\u0159ijde p\u0159eru\u0161en\u00ed od \u010dasova\u010de a m\u00e1\u0161 tam tu funkci do kter\u00e9 p\u00ed\u0161e\u0161 co se m\u00e1 st\u00e1t, kam to p\u00ed\u0161e\u0161 je handler a co tam p\u00ed\u0161e\u0161 je callback</li> </ul> </li> </ul> </li> <li>Pr\u016fb\u011bh obsluhy:<ul> <li>Periferie vyvol\u00e1 Interrupt -&gt; \u0158adi\u010d p\u0159eru\u0161en\u00ed obdr\u017e\u00ed IRQ -&gt; CPU vyvol\u00e1 Exception -&gt; CPU pou\u017eije Interrupt Vector Table -&gt; Spust\u00ed se Handler (ISR) -&gt; Handler m\u016f\u017ee zavolat Callback -&gt;N\u00e1vrat z\u00a0Exception</li> </ul> </li> </ul>"},{"location":"HSC_10/#generic-interrupt-controller-gic","title":"Generic Interrupt Controller (GIC)","text":"<ul> <li>\u0158adi\u010d um\u00edst\u011bn\u00fd p\u0159\u00edmo v procesorov\u00e9m syst\u00e9mu (PS) Zynq</li> <li>Podpora p\u0159eru\u0161en\u00ed z PL</li> <li>Zdroje p\u0159eru\u0161en\u00ed:<ul> <li>16 obecn\u00fd p\u0159eru\u0161en\u00ed</li> <li>2 priv\u00e1tn\u00ed p\u0159eru\u0161en\u00ed</li> </ul> </li> <li>Nastaven\u00ed: <ul> <li>Spou\u0161\u0165: N\u00e1b\u011b\u017en\u00e1 hrana (Rising) nebo Vysok\u00e1 \u00farove\u0148 (High) .</li> <li>Priorita: Lze nastavit d\u016fle\u017eitost.</li> </ul> </li> <li>Pozn\u00e1mka: Z\u00e1kladn\u00ed API nepodporuje vno\u0159en\u00e1 p\u0159eru\u0161en\u00ed.</li> </ul>"},{"location":"HSC_10/#axi-interrupt-controller-axi-intc","title":"AXI Interrupt Controller (AXI INTC)","text":"<ul> <li>\u0158adi\u010d implementovan\u00fd v programovateln\u00e9 logice (FPGA).</li> <li>Pou\u017eit\u00ed: Kdy\u017e v syst\u00e9mu nen\u00ed hardwarov\u00fd procesor nebo nesta\u010d\u00ed po\u010det IRQ linek .</li> <li>HW Konfigurace (masky):<ul> <li>Po\u010det: Nastaviteln\u00fd po\u010det vstupn\u00edch p\u0159eru\u0161en\u00ed.</li> <li>Typ vstupu: Detailn\u00ed nastaven\u00ed maskou \u2013 Level/Edge, Rising/Falling, High/Low .</li> <li>Typ v\u00fdstupu: Lze nastavit typ sign\u00e1lu generovan\u00e9ho sm\u011brem k procesoru.</li> </ul> </li> </ul>"},{"location":"HSC_10/#zakladni-struktura-ovladace-ip-jadra","title":"Z\u00e1kladn\u00ed struktura ovlada\u010de IP j\u00e1dra","text":"<ul> <li>Definice hardwaru (xparameters.h)<ul> <li>Tento soubor je automaticky generovan\u00fd podle HW n\u00e1vrhu.</li> <li>Obsahuje unik\u00e1tn\u00ed identifik\u00e1tory pro ka\u017edou periferii ve form\u00e1tu: XPAR__DEVICE_ID <li>\u0158\u00edd\u00edc\u00ed struktura (Instance)<ul> <li>Ka\u017ed\u00fd ovlada\u010d m\u00e1 definovanou C strukturu (nap\u0159. struct XGpio, struct XTmrCtr), kter\u00e1 uchov\u00e1v\u00e1 stav periferie a jej\u00ed z\u00e1kladn\u00ed adresu</li> <li>Je nutn\u00e9 vytvo\u0159it prom\u011bnnou (instanci) tohoto typu.</li> </ul> </li> <li>Inicializace (Initialize)<ul> <li>Funkce, kter\u00e1 propoj\u00ed softwarovou instanci s konkr\u00e9tn\u00edm hardwarem pomoc\u00ed ID.</li> <li>Obecn\u00fd tvar: X_Initialize(&amp;Instance, DeviceID) <li>Vlastn\u00ed pr\u00e1ce (API funkce)<ul> <li>funkce pro konfiguraci (nap\u0159. sm\u011br pinu) a provoz (\u010dten\u00ed/z\u00e1pis)</li> <li>V\u017edy p\u0159eb\u00edraj\u00ed ukazatel na instanci jako prvn\u00ed parametr.</li> </ul> </li> <pre><code>// 1. Hlavi\u010dkov\u00e9 soubory\n#include \"xparameters.h\" // Obsahuje ID hardwaru\n#include \"xgpio.h\"       // Obsahuje definice driveru (XGpio)\n// 2. Vytvo\u0159en\u00ed instance (objektu) ovlada\u010de\nXGpio GpioInstance;\nint main() {\n    // 3. Inicializace - propojen\u00ed instance s HW ID\n    XGpio_Initialize(&amp;GpioInstance, XPAR_AXI_GPIO_0_DEVICE_ID);\n    // 4. Nastaven\u00ed a Ovl\u00e1d\u00e1n\u00ed\n    // Nastaven\u00ed sm\u011bru kan\u00e1lu 1 na v\u00fdstup (0 = Output) \n    XGpio_SetDataDirection(&amp;GpioInstance, 1, 0x0);\n    // Z\u00e1pis hodnoty (rozsv\u00edcen\u00ed v\u0161ech LED) \n    XGpio_DiscreteWrite(&amp;GpioInstance, 1, 0xFF);\n    return 0;\n}\n</code></pre>"},{"location":"HSC_11/","title":"Klasifikace sb\u011brnic v embedded syst\u00e9mech, pojmy master, slave, arbiter, transakce, burst, teoretick\u00e1 a re\u00e1ln\u00e1 bandwidth, topologie","text":""},{"location":"HSC_11/#sbernice","title":"Sb\u011brnice","text":"<p>Prost\u0159edek pro doru\u010den\u00ed informac\u00ed</p> <ul> <li>Paraleln\u00ed \u2013 zvl\u00e1\u0161\u0165 kan\u00e1l pro adresu, data, \u0159\u00edzen\u00ed \u2013 dnes v\u00edce roz\u0161\u00ed\u0159en\u00ed (AMBA, Avalon)</li> <li>S\u00e9riov\u00e9 \u2013 adresa, data, \u0159\u00edzen\u00ed \u2013 jeden kan\u00e1l</li> <li>Klasifikace periferi\u00ed \u2013 v\u011bc\u00ed, co maj\u00ed p\u0159\u00edstup na sb\u011brnici<ul> <li>Arbiter \u2013 monitoruje sb\u011brnici p\u0159id\u011bluje roli master (pevn\u00e1 priorita, dynamicky)</li> <li>Master \u2013 M\u016f\u017ee iniciovat transakci</li> <li>Slave \u2013 m\u016f\u017ee odpov\u011bd\u011bt na transakci</li> <li>Transakce \u2013 \u201ejednotka\u201c na sb\u011brnici (jeden cel\u00fd cyklus \u2013 adresov\u00e1n\u00ed, handshake,  p\u0159esun dat)</li> </ul> </li> <li>Po\u017eadavek mastera(chce vys\u00edlat) -&gt; arbitrace(p\u0159id\u011blen\u00ed priority)-&gt;p\u0159enos</li> </ul> <p></p> <ul> <li>Burst transakce \u2013 v\u00edce v\u00a0ot\u00e1zce 21 (z jin\u00e9ho pohledu)<ul> <li>Norm\u00e1ln\u00ed komunikace \u2013 p\u0159e\u010dtou se data z 1\u00a0adresy, nebo se na ni zap\u00ed\u0161ou</li> <li>Burst mod \u2013 \u010cten\u00ed/z\u00e1pis z/na\u00a0vzestupn\u00fd rozsah adres (zadan\u00e1 po\u010d. adr.) </li> </ul> </li> <li>Parametry sb\u011brnice <ul> <li>Datov\u00e1 \u0161\u00ed\u0159ka (D) \u2013 po\u010det bit\u016f p\u0159enesen\u00fd / 1 cyklus</li> <li>Adresn\u00ed \u0161\u00ed\u0159ka \u2013 (4 bity \u2013 dok\u00e1\u017ee oslovit 1 z 16 c\u00edl\u016f)</li> <li>Frekvence sb\u011brnice Fs</li> <li>Teoretick\u00e1 propustnost \u2013 max po\u010det BAJT\u016e/s      Fs*D</li> <li>Re\u00e1ln\u00e1 propustnost =  FS*D \u2013 re\u017eie(obsluha sb\u011brnice \u2013 adresy atd.)</li> </ul> </li> <li>Topologie<ul> <li>Peer to peer \u2013 Rovnocenn\u00e1 za\u0159\u00edzen\u00ed</li> <li>Sb\u011brnice \u2013 odbo\u010dky do jednotliv\u00fdch uzl\u016f</li> <li>Crossbar \u2013 V\u00edce variant propojen\u00ed (analogie \u2013 propojovac\u00ed matice FPGA)</li> </ul> </li> </ul> <p> </p>"},{"location":"HSC_12/","title":"AMBA AXI: AXI stream \u2013 princip rozhran\u00ed, transakce, backpressure, p\u0159enos z v\u00edce zdroj\u016f","text":"<p>Advanced Extensible Interface Rychl\u00e9 i pomal\u00e9 periferie</p>"},{"location":"HSC_12/#princip-rozhrani","title":"Princip rozhran\u00ed","text":"<ul> <li>jedn\u00e1 se o\u00a0PTP Master \u2013 Slave komunika\u010dn\u00ed protokol pro p\u0159enos dat mezi komponentami v r\u00e1mci hardwarov\u00fdch syst\u00e9m\u016f</li> <li>nepou\u017e\u00edv\u00e1 bursty, ale pracuje s datov\u00fdmi pakety, kter\u00e9 mohou b\u00fdt nekone\u010dn\u00e9 a data mohou plynout souvisle</li> <li>Pou\u017eit\u00ed \u201ehandshake\u201c pro zaji\u0161t\u011bn\u00ed integrity dat a zabr\u00e1n\u011bn\u00ed ztr\u00e1t\u011b dat v\u00a0p\u0159\u00edprad\u011b nesouladu rychlost\u00ed:<ul> <li>TREADY \u2013 Slave je p\u0159ipraven p\u0159ij\u00edmat data nov\u00e1 data</li> <li>TVALID \u2013 Indikuje, \u017ee Master m\u00e1 ov\u011b\u0159en\u00e1 data p\u0159ipraven\u00e1 k odesl\u00e1n\u00ed</li> </ul> </li> </ul>"},{"location":"HSC_12/#transakce","title":"Transakce","text":"<ul> <li>Data se p\u0159enesou pouze pokud je TVALID a TREADY v\u00a01 p\u0159i n\u00e1b\u011b\u017en\u00e9 hran\u00e9 hodin</li> <li>To znamen\u00e1, \u017ee Master nebo Slave mohou kdykoliv zastavit p\u0159enos dat, pokud \u017ee jsou zanepr\u00e1zdn\u011bn\u00fd</li> <li>Mezi vstupy a v\u00fdstupy uvnit\u0159 Master nebo Slave nesm\u00ed b\u00fdt kombina\u010dn\u00ed logika</li> </ul>"},{"location":"HSC_12/#backpressure","title":"Backpressure","text":"<ul> <li>Jedn\u00e1 se o mechanismus \u0159\u00edzen\u00ed toku, ke kter\u00e9mu doch\u00e1z\u00ed, kdy\u017e MASTER pos\u00edl\u00e1 data (TVALID=1) rychleji, ne\u017e je m\u016f\u017ee zpracovat SLAVE (TREADY = 0) </li> <li>Backpressure ze SLAVE strany signalizuje MASTERU, aby zpomalil nebo se zastavil, d\u00edky tomu dok\u00e1\u017ee zabr\u00e1nit ztr\u00e1t\u011b dat a SLAVE udr\u017e\u00ed krok </li> <li>Bez backpressure mechanismu by mohl b\u00fdt SLAVE zahlcen a data by mohla b\u00fdt ztracena</li> <li>Jak to funguje:<ul> <li>Backpressure je aktivovanej TREADY ze SLAVE</li> <li>Jednodu\u0161e MASTER po\u0161le TVALID a \u010dek\u00e1 se, ne\u017e bude SLAVE TREADY</li> </ul> </li> </ul>"},{"location":"HSC_12/#prenos-z-vice-zdroju-interconnectioncrossbar","title":"P\u0159enos z v\u00edce zdroj\u016f \u2013 Interconnection/CrossBar","text":"<ul> <li>SLAVE p\u0159ij\u00edm\u00e1 sign\u00e1l z\u00a0v\u00edce MASTER\u016e</li> <li>Mezi MASTERY a SLAVE se vlo\u017e\u00ed logick\u00fd blok ARBITER</li> <li>ARBITER pak rozhoduje, kter\u00fd MASTER m\u00e1 pr\u00e1vo pos\u00edlat data</li> <li>Jak to funguje:<ul> <li>ARBITER sleduje z\u00a0MASTER\u016e TVALID </li> <li>Na z\u00e1klad\u011b strategie vybere jednoho mastera a propoj\u00ed jeho sign\u00e1l se SLAVEM</li> <li>Ostatn\u00ed MASTERY \u010dekaj\u00ed t\u00edm, \u017ee se jim dr\u017e\u00ed TREADY na 0</li> </ul> </li> <li>D\u016fle\u017eit\u00e9 pravidlo:<ul> <li>Mezi p\u0159ep\u00edn\u00e1n\u00ed MASTER\u016e se mus\u00ed respektovat sign\u00e1l TLAST</li> <li>TLAST = konec paketu</li> </ul> </li> <li>Strategie vyb\u00edr\u00e1n\u00ed MASTERU:<ul> <li>ROUND ROBIN:<ul> <li>Spravedliv\u00e9 postupn\u00e9 st\u0159\u00edd\u00e1n\u00ed (od A -&gt;B \u2026 -&gt;Z)</li> </ul> </li> <li>FIXED PRIORITY:<ul> <li>Prioritn\u00ed syst\u00e9m </li> <li>N\u011bjak\u00fdm MASTER\u016eM se nastav\u00ed p\u0159ednost</li> </ul> </li> </ul> </li> <li>Identifikace zdroj\u016f pomoc\u00ed TID:<ul> <li>Jedn\u00e1 se o voliteln\u00fd sign\u00e1l, kter\u00e9mu ARBITER p\u0159i\u0159ad\u00ed ID zna\u010dku</li> <li>SLAVE si ji pak p\u0159e\u010dte a zjist\u00ed kam m\u00e1 data ulo\u017eit</li> </ul> </li> <li>Slou\u010den\u00ed dat:<ul> <li>Vytvo\u0159en\u00ed bloku pro synchronizaci stream\u016f</li> <li>Sign\u00e1l TREADY jde k\u00a0MASTER\u016eM pouze pokud maj\u00ed platn\u00e1 data TVALID</li> </ul> </li> </ul>"},{"location":"HSC_13/","title":"AMBA AXI: AXI MM (lite) \u2013 parametry, kan\u00e1ly, transakce \u010dten\u00ed a z\u00e1pisu, rozd\u00edl mezi AXI4 a AXI4-lite","text":""},{"location":"HSC_13/#axi4-lite","title":"AXI4-LITE","text":"<p>Jedn\u00e1 se o zjednodu\u0161enou verzi AMBA AXI4 Jednoduch\u00e1 n\u00edzkokapacitn\u00ed komunikace, typicky pro nastavov\u00e1n\u00ed konfigura\u010dn\u00edch a stavov\u00fdch registr\u016f</p>"},{"location":"HSC_13/#parametry","title":"Parametry","text":"<ul> <li>P\u0159enos pouze po slovech</li> <li>Omezen\u00e1 \u0161\u00ed\u0159ka (32,64 bit\u016f)</li> <li>Adresn\u00ed \u0161\u00ed\u0159ka do 64 bit</li> <li>Typicky Round Robin arbitrace</li> <li>Pomal\u00e1</li> </ul>"},{"location":"HSC_13/#kanaly","title":"Kan\u00e1ly","text":"<ul> <li>AXI-4 LITE je slo\u017een ze 4 sign\u00e1l\u016f</li> <li>\u010cten\u00ed:<ul> <li>Adresn\u00ed kan\u00e1l \u2013 MASTER pos\u00edl\u00e1 adresu odkud chce \u010d\u00edst</li> <li>Datov\u00fd kan\u00e1l \u2013 SLAVE pos\u00edl\u00e1 p\u0159e\u010dten\u00e1 data a status</li> </ul> </li> <li>Z\u00e1pis:<ul> <li>Adresn\u00ed kan\u00e1l \u2013 MASTER pos\u00edl\u00e1 adresu, kam chce zapisovat </li> <li>Datov\u00fd kan\u00e1l \u2013 MASTER pos\u00edl\u00e1 samotn\u00e1 data</li> <li>Kan\u00e1l potvrzen\u00ed \u2013 SLAVE odpov\u00edd\u00e1, zda z\u00e1pis prob\u011bhl v po\u0159\u00e1dku</li> </ul> </li> </ul>"},{"location":"HSC_13/#transakce-cteni-a-zapisu","title":"Transakce \u010dten\u00ed a z\u00e1pisu","text":"<ul> <li>\u010cten\u00ed:<ul> <li>Master um\u00edst\u00ed adresu na kan\u00e1l \u010cten\u00ed Adres a z\u00e1rove\u0148 aktivuje ARVALID, \u010d\u00edm\u017e indikuje, \u017ee adresa je platn\u00e1, a RREADY, \u010d\u00edm\u017e indikuje, \u017ee je p\u0159ipraven p\u0159ij\u00edmat data od za\u0159\u00edzen\u00ed Slave.</li> <li>Slave aktivuje ARREADY, \u010d\u00edm\u017e d\u00e1v\u00e1 najevo, \u017ee je p\u0159ipraven p\u0159ijmout adresu ze sb\u011brnice.</li> <li>Jeliko\u017e jsou aktivn\u00ed sign\u00e1ly ARVALID i ARREADY, p\u0159i n\u00e1sleduj\u00edc\u00ed n\u00e1b\u011b\u017en\u00e9 hran\u011b hodinov\u00e9ho sign\u00e1lu dojde k nav\u00e1z\u00e1n\u00ed spojen\u00ed (handshake). Pot\u00e9 Master a Slave deaktivuj\u00ed sign\u00e1ly ARVALID a ARREADY. (V tomto okam\u017eiku Slave p\u0159ijal po\u017eadovanou adresu).</li> <li>Slave um\u00edst\u00ed po\u017eadovan\u00e1 data na kan\u00e1l \u010cten\u00ed Dat a aktivuje RVALID, \u010d\u00edm\u017e indikuje, \u017ee data v kan\u00e1lu jsou platn\u00e1. </li> <li>Jeliko\u017e jsou aktivn\u00ed sign\u00e1ly RREADY i RVALID, n\u00e1sleduj\u00edc\u00ed n\u00e1b\u011b\u017en\u00e1 hrana hodinov\u00e9ho sign\u00e1lu dokon\u010d\u00ed transakci. Sign\u00e1ly RREADY a RVALID nyn\u00ed mohou b\u00fdt deaktivov\u00e1ny.</li> </ul> </li> <li>Z\u00e1pis:<ul> <li>Master um\u00edst\u00ed adresu na kan\u00e1l Z\u00e1pis Adresy a data na kan\u00e1l Z\u00e1pis Dat. Sou\u010dasn\u011b aktivuje sign\u00e1ly AWVALID a WVALID, \u010d\u00edm\u017e indikuje, \u017ee adresa a data na p\u0159\u00edslu\u0161n\u00fdch kan\u00e1lech jsou platn\u00e1. Master tak\u00e9 aktivuje BREADY, \u010d\u00edm\u017e signalizuje, \u017ee je p\u0159ipraven p\u0159ijmout odpov\u011b\u010f.</li> <li>Slave aktivuje AWREADY a WREADY na kan\u00e1lech Z\u00e1pis Adres a Z\u00e1pis Dat.</li> <li>Jeliko\u017e jsou na kan\u00e1lech Z\u00e1pis Adres i Z\u00e1pis Dat p\u0159\u00edtomny sign\u00e1ly Valid i Ready, dojde na t\u011bchto kan\u00e1lech k nav\u00e1z\u00e1n\u00ed spojen\u00ed (handshake) a p\u0159\u00edslu\u0161n\u00e9 sign\u00e1ly Valid a Ready mohou b\u00fdt deaktivov\u00e1ny. (Pot\u00e9, co prob\u011bhnou oba handshake, m\u00e1 Slave k dispozici adresu pro z\u00e1pis i data).</li> <li>Slave aktivuje BVALID, \u010d\u00edm\u017e indikuje, \u017ee na kan\u00e1lu Z\u00e1pis potvrzen\u00ed je platn\u00e1 odpov\u011b\u010f.</li> <li>N\u00e1sleduj\u00edc\u00ed n\u00e1b\u011b\u017en\u00e1 hrana hodinov\u00e9ho sign\u00e1lu dokon\u010d\u00ed transakci, p\u0159i\u010dem\u017e sign\u00e1ly Ready i Valid na kan\u00e1lu Z\u00e1pis potvrzen\u00ed jsou v logick\u00e9 jedni\u010dce (high).</li> </ul> </li> </ul>"},{"location":"HSC_13/#axi4-mm","title":"AXI4-MM","text":"<p>Tohle je bran\u00fd jako klasickej AXI4 nebo AXI4 FULL</p>"},{"location":"HSC_13/#parametry_1","title":"Parametry","text":"<ul> <li>\u0160\u00ed\u0159ka a\u017e 1024 bit\u016f </li> <li>Burst p\u0159enosy do 256 slov<ul> <li>FIXED , INCR, WRAP </li> </ul> </li> <li>Adresn\u00ed \u0161\u00ed\u0159ka do 64 slov</li> <li>rychl\u00e1</li> </ul>"},{"location":"HSC_13/#kanaly_1","title":"Kan\u00e1ly","text":"<ul> <li>\u010cteni:<ul> <li>Adresn\u00ed kan\u00e1l</li> <li>Datov\u00fd kan\u00e1l</li> </ul> </li> <li>Z\u00e1pis:<ul> <li>Adresn\u00ed kan\u00e1l</li> <li>Datov\u00fd kan\u00e1l</li> <li>Kan\u00e1l potvrzen\u00ed</li> </ul> </li> </ul>"},{"location":"HSC_13/#transakce-cteni-a-zapisu_1","title":"Transakce \u010dten\u00ed a z\u00e1pisu","text":"<ul> <li>\u010cten\u00ed:<ul> <li>Nejprve kan\u00e1l \u010cten\u00ed Adres po\u0161le z\u00a0Masteru do Slavu, aby nastavil adresu a n\u011bjak\u00e9 \u0159\u00edd\u00edc\u00ed sign\u00e1ly</li> <li>Potom data pro tuto adresu jsou p\u0159eneseny ze Slavu do Masteru p\u0159es kan\u00e1l \u010cten\u00ed Dat</li> </ul> </li> <li>Z\u00e1pis:<ul> <li>Nejprve je kan\u00e1l Z\u00e1pisu Adres z\u00a0Masteru do Slavu, aby nastavil adresu a n\u011bjak\u00e9 \u0159\u00edd\u00edc\u00ed sign\u00e1ly</li> <li>Potom data pro tuto adresu jsou posl\u00e1ny z\u00a0Masteru do Slavu p\u0159es kan\u00e1l Z\u00e1pis Dat</li> <li>Nakonec je posl\u00e1na odpov\u011b\u010f ze Slavu do Masteru p\u0159es\u00a0kan\u00e1l Z\u00e1pis potvrzen\u00ed pro indikaci, zda byl p\u0159enos dat \u00fasp\u011b\u0161n\u00fd</li> </ul> </li> </ul>"},{"location":"HSC_13/#rozdil-mezi-axi4-mm-a-axi4-lite","title":"Rozd\u00edl mezi AXI4 MM a AXI4-lite","text":"<ul> <li>AXI-4 MM neboli AXI-4 full je ur\u010deno pro vysoce v\u00fdkonn\u00fd p\u0159enos dat, zat\u00edmco AXI4-Lite je navr\u017een pro jednoduch\u00e9 ovl\u00e1d\u00e1n\u00ed a nastaven\u00ed stavu</li> <li>AXI4-MM m\u00e1 burst: Master po\u0161le pouze jednu adresu a u\u017e se nav\u00e1\u017een\u00ed spojen\u00ed se Slavem kter\u00fd automaticky inkrementuje adresu pro dal\u0161\u00ed data, zat\u00edmco AXI4-LITE podporuje jen SINGLE TRANSACTION, tud\u00ed\u017e ka\u017ed\u00e1 \u010d\u00e1st dat pot\u0159ebuje sv\u016fj vlastn\u00ed adresn\u00ed handshake</li> <li>P\u0159i spojen\u00ed s\u00a0v\u00edce mastery AXI4-Lite funguje na pricnipu Round Robin, tud\u00ed\u017e se postupuje postupn\u011b od A do Z, zat\u00edmco u AXI4-MM se m\u016f\u017ee zvolit priorita.</li> </ul> <p>Je to z\u00a0t\u00fdhle str\u00e1nky: https://www.logic-fruit.com/blogs/digital-interfaces/axi-full-axi-lite-interfaces/#:~:text=able%20to%20access%20memory%2Dmapped,than%20the%20complete%20AXI4%20interface.</p>"},{"location":"HSC_14/","title":"AMBA AXI: parametry, z\u00e1kladn\u00ed topologie, IP j\u00e1dra, prost\u0159edky p\u0159ipojen\u00ed periferi\u00ed","text":""},{"location":"HSC_14/#parametry","title":"Parametry","text":"<ul> <li>\u0160\u00ed\u0159ka a\u017e 1024 bit\u016f </li> <li>Burst p\u0159enosy do 256 slov</li> <li>FIXED , INCR, WRAP </li> <li>Adresn\u00ed \u0161\u00ed\u0159ka do 64 slov</li> <li>rychl\u00e1</li> </ul>"},{"location":"HSC_14/#zakladni-topologie","title":"Z\u00e1kladn\u00ed topologie","text":"<ul> <li>Tady trochu stru\u010dn\u011b u\u017e je to probran\u00fd ve 12 a 13</li> <li>Typ spojen\u00ed PTP: MASTER-SLAVE</li> <li>5 kan\u00e1l\u016f: \u010cten\u00ed (Adresn\u00ed a datov\u00fd kan\u00e1l), Z\u00e1pis (Adresn\u00ed, datov\u00fd a potvrzovac\u00ed kan\u00e1l)</li> <li>AXI Interconnect neboli Crossbar (propojen\u00ed v\u00edce Master\u016f s\u00a0v\u00edce Slaves)</li> <li>Handshake mechanismus (Ready a Valid)</li> <li>Odd\u011blen\u00e9 cesty pro \u010dten\u00ed a z\u00e1pis</li> </ul>"},{"location":"HSC_14/#ip-jadra","title":"IP j\u00e1dra","text":"<p>Druhy AXI4 IP j\u00e1der:</p> <ul> <li>AXI4-DMA: vy\u017eaduje, aby CPU pozastavilo, zapsalo do konfigura\u010dn\u00edch registr\u016f (zdrojov\u00e1 adresa, d\u00e9lka, \u0159\u00edzen\u00ed) pomoc\u00ed AXI-Lite a pot\u00e9 spustilo<ul> <li>Konfigurovateln\u00fd MM2S a S2MM p\u0159evodn\u00edk<ul> <li>2xDatamover \u2013 kan\u00e1ly \u010dten\u00ed a z\u00e1pisu<ul> <li>32-1024 MM, 32-1024S, Burst 2-256, DRE, 8-26 bit\u016f d\u00e9lka p\u0159enosu</li> </ul> </li> <li>Voliteln\u00fd SG</li> <li>Voliteln\u00fd \u0159\u00edd\u00edc\u00ed a status stream</li> <li>\u0158\u00edzen\u00ed z CPU pomoc\u00ed u\u017eivatelsk\u00fdch registr\u016f</li> </ul> </li> </ul> </li> <li>AXI4-Lite IPIC: Provides a simple control interface (Point-to-Point) for user IP to connect to an AXI interconnect for configuration.<ul> <li>IPIC = IP Interface Controller</li> <li>Dekod\u00e9r adres, Registrov\u00fd soubor, Z\u00e1pis s byte enable, Timeout \u010d\u00edta\u010d, Podpora burst</li> </ul> </li> <li>AXI-DataMover: I kdy\u017e pln\u00ed podobnou funkci jako \u0159adi\u010d s p\u0159\u00edm\u00fdm p\u0159\u00edstupem do pam\u011bti (DMA), funguje odli\u0161n\u011b: je \u0159\u00edzen hardwarem, nikoli softwarov\u011b konfigurov\u00e1n<ul> <li>funguje jako most mezi AXI4-Stream a AXI4 Memory-Mapped</li> <li>Zad\u00e1te mu p\u0159\u00edkaz (p\u0159es rozhran\u00ed AXI-Stream) obsahuj\u00edc\u00ed adresu a po\u010det bajt\u016f a on okam\u017eit\u011b provede p\u0159enos.</li> <li>Konfigurovateln\u00fd MM2S a S2MM p\u0159evodn\u00edk</li> <li>2xDatamover \u2013 kan\u00e1ly \u010dten\u00ed a z\u00e1pisu<ul> <li>32-1024 MM, 32-1024S, Burst 2-256</li> <li>DRE</li> <li>23 bit\u016f d\u00e9lka p\u0159enosu</li> </ul> </li> <li>Voliteln\u00fd SG</li> <li>Voliteln\u00fd \u0159\u00edd\u00edc\u00ed a status stream</li> <li>\u0158\u00edzen\u00ed z IP j\u00e1dra pomoc\u00ed \u0159\u00edd\u00edc\u00edho Stream rozhran\u00ed<ul> <li>Command, Status</li> </ul> </li> <li>Nem\u00e1 ovlada\u010de</li> </ul> </li> </ul>"},{"location":"HSC_14/#prostredky-pripojeni-periferii","title":"Prost\u0159edky p\u0159ipojen\u00ed periferi\u00ed","text":"<ul> <li>PTP<ul> <li>P\u0159\u00edm\u00ed p\u0159ipojen\u00ed periferi\u00ed</li> </ul> </li> <li>AXI Interconnection<ul> <li>CPU m\u00e1 limitovan\u00fd po\u010det Master port\u016f</li> <li>Pou\u017eit\u00ed prost\u0159edn\u00edka: Arbiteru</li> </ul> </li> <li>DMA (Direct Memory Access)<ul> <li>AXI4-Stream periferie nem\u016f\u017ee\u0161 p\u0159ipojit p\u0159\u00edmo k\u00a0CPU (jeliko\u017e rozum\u00ed jen adres\u00e1m co\u017e stream nem\u00e1) je pot\u0159eba pou\u017e\u00edt DMA Engine pro jejich p\u0159emost\u011bn\u00ed</li> </ul> </li> <li>Memory Mapping<ul> <li>Pro AXI4-Lite a AXI4-Full</li> <li>Ka\u017ed\u00e1 periferie dostane unik\u00e1tn\u00ed adresu</li> </ul> </li> </ul>"},{"location":"HSC_15/","title":"DMA \u0159adi\u010d, scatter gather, ovlada\u010de, koherence dat, p\u0159ehled dostupn\u00fdch IP","text":""},{"location":"HSC_15/#dma-direct-memory-access","title":"DMA (Direct Memory Access)","text":"<p>DMA \u0159adi\u010d je specializovan\u00fd hardware, kter\u00fd umo\u017e\u0148uje periferi\u00edm (nap\u0159. s\u00ed\u0165ov\u00fdm kart\u00e1m, disk\u016f, A/D p\u0159evodn\u00edk\u016fm) p\u0159istupovat p\u0159\u00edmo do opera\u010dn\u00ed pam\u011bti bez zat\u011b\u017eov\u00e1n\u00ed procesoru. Princip je takov\u00fd, \u017ee procesor nastav\u00ed parametry p\u0159enosu (zdrojov\u00e1 adresa, c\u00edlov\u00e1 adresa, d\u00e9lka), DMA \u0159adi\u010d p\u0159evezme \u0159\u00edzen\u00ed sb\u011brnice a provede p\u0159enos dat mezi pam\u011bt\u00ed a periferi\u00ed a po dokon\u010den\u00ed p\u0159enosu informuje procesor (obvykle p\u0159eru\u0161en\u00edm). V\u00fdhodou je, \u017ee odleh\u010duje procesor od rutinn\u00edch p\u0159esun\u016f dat, zvy\u0161uje propustnost syst\u00e9mu a umo\u017e\u0148uje paraleln\u00ed b\u011bh v\u00fdpo\u010dt\u016f a p\u0159enos\u016f.</p> <p></p>"},{"location":"HSC_15/#scatter-gather","title":"Scatter-Gather","text":"<p>Scatter-Gather je mechanismus DMA \u0159adi\u010de, kter\u00fd umo\u017e\u0148uje efektivn\u00ed p\u0159enos dat ulo\u017een\u00fdch v nesouvisl\u00fdch bloc\u00edch fyzick\u00e9 pam\u011bti (fragmentace), ani\u017e by procesor musel inicializovat a \u0159\u00eddit ka\u017edou d\u00edl\u010d\u00ed transakci zvl\u00e1\u0161\u0165. Velk\u00fd soubor dat m\u016f\u017ee b\u00fdt toti\u017e fyzicky rozh\u00e1zen na r\u016fzn\u00e9 adresy a c\u00edlem je tyto jednotliv\u00e9 fragmenty souboru naj\u00edt a spojit. Technicky je tento proces realizov\u00e1n pomoc\u00ed hardwarov\u011b zpracov\u00e1van\u00e9ho spojov\u00e9ho seznamu \u0159\u00eddic\u00edch struktur zvan\u00fdch deskriptory (Buffer Descriptors), kter\u00e9 procesor p\u0159edem p\u0159iprav\u00ed v opera\u010dn\u00ed pam\u011bti. Ka\u017ed\u00fd deskriptor obsahuje ukazatele na fyzickou adresu datov\u00e9ho bufferu, informaci o d\u00e9lce p\u0159enosu a odkaz na adresu n\u00e1sleduj\u00edc\u00edho deskriptoru. DMA \u0159adi\u010d po aktivaci automaticky na\u010dte prvn\u00ed deskriptor, provede definovan\u00fd p\u0159enos dat, n\u00e1sledn\u011b si bez asistence procesoru na\u010dte konfiguraci pro dal\u0161\u00ed blok z odkazu n\u00e1sleduj\u00edc\u00edho ukazatele a takto cyklicky pokra\u010duje a\u017e do konce \u0159et\u011bzce s\u00a0mo\u017enost\u00ed aktivace cyklick\u00e9ho opakov\u00e1n\u00ed, kdy posledn\u00ed deskriptor ukazuje na ten prvn\u00ed. Dok\u00e1\u017ee tedy autonomn\u011b sesb\u00edrat data z r\u016fzn\u00fdch adres slo\u017eit je do jednoho seskupen\u00ed nebo je naopak rozpt\u00fdlit do voln\u00fdch pam\u011b\u0165ov\u00fdch blok\u016f, co\u017e je kl\u00ed\u010dov\u00e9 pro vysok\u00fd v\u00fdkon u segmentovan\u00fdch dat a v\u00a0syst\u00e9mech se str\u00e1nkov\u00e1n\u00edm pam\u011bti, nap\u0159\u00edklad u s\u00ed\u0165ov\u00fdch paket\u016f nebo multimedi\u00e1ln\u00edch dat, kde jsou bloky pam\u011bti \u010dasto nesouvisl\u00e9. Scatter-Gather tedy zvy\u0161uje efektivitu a flexibilitu p\u0159enos\u016f.</p> <p>Podrobn\u00e1 struktura deskriptoru:</p> <p></p>"},{"location":"HSC_15/#ovladace","title":"Ovlada\u010de","text":"<p>Ovlada\u010de jsou softwarov\u00e9 komponenty, kter\u00e9 propojuj\u00ed opera\u010dn\u00ed syst\u00e9m s DMA hardwarem. Jejich \u00fakolem je inicializovat \u0159adi\u010d, nastavit deskriptory, obsluhovat p\u0159eru\u0161en\u00ed a nab\u00eddnout aplikac\u00edm jednoduch\u00e9 rozhran\u00ed pro spu\u0161t\u011bn\u00ed p\u0159enosu. To znamen\u00e1, \u017ee aplikace zavol\u00e1 funkci typu \u201epo\u0161li tento buffer do periferie\u201c, ovlada\u010d p\u0159iprav\u00ed deskriptory a DMA \u0159adi\u010d provede samotn\u00fd p\u0159enos. Ovlada\u010de tedy zaji\u0161\u0165uj\u00ed, aby hardware byl vyu\u017e\u00edv\u00e1n spr\u00e1vn\u011b a bezpe\u010dn\u011b.</p>"},{"location":"HSC_15/#koherence-dat","title":"Koherence dat","text":"<p>Koherence dat \u0159e\u0161\u00ed probl\u00e9m, \u017ee procesor pracuje s cache pam\u011bt\u00ed (rychlou vyrovn\u00e1vac\u00ed pam\u011bt\u00ed), zat\u00edmco DMA zapisuje p\u0159\u00edmo do hlavn\u00ed pam\u011bti (DDR RAM). Pokud procesor m\u00e1 v cache star\u0161\u00ed kopii dat, m\u016f\u017ee doj\u00edt k nesouladu. Aby byla data konzistentn\u00ed a na\u010detla se tedy aktu\u00e1ln\u00ed data z pam\u011bti, je nutn\u00e9 p\u0159ed spu\u0161t\u011bn\u00edm DMA p\u0159enosu cache vypr\u00e1zdnit (flush) a po dokon\u010den\u00ed p\u0159enosu ji prohl\u00e1sit za neplatnou, tedy takovou, kter\u00e9 se u\u017e ned\u00e1 v\u011b\u0159it, proto\u017ee m\u016f\u017ee obsahovat zastaral\u00e1 nebo nekonzistentn\u00ed data. Procesor je pak p\u0159i p\u0159\u00ed\u0161t\u00edm \u010dten\u00ed znovu na\u010dte z hlavn\u00ed pam\u011bti, kde u\u017e jsou aktu\u00e1ln\u00ed hodnoty. N\u011bkter\u00e9 modern\u00ed architektury maj\u00ed hardwarovou podporu koherence, tak\u017ee se o to star\u00e1 syst\u00e9m automaticky. Spr\u00e1vn\u00e1 koherence je z\u00e1sadn\u00ed pro spolehliv\u00fd provoz.</p>"},{"location":"HSC_15/#prehled-dostupnych-ip","title":"P\u0159ehled dostupn\u00fdch IP","text":"<p>AXI Interconnect: Soubor IP jader infrastruktury slou\u017e\u00edc\u00edch k vytvo\u0159en\u00ed sb\u011brnic v\u00a0SoC (System on Chip):</p> <ul> <li>AXI Crossbar je re\u017eim IP j\u00e1dra AXI Interconnect, kter\u00fd umo\u017e\u0148uje neblokuj\u00edc\u00ed propojen\u00ed mezi v\u00edce AXI master a v\u00edce AXI slave rozhran\u00edmi. Ka\u017ed\u00e1 transakce je sm\u011brov\u00e1na podle adresy na odpov\u00eddaj\u00edc\u00ed slave a ke stejn\u00e9mu slave m\u016f\u017ee v dan\u00fd okam\u017eik mluvit jen jeden master. Sou\u010dasn\u011b v\u0161ak mohou prob\u00edhat transakce k r\u016fzn\u00fdm slave bez vz\u00e1jemn\u00e9ho blokov\u00e1n\u00ed. Jedn\u00e1 se tedy o inteligentn\u00ed p\u0159ep\u00edna\u010d (switch) neboli dopravn\u00ed uzel pro sb\u011brnici AXI s\u00a0optimalizac\u00ed zam\u011b\u0159enou na vyu\u017eitou plochu \u010dipu nebo na jeho rychlost.</li> <li>AXI Data Width Converter slou\u017e\u00ed jako p\u0159eklada\u010d (adapt\u00e9r) mezi dv\u011bma komponentami, kter\u00e9 maj\u00ed r\u016fznou \u0161\u00ed\u0159ku datov\u00e9 sb\u011brnice. Zaji\u0161\u0165uje, aby se spolu mohly bavit nap\u0159\u00edklad procesor (32-bit) a pam\u011b\u0165 (64-bit), ani\u017e byste museli ps\u00e1t slo\u017eitou logiku pro spojov\u00e1n\u00ed nebo d\u011blen\u00ed dat.</li> <li>AXI Clock Converter slou\u017e\u00ed k p\u0159eklenut\u00ed rozd\u00edln\u00fdch hodinov\u00fdch dom\u00e9n mezi dv\u011bma AXI rozhran\u00edmi. Pou\u017e\u00edv\u00e1 se tehdy, kdy\u017e master a slave b\u011b\u017e\u00ed na odli\u0161n\u00fdch frekvenc\u00edch nebo maj\u00ed asynchronn\u00ed hodinov\u00e9 sign\u00e1ly. Converter zaji\u0161\u0165uje, \u017ee se data p\u0159enesou bezpe\u010dn\u011b, bez hazard\u016f a poru\u0161en\u00ed protokolu AXI.</li> <li>AXI Data FIFO je vyrovn\u00e1vac\u00ed pam\u011b\u0165 (buffer) navr\u017een\u00e1 speci\u00e1ln\u011b pro protokol AXI4. Jej\u00ed hlavn\u00ed funkc\u00ed je do\u010dasn\u011b ukl\u00e1dat data a \u0159\u00eddic\u00ed sign\u00e1ly, kter\u00e9 proud\u00ed mezi komponentou Master a komponentou Slave, kdy\u017e jedna ze stran nen\u00ed p\u0159ipravena data okam\u017eit\u011b p\u0159ijmout.</li> <li>AXI Register Slice slou\u017e\u00ed ke vlo\u017een\u00ed registrov\u00e9 (pipeline) vrstvy do toku sign\u00e1l\u016f AXI, \u010d\u00edm\u017e zkr\u00e1t\u00ed kombina\u010dn\u00ed cesty mezi vstupy a v\u00fdstupy a usnadn\u00ed \u010dasov\u00e1n\u00ed u vysok\u00fdch frekvenc\u00ed nebo dlouh\u00fdch fyzick\u00fdch tras na \u010dipu.</li> <li>AXI MMU (Memory Management Unit) prov\u00e1d\u00ed mapov\u00e1n\u00ed a p\u0159eklad adres v r\u00e1mci pam\u011b\u0165ov\u011b mapovan\u00fdch AXI syst\u00e9m\u016f. Umo\u017e\u0148uje p\u0159esm\u011brovat po\u017eadavky z AXI master\u016f do r\u016fzn\u00fdch adresn\u00edch c\u00edl\u016f, slu\u010dovat nebo rozd\u011blovat adresn\u00ed prostor a t\u00edm flexibiln\u011bji organizovat syst\u00e9movou pam\u011b\u0165ovou topologii bez z\u00e1sahu do samotn\u00fdch master/slave IP blok\u016f</li> </ul> <p>AXI IPIC (IP Interface Controller) je rozhran\u00ed, kter\u00e9 propojuje u\u017eivatelsk\u00e9 IP j\u00e1dro s AXI sb\u011brnic\u00ed. Slou\u017e\u00ed jako standardizovan\u00fd most mezi vlastn\u00edm logick\u00fdm blokem a AXI interconnectem, aby se IP j\u00e1dro mohlo snadno za\u010dlenit do syst\u00e9mu zalo\u017een\u00e9ho na AMBA AXI protokolu.</p> <p>AXI Peripheral je u\u017eivatelsky definovan\u00fd nebo p\u0159edp\u0159ipraven\u00fd blok logiky, kter\u00fd komunikuje s ostatn\u00edmi \u010d\u00e1stmi syst\u00e9mu p\u0159es standardizovanou sb\u011brnici AXI. Slou\u017e\u00ed jako rozhran\u00ed mezi procesorem a perifern\u00ed logikou.</p> <p>AXI DMA umo\u017e\u0148uje vysokorychlostn\u00ed p\u0159enos dat mezi pam\u011bt\u00ed (AXI4 Memory Mapped) a periferiemi pracuj\u00edc\u00edmi se streamovan\u00fdmi daty (AXI4-Stream), bez nutnosti zat\u011b\u017eovat procesor.</p> <ul> <li>MM2S (Memory-Mapped to Stream): \u010dte blok dat z pam\u011bti a pos\u00edl\u00e1 je do streamov\u00e9ho rozhran\u00ed.</li> <li>S2MM (Stream to Memory-Mapped): p\u0159ij\u00edm\u00e1 streamovan\u00e1 data a ukl\u00e1d\u00e1 je do pam\u011bti.</li> </ul> <p>AXI DataMover zaji\u0161\u0165uje efektivn\u00ed p\u0159enos dat (d\u00e9lka p\u0159enosu je 23 bit\u016f) mezi pam\u011b\u0165ov\u011b mapovan\u00fdm rozhran\u00edm AXI4 a proudov\u00fdm rozhran\u00edm AXI4-Stream. Slou\u017e\u00ed jako univerz\u00e1ln\u00ed transportn\u00ed blok, kter\u00fd dok\u00e1\u017ee \u010d\u00edst data z pam\u011bti a pos\u00edlat je do streamu, nebo naopak p\u0159ij\u00edmat streamovan\u00e1 data a zapisovat je do pam\u011bti.</p> <p>PS DMA controller (Processing System Direct Memory Access) je specializovan\u00fd controller s\u00a08 virtu\u00e1ln\u00edmi kan\u00e1ly, kter\u00fd je ur\u010den\u00fd v\u00fdhradn\u011b k tomu, aby p\u0159en\u00e1\u0161el data z jednoho m\u00edsta na druh\u00e9, ani\u017e by t\u00edm zat\u011b\u017eoval hlavn\u00ed procesor.</p>"},{"location":"HSC_16/","title":"Jazyk VHDL - knihovny, entita \u2013 porty a generick\u00e9 parametry, architektura \u2013 deklara\u010dn\u00ed \u010d\u00e1st, t\u011blo, p\u0159ehled paraleln\u00edch p\u0159\u00edkaz\u016f, proces a citlivostn\u00ed seznam","text":"<p>VHDL \u2013 strukturovan\u00fd, hierarchick\u00fd, paraleln\u00ed i impretativn\u00ed (sekven\u010dn\u00ed), siln\u011b typov\u011b orientovan\u00fd(p\u0159edch\u00e1zen\u00ed chyb\u00e1m, kontrola b\u011bhem kompilace), nen\u00ed case sensitive</p>"},{"location":"HSC_16/#knihovny","title":"Knihovny","text":"<ul> <li>Package<ul> <li>hierarchicky nad entitou a architekturou </li> <li>nelze uv\u00e9st deklaraci entity nebo architektury</li> <li>pro opakovan\u00e9 pou\u017eit\u00ed k\u00f3du nap\u0159\u00ed\u010d designem</li> <li>deklara\u010dn\u00ed \u010d\u00e1st (package) \u2013 hlavi\u010dky funkc\u00ed, procedur, konstant, sign\u00e1l\u016f</li> <li>t\u011blo (package body) \u2013 definice funkc\u00ed,  </li> <li>p\u0159. std_logic_1164(std_logic_vector, v\u00edcehodnotov\u00e1(9) logika, logick\u00e9 operace, konverzn\u00ed funkce), numeric_std(aritmetick\u00e9 a logick\u00e9 operace)</li> <li>USE library_name.package_name.element(all) \u2013 v\u0161echny \u010d\u00e1sti package</li> </ul> </li> <li>Library<ul> <li>Obsahuje \u010d\u00e1sti kompilovan\u00e9ho VHDL k\u00f3du</li> <li>M\u016f\u017ee obsahovat entitu, architekturu, package</li> <li>Pracovn\u00ed knihovna \u2013 ukazatel do pracovn\u00edho adres\u00e1\u0159e, kde jsou pou\u017e\u00edvan\u00e9 soubory</li> <li>LIBRARY library_name;</li> </ul> </li> </ul> <p>Package a knihovna se vztahuj\u00ed k\u00a0nejbli\u017e\u0161\u00ed entit\u011b, pro dal\u0161\u00ed pou\u017eit\u00ed je nutn\u00e9 p\u0159\u00edkazy LIBRARY a USE opakovat</p>"},{"location":"HSC_16/#entita","title":"Entita","text":"<ul> <li>Definice hierarchick\u00e9ho obvodu \u2013 \u010dern\u00e1 sk\u0159\u00ed\u0148ka, nepopisuje funkci obvodu</li> <li>T\u011blo architektury obsahuje<ul> <li>Deklara\u010dn\u00ed \u010d\u00e1st \u2013 popis vn\u011bj\u0161\u00edch sign\u00e1l\u016f entity (IN, OUT, INOUT, BUFFER)</li> <li>Seznam generick\u00fdch konstant  <ul> <li>p\u0159. GENERIC (Loop : integer := 3);</li> <li>obdoba port\u016f, ale nep\u0159edstavuje \u017e\u00e1dn\u00fd sign\u00e1l</li> <li>obdoba konstanty (viditeln\u00e1 v entit\u011b a p\u0159i\u0159azen\u00fdch architektur\u00e1ch)</li> <li>pou\u017e\u00edv\u00e1 se jako parametr (nem\u011bn\u00edc\u00ed se v \u010dase) \u2013 lep\u0161\u00ed \u010ditelnost</li> </ul> </li> </ul> </li> <li>Funkce<ul> <li>Podprogram, co vrac\u00ed hodnotu</li> <li>Maj\u00ed vstupn\u00ed operandy a jeden v\u00fdstupn\u00ed</li> <li>Nemohou zde b\u00fdt deklarov\u00e1ny sign\u00e1ly</li> <li>Lze deklarovat konstanty a prom\u011bnn\u00e9, inicializuj\u00ed se p\u0159i ka\u017ed\u00e9m vol\u00e1n\u00ed </li> </ul> </li> <li>Procedury<ul> <li>Podprogram, co modifikuje vstupn\u00ed parametry (IN,OUT,INOUT)</li> <li>Lze p\u0159ed\u00e1vat konstanty, prom\u011bnn\u00e9 i sign\u00e1ly, lze z\u00a0n\u00ed volat dal\u0161\u00ed procedur</li> </ul> </li> </ul>"},{"location":"HSC_16/#architektura","title":"Architektura","text":"<ul> <li>Popis chov\u00e1n\u00ed entity, ka\u017ed\u00e1 entita m\u00e1 alespo\u0148 jednu architekturu</li> <li>Obsahuje <ul> <li>Deklara\u010dn\u00ed \u010d\u00e1st \u2013 Definice sign\u00e1l\u016f \u2026 PORT ( vstup : IN BIT ; a1, b1 : IN BIT_VECTOR (3 DOWNTO 0) ; vystup : OUT BIT ) ;</li> <li>P\u0159\u00edkazovou \u010d\u00e1st  - uzav\u0159eno do BEGIN - END</li> </ul> </li> <li>Mo\u017en\u00fd popis na r\u016fzn\u00fdch \u00farovn\u00edch abstrakce<ul> <li>Strukturn\u00ed \u2013 prvky a jejich propojen\u00ed</li> <li>RTL - Register Transfer level-nezn\u00e1me p\u0159esn\u011b zapojen\u00ed obvodu, ale zn\u00e1me jeho funkci, v\u00a0r\u00e1mci synt\u00e9zy se p\u0159evede RTL na struktur\u00e1ln\u00ed netlist (zapojen\u00ed)</li> <li>Behavior\u00e1ln\u00ed \u2013 popis chov\u00e1n\u00ed obvodu - registry, stavov\u00e9 aut., test. budic\u00ed soubory</li> </ul> </li> </ul>"},{"location":"HSC_16/#paralerni-prikazy","title":"Paralern\u00ed p\u0159\u00edkazy","text":"<ul> <li>Soub\u011b\u017en\u011b vykon\u00e1van\u00e9(dataflow) \u2013 vykon\u00e1n\u00ed trv\u00e1 nulovou dobu</li> <li>P\u0159i\u0159azen\u00ed<ul> <li>Nepodm\u00edn\u011bn\u00e9 </li> <li>Podm\u00edn\u011bn\u00e9 </li> <li>V\u00fdb\u011brov\u00e9 (obdoba case, ale nesekven\u010dn\u00ed)</li> </ul> </li> <li>Strukturn\u00ed<ul> <li>Generuj\u00edc\u00ed p\u0159\u00edkaz \u2013 nem\u00e1 sekven\u010dn\u00ed charakter<ul> <li>Generuje kod podle poskytnut\u00e9ho sch\u00e9ma</li> <li>Sch\u00e9ma m\u016f\u017ee b\u00fdt podm\u00ednka IF nebo FOR</li> </ul> </li> <li>Instance entity, komponenty \u2013 vlo\u017e\u00ed do kodu blok definovan\u00fd v\u00a0jin\u00e9m souboru<ul> <li>Je-li kod ve VHDL \u2013 instance entity</li> <li>Jin\u00e1 forma \u2013 deklarace a instance komponenty</li> </ul> </li> </ul> </li> <li>Simula\u010dn\u00ed \u2013 Assert, Report </li> <li>Pro sekven\u010dn\u00ed zpracov\u00e1n\u00ed (behavioral)<ul> <li>Proces</li> </ul> </li> </ul>"},{"location":"HSC_16/#process","title":"Process","text":"<ul> <li>Pro popis sekven\u010dn\u00edch d\u011bj\u016f</li> <li>Obsah se vykon\u00e1v\u00e1 sekven\u010dn\u011b ale spou\u0161t\u011bn\u00ed v\u00edce proces\u016f je paraleln\u00ed</li> <li>Spu\u0161t\u011bn p\u0159i zm\u011bn\u011b objektu v\u00a0citlivostn\u00edm seznamu, d\u00e1 se tam d\u00e1t i all</li> <li>P\u0159i\u0159azen\u00ed &lt;= prob\u011bhnou po dokon\u010den\u00ed procesu nebo p\u0159\u00edkazem WAIT </li> <li>P\u0159i\u0159azen\u00ed := prob\u011bhne okam\u017eit\u011b, prom\u011bnn\u00e9 jsou vid\u011bt jen v procesu</li> </ul>"},{"location":"HSC_17/","title":"VHDL - z\u00e1kladn\u00ed datov\u00e9 typy, knihovn\u00ed typy, VHDL pro synt\u00e9zu - zp\u016fsoby efektivn\u00edho popisu pam\u011b\u0165ov\u00fdch, aritmetick\u00fdch a \u0159\u00edd\u00edc\u00edch obvod\u016f","text":""},{"location":"HSC_17/#zakladni-datove-typy","title":"Z\u00e1kladn\u00ed datov\u00e9 typy","text":"<p>Ur\u010duje form\u00e1t dat, kter\u00fd m\u016f\u017ee dan\u00fd port, sign\u00e1l, prom\u011bnn\u00e1 \u010di konstanta p\u0159en\u00e1\u0161et nebo s nimi pracovat.</p>"},{"location":"HSC_17/#ciselne-numericke","title":"\u010c\u00edseln\u00e9 (numerick\u00e9)","text":"<ul> <li>Integrer \u2013 celo\u010d\u00edseln\u00fd   (-10)</li> <li>Natural &lt;0, integer\u2019max&gt;   (5)</li> <li>Positive &lt;1, integer\u2019max&gt;    (5)</li> <li> <p>Real \u2013 nesyntetizovateln\u00e9    (10.1)</p> </li> <li> <p>Od z\u00e1kladn\u00ed numerick\u00fdch lze odvozovat vlastn\u00ed datov\u00e9 typy \u2013 p\u0159\u00edkaz TYPE</p> <ul> <li>S k\u00f3dov\u00e1n\u00edm definovan\u00fdm rozsahem </li> <li>S k\u00f3dov\u00e1n\u00edm definovan\u00fdm typem </li> <li>V\u00fd\u010dtov\u00fd typ (p\u0159. Std_logic) </li> </ul> </li> </ul>"},{"location":"HSC_17/#logicke-vyctove","title":"Logick\u00e9 (v\u00fd\u010dtov\u00e9)","text":"<ul> <li>Bit \u2013 \u20180\u2018,\u20181\u2018</li> <li>boolean \u2013 true, false</li> </ul>"},{"location":"HSC_17/#znakovevyctove","title":"Znakov\u00e9(v\u00fd\u010dtov\u00e9)","text":"<p>character, string</p>"},{"location":"HSC_17/#fyzikalni","title":"Fyzik\u00e1ln\u00ed","text":"<p>time (10 ns)</p> <p>Signed a Unsigned \u2013 ch\u00e1p\u00e1ny jako \u010d\u00edsla ve 2 soustav\u011b, pro pr\u00e1ci s\u00a0aritm. oper\u00e1tory</p>"},{"location":"HSC_17/#slozene-datove-typy","title":"Slo\u017een\u00e9 datov\u00e9 typy","text":"<p>V\u00edce element\u016f v jednom objektu </p>"},{"location":"HSC_17/#pole","title":"Pole","text":"<ul> <li>Homogenn\u00ed (jsou v\u00a0n\u011bm prvky se stejn\u00fdm datov\u00fdm typem)</li> <li>Indexov\u00e1n\u00ed (), deklarace p\u0159\u00edkazem RANGE</li> <li>Speci\u00e1ln\u00ed p\u0159\u00edpad \u2013 std_logic_vector</li> </ul>"},{"location":"HSC_17/#zaznam-record","title":"Z\u00e1znam (record)","text":"<ul> <li>Heterogenn\u00ed</li> <li>V\u00fdb\u011br pomoc\u00ed te\u010dky</li> </ul>"},{"location":"HSC_17/#interfacevhdl-2019","title":"Interface(VHDL 2019)","text":"<ul> <li>Deklarace jako port, p\u0159id\u00e1v\u00e1 view (deklarace sm\u011bru toku sign\u00e1lu)</li> <li>Nutn\u00e9 alespo\u0148 2 view (Master a Slave)</li> </ul>"},{"location":"HSC_17/#operatory","title":"Oper\u00e1tory","text":"<p>Logick\u00e9 (and, or, nand, nor, xor, xnor, not) Rela\u010dn\u00ed (=, /=, &lt;, &gt;, =&gt;, &gt;=) posuv a rotace (sll, srl, sla, sra, rol, ror) aritmetick\u00e9(+, -, , /, mod(modulus), rem(remainder),abs(abs hodnota),*(exponent)) slu\u010dov\u00e1n\u00ed(&amp;)</p>"},{"location":"HSC_17/#datove-objekty","title":"Datov\u00e9 objekty","text":"<ul> <li>Konstanty \u2013 nem\u011bn\u00ed se, deklarace v\u00a0entit\u011b, architektu\u0159e, procesu, funkci, procedu\u0159e</li> <li>Prom\u011bnn\u00e9 \u2013 pomocn\u00e9, nelze deklarovat v\u00a0entit\u011b a arch. \u2013 nelze pou\u017e\u00edt pro porty</li> <li>Sign\u00e1ly/porty \u2013 fyzicky p\u0159\u00edtomn\u00e9, deklarace pouze na za\u010d\u00e1tku architektury/entity</li> </ul> <p>Datov\u00fd objekt deklarovan\u00fd: - v procesu - viditeln\u00fd pouze uvnit\u0159 tohoto procesu; - v\u00a0architektu\u0159e - viditeln\u00fd ve v\u0161ech p\u0159\u00edkazech t\u00e9to architektury; - v entit\u011b - viditeln\u00fd ve v\u0161ech architektur\u00e1ch p\u0159id\u011blen\u00fdch t\u00e9to entit\u011b; - v \u201epackage\u201c je viditeln\u00fd ve v\u0161ech n\u00e1vrz\u00edch u\u017e\u00edvaj\u00edc\u00edch tohoto \u201epackage\u201c.</p>"},{"location":"HSC_17/#atributy","title":"Atributy","text":"<p>speci\u00e1ln\u00ed funkce, kde jsou informace jejich nositel\u00edch(typy,sign\u00e1ly,prom\u011bnn\u00e9,pole..)</p>"},{"location":"HSC_17/#vhdl-pro-syntezu","title":"VHDL pro synt\u00e9zu","text":"<p>P\u016fvodn\u00ed z\u00e1m\u011br VHDL je pro simulaci \u2260 to nen\u00ed stejn\u00e9 jako pro synt\u00e9zu - Nelze syntetizovat v\u0161e (shared variable, loop, while) - R\u016fzn\u00e1 podpora v\u00a0r\u016fzn\u00fdch EDA prost\u0159ed\u00edch - VHDL pro ASIC \u2260 VHDL pro FPGA</p>"},{"location":"HSC_17/#doporuceni-pro-efentivni-kod","title":"Doporu\u010den\u00ed pro efentivn\u00ed k\u00f3d","text":"<p>Nepou\u017e\u00edvat kl\u00ed\u010dov\u00e1 slova z\u00a0Verilogu ve VHDL (module,reg,wire) Nepou\u017e\u00edvat rezervovan\u00e1 slova (CLB,CLK,GND,A4,Slice) Stejn\u00e9 jm\u00e9no entity a souboru.  Nepsat zkr\u00e1cen\u00e9 port maps (p\u0159idr\u00e1tov\u00e1n\u00ed sign\u00e1l\u016f na porty \u2013 t\u0159eba p\u0159i vlo\u017een\u00ed komponentu), nezkracovat v\u00fdrazy, pou\u017e\u00edvat konstanty Pou\u017e\u00edvat ide\u00e1ln\u011b jedny hodiny, synchronn\u00ed logiku (set a reset), std_logic_vectory Pou\u017e\u00edvat std_logic_vectory</p> <p>V\u011btven\u00ed programu - Definice v\u0161ech v\u011btv\u00ed (o\u0161et\u0159en\u00ed ne\u017e\u00e1douc\u00edho stavu) \u2013p\u0159. pou\u017eit\u00ed others u case - Nepou\u017e\u00edvat ve v\u011btv\u00edch aritmetiku \u2013 co nejjednodu\u0161\u0161\u00ed podm\u00ednky - VHDL pro ASIC \u2260 VHDL pro FPGA</p> <p>Aritmetika \u2013 z\u00e1vorkovat, povolit sd\u00edlen\u00ed zdroj\u016f(men\u0161\u00ed mno\u017estv\u00ed logiky, nutn\u00e9 ni\u017e\u0161\u00ed clk) Pou\u017e\u00edvat Pipelining \u2013 aby byly validn\u00ed data v\u010das na sv\u00e9m m\u00edst\u011b, umo\u017enuje zv\u00fd\u0161it hodiny. </p> <p></p> <p>Zapnout retiming(synch.) registr\u016f</p> <p></p> <p>Pou\u017e\u00edvat registry v\u00a0m\u00edst\u011b pot\u0159eby \u010c\u00e1st LUT lze vyu\u017e\u00edt jako posuv reg.</p> <p>Synchronn\u00ed n\u00e1vrh - Na clk vstupy prvk\u016f je p\u0159iveden pouze clk, bez p\u0159\u00eddavn\u00e9 logiky - Pou\u017e\u00edvat jen FF (hranov\u00e9 k.o.) - Nepou\u017e\u00edvat zp\u011btn\u00e9 vazby na kombina\u010dn\u00ed logice - Potenci\u00e1ln\u011b asynchronn\u00ed sign\u00e1ly synchronizovat \u2013 synchroniz\u00e1tory \u2013 D k.o.     - P\u0159echod mezi \u010dasov\u00fdmi dom\u00e9nami, mo\u017en\u00e1 nekoherence dat, kr\u00e1tk\u00e9 pulzy v sign\u00e1lu</p> <p>Pam\u011bti \u2013 co lze na jejich realizaci vyu\u017e\u00edt - Registry - nejrychlej\u0161\u00ed, ale m\u00e1l\u00fd po\u010det - Distribuovan\u00e1 pam\u011b\u0165 (LUT \u2013 mal\u00e9 FIFO) - men\u0161\u00ed pam\u011bti \u2013 p\u0159\u00edmo v m\u00edst\u011b pot\u0159eby \u2013 rychlej\u0161\u00ed ale je n\u00e1ro\u010dn\u011bj\u0161\u00ed na propojovac\u00ed s\u00edt\u011b. - Blokov\u00e1 RAM - speci\u00e1ln\u00ed, pam\u011b\u0165ov\u00e9 bloky v FPGA, snadno konfigurovateln\u00e9 a efektivn\u00ed z hlediska n\u00e1rok\u016f na plochu \u010dipu - Lze je vytv\u00e1\u0159et     - Z\u00a0kodu pomoc\u00ed synt\u00e9zy     - Pomoc\u00ed maker (XPM \u2013 knihovna s\u00a0pam\u011btma)     - Pomoc\u00ed IP - nep\u0159enositeln\u00e9</p> <p>Stavov\u00e9 automaty \u2013 co lze na jejich realizaci vyu\u017e\u00edt - Pou\u017e\u00edv\u00e1n\u00ed stavov\u00fdch prom\u011bnn\u00fdch typu enumerated (p\u0159ehledn\u00e9) - Nepou\u017e\u00edvat u dataflow(sou\u010dasn\u00e9 p\u0159\u00edkazy)  - O\u0161et\u0159it nevyu\u017eit\u00e9 stavy \u2013 n\u00e1r\u016fst logiky - Realizace pomoc\u00ed 1,2,nebo3 proces\u016f (pam\u011b\u0165, p\u0159echodov\u00e1 fce, v\u00fdstupn\u00ed fce) - Lep\u0161\u00ed pou\u017e\u00edt MOORE (Mealy m\u00e1 slo\u017eit\u011bj\u0161\u00ed p\u0159echodovou fci a v\u00fdstup z\u00e1vis\u00ed i na vstupu \u2013 \u0161patn\u011b predikovateln\u00e9)</p> <p></p>"},{"location":"HSC_18/","title":"FPGA: Struktura a p\u0159ehled zdroj\u016f SLICE, vytv\u00e1\u0159en\u00ed multiplexor\u016f a re\u017eimy LUT","text":""},{"location":"HSC_18/#fpga-field-programmable-gate-array","title":"FPGA (Field Programmable Gate Array)","text":"<p>FPGA je pole konfigurovateln\u00fdch logick\u00fdch blok\u016f propojen\u00fdch programovateln\u00fdmi spoji. N\u00e1vrh logiky se po synt\u00e9ze a mapov\u00e1n\u00ed zap\u00ed\u0161e do konfigurace, kter\u00e1 \u201ep\u0159ekabeluje\u201c spojen\u00ed a nastaven\u00ed zdroj\u016f uvnit\u0159 \u010dipu. Z\u00e1kladn\u00ed stavebn\u00ed jednotku tvo\u0159\u00ed CLB (Configurable Logic Block), jen\u017e se skl\u00e1d\u00e1 z dvojice SLICE, p\u0159i\u010dem\u017e ka\u017ed\u00fd SLICE obsahuje kombinaci LUT\u016f, registr\u016f pro sekven\u010dn\u00ed logiku, MUX\u016f a rychl\u00fdch \u0159et\u011bzc\u016f pro aritmetiku. Tato organizace umo\u017e\u0148uje efektivn\u00ed realizaci kombin\u00e1torick\u00e9 i sekven\u010dn\u00ed logiky, multiplexor\u016f a aritmetick\u00fdch operac\u00ed p\u0159\u00edmo v textu HDL, kter\u00e9 n\u00e1stroje pak namapuj\u00ed na konkr\u00e9tn\u00ed zdroje SLICE. Zdroje uvnit\u0159 SLICE nejsou n\u00e1hodn\u00e9, jsou pevn\u011b dan\u00e9 k\u0159em\u00edkem, ale my je konfigurac\u00ed m\u011bn\u00edme na to, co pot\u0159ebujeme (\u010d\u00edta\u010d, hradlo, pam\u011b\u0165)</p>"},{"location":"HSC_18/#struktura-slice-a-jeho-zdroju","title":"Struktura SLICE a jeho zdroj\u016f","text":"<p>Uvnit\u0159 ka\u017ed\u00e9ho SLICE najdeme \u010dty\u0159i hlavn\u00ed typy prost\u0159edk\u016f:</p> <ul> <li>Look-Up Tables (LUT):  Vyu\u017e\u00edv\u00e1 se \u010dty\u0159 LUT\u016f se \u0161esti vstupy. LUT funguje jako pravdivostn\u00ed tabulka: pro vstup\u016f uchov\u00e1v\u00e1 konfigura\u010dn\u00edch bit\u016f a podle aktu\u00e1ln\u00edch hodnot vstup\u016f vybere jeden bit jako v\u00fdstup. Prakticky je proto LUT ekvivalentem  multiplexoru, kde \u201edatov\u00e9\u201c vstupy tvo\u0159\u00ed konfigura\u010dn\u00ed pam\u011b\u0165 LUT a \u201eadresu\u201c p\u0159edstavuj\u00ed logick\u00e9 vstupy u\u017eivatelsk\u00e9ho obvodu. Obsah LUT se nastavuje p\u0159i konfiguraci FPGA a n\u00e1sledn\u011b se \u010dte asynchronn\u011b b\u011bhem b\u011bhu. Tato implementace umo\u017e\u0148uje v jedn\u00e9 LUT6 realizovat \u0161irokou \u0161k\u00e1lu booleovsk\u00fdch funkc\u00ed bez pot\u0159eby hradlov\u00e9 s\u00edt\u011b, jin\u00fdmi slovy to, co se d\u00e1 popsat logickou funkc\u00ed o 6 prom\u011bnn\u00fdch, se vejde do jedn\u00e9 jedin\u00e9 LUT. Jedn\u00e1 se tedy o z\u00e1kladn\u00ed prvek pro kombinatorickou logiku (realizace funkc\u00ed p\u0159es pam\u011b\u0165ovou tabulku).</li> <li>Klopn\u00e9 obvody (Flip-Flops): Za ka\u017ed\u00fdm LUTem n\u00e1sleduj\u00ed pam\u011b\u0165ov\u00e9 prvky. Obvykle je jich v jednom SLICE osm (dva pro ka\u017ed\u00fd LUT). Vyu\u017e\u00edvaj\u00ed se klopn\u00e9 obvody typu D a slou\u017e\u00ed k uchov\u00e1n\u00ed stavu, tedy k vytv\u00e1\u0159en\u00ed sekven\u010dn\u00ed logiky (registry, \u010d\u00edta\u010de, stavov\u00e9 automaty). Princip jejich \u010dinnosti je takov\u00fd, \u017ee p\u0159i p\u0159\u00edchodu hodinov\u00e9ho impulsu se na v\u00fdstup p\u0159enese hodnota vstupu a z\u016fst\u00e1v\u00e1 tam, dokud nep\u0159ijde dal\u0161\u00ed hodinov\u00fd impuls. Jedn\u00e1 se tedy o z\u00e1kladn\u00ed prvek pro sekven\u010dn\u00ed logiku (uchov\u00e1n\u00ed stavu pomoc\u00ed klopn\u00e9ho obvodu).</li> <li>Multiplexory (Wide Muxes): Krom\u011b LUT jsou zde i specializovan\u00e9 hardwarov\u00e9 multiplexory (F7AMUX, F7BMUX, F8MUX). Ty slou\u017e\u00ed k tomu, aby se v\u00fdstupy z v\u00edce LUT\u016f daly spojit dohromady a vytvo\u0159ily slo\u017eit\u011bj\u0161\u00ed logick\u00e9 funkce.</li> <li>\u0158et\u011bzec pro p\u0159enos (Carry Logic): Jedn\u00e1 se o vyhrazenou hardwarovou cestu pro rychlou aritmetiku. Jde o podporu p\u0159i s\u010d\u00edt\u00e1n\u00ed a ode\u010d\u00edt\u00e1n\u00ed, jeliko\u017e p\u0159enos (carry) z jednoho bitu do druh\u00e9ho by za norm\u00e1ln\u00edch okolnost\u00ed \u0161el p\u0159es lok\u00e1ln\u00ed routing\u00a0LUTu, co\u017e je ale velice pomal\u00e9. Proto se vyu\u017e\u00edv\u00e1 vyhrazen\u00e1 cesta, kter\u00e1 je daleko rychlej\u0161\u00ed. D\u00edky tomu jsou FPGA efektivn\u00ed v matematick\u00fdch operac\u00edch. Tato cesta vede v ka\u017ed\u00e9m sloupci SLICE a m\u00e1 line\u00e1rn\u00ed zpo\u017ed\u011bn\u00ed dle sv\u00e9 d\u00e9lky.</li> </ul> <p>Existuj\u00ed dva typy SLICE:</p> <ul> <li>SLICEL (Logic): Obsahuje pouze logiku. Um\u00ed jen kombina\u010dn\u00ed funkce a aritmetiku.</li> <li>SLICEM (Memory): Je \"chyt\u0159ej\u0161\u00ed\". Jeho LUTy dok\u00e1\u017e\u00ed fungovat i jako distribuovan\u00e1 pam\u011b\u0165 (RAM) nebo posuvn\u00e9 registry (Shift Registers).</li> </ul>"},{"location":"HSC_18/#vytvareni-multiplexoru","title":"Vytv\u00e1\u0159en\u00ed multiplexor\u016f","text":"<p>Multiplexor je obvod, kter\u00fd vyb\u00edr\u00e1 jeden z mnoha vstup\u016f a pos\u00edl\u00e1 ho na v\u00fdstup. V FPGA se multiplexory vytv\u00e1\u0159ej\u00ed n\u011bkolika zp\u016fsoby podle toho, jak jsou velk\u00e9 (kolik maj\u00ed vstup\u016f): - Mal\u00e9 multiplexory (do 4:1): Ty se realizuj\u00ed uvnit\u0159 jedn\u00e9 LUT. Proto\u017ee 6-vstupov\u00e1 LUT m\u00e1 dostatek vstup\u016f (adres), dok\u00e1\u017ee se chovat jako multiplexor 4:1. Dva adresn\u00ed vstupy LUT slou\u017e\u00ed jako v\u00fdb\u011brov\u00e9 sign\u00e1ly (Select) a zbyl\u00e9 \u010dty\u0159i vstupy jako data. - St\u0159edn\u00ed multiplexory (8:1 a 16:1): Zde u\u017e jedna LUT nesta\u010d\u00ed. Mus\u00edme spojit v\u00fdstupy z v\u00edce LUT\u016f dohromady. K tomu FPGA pou\u017e\u00edv\u00e1 zm\u00edn\u011bn\u00e9 vyhrazen\u00e9 zdroje ve SLICE \u2013 F7 A(B) a F8 MUXy.     - MUX 8:1: Spoj\u00ed se dva LUTy (ka\u017ed\u00fd \u0159e\u0161\u00ed \u010d\u00e1st) a jejich v\u00fdstup se spoj\u00ed s F7A(B)MUX. To se d\u011bje v r\u00e1mci jednoho SLICE.     - MUX 16:1: Spoj\u00ed se \u010dty\u0159i LUTy, projdou p\u0159es dva F7A(B)MUXy a v\u00fdsledek se spoj\u00ed v F8MUX. I toto se vejde do jednoho SLICE. - Velk\u00e9 multiplexory (32:1 a v\u00edce): Ty u\u017e se nevejdou do jednoho SLICE. Mus\u00ed se propojit v\u00edce SLICE dohromady. Pro tyto velk\u00e9 multiplexory m\u016f\u017ee FPGA vyu\u017e\u00edt i Carry Logic (\u0159et\u011bzec pro p\u0159enos), kter\u00fd se d\u00e1 \"zneu\u017e\u00edt\" pro v\u00fdb\u011br sign\u00e1lu, proto\u017ee je velmi rychl\u00fd a propojuje SLICE vertik\u00e1ln\u011b pod sebou.</p>"},{"location":"HSC_18/#rezimy-lut","title":"Re\u017eimy LUT","text":"<p>V z\u00e1vislosti na tom, zda je LUT v SLICEL nebo SLICEM, m\u016f\u017ee pracovat v r\u016fzn\u00fdch re\u017eimech:</p> <ol> <li>Gener\u00e1torick\u00fd re\u017eim LUTu vyu\u017e\u00edv\u00e1 skute\u010dnost, \u017ee LUT je mal\u00e1 pam\u011b\u0165, kterou lze naprogramovat libovoln\u00fdmi hodnotami, a pokud se jej\u00ed vstupy \u0159\u00edd\u00ed nap\u0159\u00edklad \u010d\u00edta\u010dem nebo posuvn\u00fdm registrem, za\u010dne na v\u00fdstupu postupn\u011b generovat p\u0159edem definovanou sekvenci, t\u00edm se z n\u00ed st\u00e1v\u00e1 zdroj sign\u00e1lu. V praxi tak LUT m\u016f\u017ee fungovat jako gener\u00e1tor konstantn\u00edch hodnot, periodick\u00fdch pr\u016fb\u011bh\u016f (nap\u0159. sinusov\u00e1 tabulka pro DSP), pseudon\u00e1hodn\u00fdch sekvenc\u00ed nebo jako mal\u00e1 ROM, a d\u00edky tomu se uplat\u0148uje p\u0159i tvorb\u011b modulac\u00ed, filtr\u016f \u010di jednoduch\u00fdch pam\u011b\u0165ov\u00fdch struktur p\u0159\u00edmo uvnit\u0159 FPGA.</li> <li>Logick\u00fd re\u017eim (ROM): Toto je z\u00e1kladn\u00ed re\u017eim dostupn\u00fd ve v\u0161ech SLICE. LUT funguje jako pam\u011b\u0165 ROM (Read-Only Memory). My do n\u00ed p\u0159i konfiguraci FPGA zap\u00ed\u0161eme pravdivostn\u00ed tabulku (nuly a jedni\u010dky). Vstupy LUT pak funguj\u00ed jako adresa, kter\u00e1 vybere konkr\u00e9tn\u00ed nulu nebo jedni\u010dku na v\u00fdstup. T\u00edm se realizuje jak\u00e1koliv kombina\u010dn\u00ed logika (AND, OR, XOR atd.).</li> <li>Re\u017eim distribuovan\u00e9 pam\u011bti (Distributed RAM): Tento re\u017eim je dostupn\u00fd pouze ve SLICEM. Zde se LUT chov\u00e1 jako mal\u00e1 RAM pam\u011b\u0165, do kter\u00e9 m\u016f\u017eeme za b\u011bhu zapisovat data (Write Enable, Data In, Address). M\u016f\u017eeme tak vytvo\u0159it malou, velmi rychlou pam\u011b\u0165 p\u0159\u00edmo v logice, ani\u017e bychom museli pou\u017e\u00edvat velk\u00e9 blokov\u00e9 pam\u011bti (Block RAM).</li> <li>Re\u017eim posuvn\u00e9ho registru (SRL - Shift Register LUT): Op\u011bt dostupn\u00e9 pouze ve SLICEM. V tomto re\u017eimu se vnit\u0159n\u00ed pam\u011b\u0165ov\u00e9 bu\u0148ky LUT propoj\u00ed do kask\u00e1dy. S ka\u017ed\u00fdm hodinov\u00fdm taktem se data posunou o jednu bu\u0148ku d\u00e1l. To je extr\u00e9mn\u011b v\u00fdhodn\u00e9 pro vytv\u00e1\u0159en\u00ed zpo\u017ed\u011bn\u00ed (delay lines). M\u00edsto toho, abychom spot\u0159ebovali 32 klopn\u00fdch obvod\u016f pro 32-bitov\u00e9 zpo\u017ed\u011bn\u00ed, pou\u017eijeme pouze jednu LUT v re\u017eimu SRL32. To \u0161et\u0159\u00ed obrovsk\u00e9 mno\u017estv\u00ed m\u00edsta na \u010dipu.</li> </ol>"},{"location":"HSC_18/#schama-lutu","title":"Sch\u00e1ma LUTu","text":""},{"location":"HSC_18/#schema-slice","title":"Sch\u00e9ma SLICE","text":""},{"location":"HSC_18/#schema-shift-register","title":"Sch\u00e9ma Shift Register","text":""},{"location":"HSC_18/#schema-carry-logic","title":"Sch\u00e9ma Carry Logic","text":""},{"location":"HSC_19/","title":"FPGA - Aritmetick\u00e9 obvody \u2013 realizace s\u010d\u00edta\u010dek, n\u00e1sobi\u010dky, specializovan\u00e9 obvody, podpora datov\u00fdch typ\u016f","text":"<p>V prost\u0159ed\u00ed FPGA se aritmetick\u00e9 operace realizuj\u00ed dv\u011bma z\u00e1kladn\u00edmi zp\u016fsoby:</p> <ul> <li>V obecn\u00e9 logice: Vyu\u017eit\u00ed LUT (Look-Up Tables) a propojovac\u00ed matice.</li> <li>V dedikovan\u00fdch bloc\u00edch: Vyu\u017eit\u00ed specializovan\u00fdch DSP (Digital Signal Processing) blok\u016f. Jsou to hotov\u00e9, v k\u0159em\u00edku vyleptan\u00e9 obvody, kter\u00e9 nejdou p\u0159eprogramovat na nic jin\u00e9ho, ale svou pr\u00e1ci d\u011blaj\u00ed dokonale. Pou\u017eit\u00ed DSP bloku \u0161et\u0159\u00ed stovky LUT a umo\u017e\u0148uje dosahovat frekvenc\u00ed v \u0159\u00e1dech stovek MHz, kter\u00fdch by b\u011b\u017en\u00e1 logika nikdy nedos\u00e1hla.</li> </ul>"},{"location":"HSC_19/#realizace-scitacek","title":"Realizace s\u010d\u00edta\u010dek","text":"<p>S\u010d\u00edt\u00e1n\u00ed je nejz\u00e1kladn\u011bj\u0161\u00ed operac\u00ed. V FPGA se s\u010d\u00edta\u010dky optimalizuj\u00ed s d\u016frazem na minimalizaci zpo\u017ed\u011bn\u00ed vznikaj\u00edc\u00edho \u0161\u00ed\u0159en\u00edm p\u0159enosu (carry propagation). Polovi\u010dn\u00ed s\u010d\u00edta\u010dka (half-adder) realizuje sou\u010det dvou bit\u016f bez vstupn\u00edho p\u0159enosu Cin, zat\u00edmco \u00fapln\u00e1 s\u010d\u00edta\u010dka (full-adder) zahrnuje i vstupn\u00ed p\u0159enos. \u00dapln\u00e1 s\u010d\u00edta\u010dka tedy s\u010d\u00edt\u00e1 t\u0159i bity: vstup A, vstup B a vstupn\u00ed p\u0159enos Cin. V\u00fdstupem je sou\u010det S\u00a0a v\u00fdstupn\u00ed p\u0159enos Cout.  Pokud bychom zapojili n\u011bkolik \u00fapln\u00fdch s\u010d\u00edta\u010dek za sebou pouze pomoc\u00ed LUT, vznikl by Ripple Carry Adder. Zpo\u017ed\u011bn\u00ed by rostlo line\u00e1rn\u011b s \u0161\u00ed\u0159kou sb\u011brnice N, proto\u017ee ka\u017ed\u00fd bit mus\u00ed \u010dekat na Cout z p\u0159edchoz\u00edho bitu (p\u0159enos bitu z nejni\u017e\u0161\u00edho \u0159\u00e1du do nejvy\u0161\u0161\u00edho). To je pro FPGA neefektivn\u00ed. Proto se p\u0159istupuje k\u00a0optimalizaci pomoc\u00ed Carry Chains (Carry logic). Tato logika pro p\u0159enos vyu\u017e\u00edv\u00e1 speci\u00e1ln\u00ed hardwarovou cestu (nap\u0159. CARRY4 nebo CARRY8) vertik\u00e1ln\u011b um\u00edst\u011bnou p\u0159\u00edmo vedle LUT v ka\u017ed\u00e9m logick\u00e9m bloku SLICE. Obch\u00e1z\u00ed tak pomalou propojovac\u00ed matici a d\u00edky tomu umo\u017e\u0148uje realizovat velmi rychl\u00e9 s\u010d\u00edta\u010dky i pro velk\u00fd po\u010det bit\u016f (nap\u0159. 64-bit adder) s minim\u00e1ln\u00edm zpo\u017ed\u011bn\u00edm. Princip s\u010d\u00edt\u00e1n\u00ed funguje tak, \u017ee sou\u010det je realizov\u00e1n pomoc\u00ed operace XOR (0+0=0, 0+1=1, 1+0=1, 1+1=0), p\u0159i\u010dem\u017e ale FPGA nenastavuje hradlo XOR. M\u00edsto toho se do LUT nahraje pravdivostn\u00ed tabulka pro XOR. Kdy\u017e p\u0159ijdou vstupy A a B, LUT se pod\u00edv\u00e1 na odpov\u00eddaj\u00edc\u00ed adresu v pam\u011bti a vr\u00e1t\u00ed v\u00fdsledek, co\u017e je rychl\u00e9 a nenast\u00e1v\u00e1 \u017e\u00e1dn\u00fd probl\u00e9m. Kdyby se ale p\u0159enos po\u010d\u00edtal tak\u00e9 v LUTu a pos\u00edlal se do dal\u0161\u00edho LUTu p\u0159es b\u011b\u017enou propojovac\u00ed s\u00ed\u0165, bylo by to pomal\u00e9 kv\u016fli zpo\u017ed\u011bn\u00ed na vodi\u010d\u00edch. Proto m\u00e1 ka\u017ed\u00fd logick\u00fd blok vedle sebe Carry Logic:</p> <ul> <li>Hardwarovou cestu: Je to fyzick\u00fd vodi\u010d, kter\u00fd vede svisle p\u0159es cel\u00fd \u010dip, p\u0159\u00edmo od jedn\u00e9 bu\u0148ky ke druh\u00e9, bez pr\u016fchodu obecnou matic\u00ed.</li> <li>Multiplexory: Fungov\u00e1n\u00ed je zalo\u017eeno na n\u00e1sleduj\u00edc\u00ed logice:<ul> <li>Pokud A \u2260 B (tj. 1+0 nebo 0+1): P\u0159enos se propaguje, co\u017e je situace, kdy s\u010d\u00edtac\u00ed obvod na dan\u00e9 pozici s\u00e1m o sob\u011b nov\u00fd p\u0159enos nevytvo\u0159\u00ed, ale pokud mu n\u011bjak\u00fd p\u0159enos p\u0159ijde z ni\u017e\u0161\u00edho \u0159\u00e1du, tak ho po\u0161le d\u00e1l do vy\u0161\u0161\u00edho \u0159\u00e1du.</li> <li>Pokud A = 0 a B = 0:  P\u0159enos se zastavuje. V\u00fdsledkem sou\u010dtu je 0 a \u017e\u00e1dn\u00fd dal\u0161\u00ed p\u0159enos se nep\u0159ed\u00e1v\u00e1. Ale v\u00a0p\u0159\u00edpad\u011b, \u017ee doraz\u00ed 1 v\u00a0p\u0159enosu z\u00a0ni\u017e\u0161\u00edho \u0159\u00e1du, tato 1 se p\u0159i\u010dte k\u00a0v\u00fdsledku, kter\u00fd se zm\u011bn\u00ed z\u00a00 na 1 a tak se p\u0159ijat\u00e1 1 z\u00a0p\u0159enosu spot\u0159ebuje a kv\u016fli tomu nedoch\u00e1z\u00ed k\u00a0p\u0159ed\u00e1v\u00e1n\u00ed p\u0159enosu do vy\u0161\u0161\u00edho \u0159\u00e1du.</li> <li>Pokud A = 1 a B = 1: P\u0159enos se generuje. S\u010d\u00edta\u010dka vytvo\u0159\u00ed nov\u00fd p\u0159enos bez ohledu na to, co se d\u011bje v p\u0159edchoz\u00edm \u0159\u00e1du.</li> </ul> </li> </ul> <p>Samotn\u00fd p\u0159enos (carry bit) pak neproch\u00e1z\u00ed skrz pomal\u00e9 LUT, ale pos\u00edl\u00e1 se vyhrazenou vertik\u00e1ln\u00ed cestou (Carry Chain) skrz cel\u00fd sloupec SLICE blok\u016f. D\u00edky tomu jsou i \u0161irok\u00e9 s\u010d\u00edta\u010dky v FPGA extr\u00e9mn\u011b rychl\u00e9 a zab\u00edraj\u00ed minimum logick\u00fdch prost\u0159edk\u016f.</p>"},{"location":"HSC_19/#realizace-nasobicek","title":"Realizace n\u00e1sobi\u010dek","text":"<p>N\u00e1soben\u00ed je mnohem slo\u017eit\u011bj\u0161\u00ed operace ne\u017e s\u010d\u00edt\u00e1n\u00ed. V FPGA existuj\u00ed dva hlavn\u00ed zp\u016fsoby, jak n\u00e1sobi\u010dku vytvo\u0159it: Softwarov\u00e1 realizace (pomoc\u00ed obecn\u00e9 logiky LUT) a Hardwarov\u00e1 realizace (pomoc\u00ed dedikovan\u00fdch DSP blok\u016f).</p>"},{"location":"HSC_19/#softwarova-realizace","title":"Softwarov\u00e1 realizace","text":"<p>Pokud pot\u0159ebujeme vyn\u00e1sobit mal\u00e1 \u010d\u00edsla (nap\u0159. 4x4 bity) nebo FPGA nem\u00e1 voln\u00e9 DSP bloky, syntez\u00e1tor postav\u00ed n\u00e1sobi\u010dku z LUT tabulek a s\u010d\u00edta\u010dek. Funguje to na principu klasick\u00e9ho n\u00e1soben\u00ed pod sebou, jen bin\u00e1rn\u011b (Shift &amp; Add):</p> <ul> <li>Vytvo\u0159en\u00ed d\u00edl\u010d\u00edch sou\u010din\u016f: Ka\u017ed\u00fd bit n\u00e1sobitele se logicky vyn\u00e1sob\u00ed (operace AND) s cel\u00fdm n\u00e1sobencem.<ul> <li>Pokud je bit 1, op\u00ed\u0161e se \u010d\u00edslo.</li> <li>Pokud je bit 0, jsou to sam\u00e9 nuly.</li> </ul> </li> <li>Posun (Shift): Ka\u017ed\u00fd dal\u0161\u00ed \u0159\u00e1dek se posune o jeden bit doleva.</li> <li>Se\u010dten\u00ed (Add): V\u0161echny tyto \u0159\u00e1dky se mus\u00ed se\u010d\u00edst.</li> </ul> <p>D\u016fvodem pro\u010d se takto po\u010d\u00edtaj\u00ed pouze velmi mal\u00e1 \u010d\u00edsla a nebo se takto prov\u00e1d\u00ed pouze n\u00e1soben\u00ed konstantou je ten, \u017ee doch\u00e1z\u00ed ke kvadratick\u00e9mu r\u016fstu n\u00e1ro\u010dnosti, kde pro N-bitov\u00e9 \u010d\u00edslo je pot\u0159eba N2 logick\u00fdch prvk\u016f. Dal\u0161\u00edm d\u016fvodem je, \u017ee takov\u00e9to s\u010d\u00edt\u00e1n\u00ed je velmi pomal\u00e9 a u 32-bitov\u00e9ho n\u00e1soben\u00ed vznikne 32 \u0159\u00e1dk\u016f, kter\u00e9 se mus\u00ed se\u010d\u00edst, p\u0159i\u010dem\u017e i s rychl\u00fdmi Carry Chains vznik\u00e1 obrovsk\u00fd strom s\u010d\u00edta\u010dek, kter\u00fd m\u00e1 velk\u00e9 zpo\u017ed\u011bn\u00ed. </p>"},{"location":"HSC_19/#hardwarova-realizace","title":"Hardwarov\u00e1 realizace","text":"<p>Modern\u00ed FPGA maj\u00ed v k\u0159em\u00edku vyleptan\u00e9 hotov\u00e9 obvody tzv. DSP bloky. Ty nepo\u010d\u00edtaj\u00ed metodou \"Shift &amp; Add\" jako v LUTu, ale pou\u017e\u00edvaj\u00ed pokro\u010dil\u00e9 architektury a n\u00e1soben\u00ed bin\u00e1rn\u00edch \u010d\u00edsel prov\u00e1d\u011bj\u00ed p\u0159\u00edmo. Tyto bloky jsou \u0159\u00e1dov\u011b rychlej\u0161\u00ed a energeticky \u00fasporn\u011bj\u0161\u00ed ne\u017e \u0159e\u0161en\u00ed v LUT. Obvykle maj\u00ed fixn\u00ed \u0161\u00ed\u0159ku (nap\u0159. 25x18 bit\u016f), ale lze je kask\u00e1dn\u011b spojovat pro n\u00e1soben\u00ed v\u011bt\u0161\u00edch \u010d\u00edsel.</p>"},{"location":"HSC_19/#specializovane-obvody","title":"Specializovan\u00e9 obvody","text":"<p>Mezi specializovan\u00e9 obvody lze za\u0159adit: </p> <ul> <li>DSP bloky</li> <li>Pam\u011b\u0165ov\u00e9 bloky</li> <li>Hodinov\u00e9 rozvody</li> </ul>"},{"location":"HSC_19/#dsp-blok","title":"DSP blok:","text":"<p>V\u00fd\u0161e zm\u00edn\u011bn\u00e9 hardwarov\u00e9 n\u00e1sobi\u010dky jsou dnes t\u00e9m\u011b\u0159 v\u017edy sou\u010d\u00e1st\u00ed komplexn\u011bj\u0161\u00edch jednotek zvan\u00fdch DSP bloky (nap\u0159. DSP48E). Tyto bloky jsou slo\u017eeny z n\u00e1sobi\u010dek, s\u010d\u00edta\u010dek a registr\u016f a navr\u017eeny pro operace typu MAC (Multiply-Accumulate), kter\u00e9 jsou kl\u00ed\u010dov\u00e9 pro digit\u00e1ln\u00ed zpracov\u00e1n\u00ed sign\u00e1lu (filtry FIR, IIR, FFT). </p> <p></p> <p>DSP blok DSP48E nab\u00edz\u00ed tyto z\u00e1kladn\u00ed funkce:</p> <ul> <li>N\u00e1sobi\u010dku 25\u00d718 bit\u016f s plnou podporou MAC operac\u00ed a\u017e se 48bitov\u00fdm akumul\u00e1torem vhodn\u00fdm pro konstrukci IIR filtr\u016f.</li> <li>Dynamick\u00fd v\u00fdb\u011br operac\u00ed v ALU jednotce (sou\u010det, rozd\u00edl, logick\u00e9 operace) \u2013 kask\u00e1dn\u00ed \u0159azen\u00ed DSP blok\u016f s podporou p\u0159enosu v\u00fdsledk\u016f a\u017e do hloubky 96 bit\u016f.</li> <li>SIMD (Single Instruction Multiple Data) operace 4\u00d712 bit\u016f nebo 2\u00d724 bit\u016f v jednom DSP48E bloku a taktu.</li> <li>48bitovou logickou jednotku, barrel shifter.</li> <li>Rychl\u00fd 48bitov\u00fd \u010d\u00edta\u010d, detekce vzor\u016f.</li> <li>Zaokrouhlov\u00e1n\u00ed v\u00fdsledk\u016f, saturace, p\u0159ete\u010den\u00ed a podte\u010den\u00ed.</li> <li>Podpora multiplexov\u00e1n\u00ed dat v \u010dase.</li> </ul>"},{"location":"HSC_19/#pametove-bloky-block-ram-a-ultraram","title":"Pam\u011b\u0165ov\u00e9 bloky (Block RAM a UltraRAM)","text":"<p>Zat\u00edmco mal\u00e9 pam\u011bti se daj\u00ed tvo\u0159it z LUT (tzv. distribuovan\u00e1 pam\u011b\u0165 RAM), pro ukl\u00e1d\u00e1n\u00ed v\u011bt\u0161\u00edch objem\u016f dat (\u0159\u00e1dov\u011b Kbity a\u017e Mbity) obsahuj\u00ed FPGA specializovan\u00e9 pam\u011b\u0165ov\u00e9 bloky:</p> <ul> <li>Block RAM (BRAM): Z\u00e1kladn\u00ed pam\u011b\u0165ov\u00fd prvek s\u00a0granularitou 36Kbit, vnit\u0159n\u011b d\u011blena na 9bit bloky. Je to True Dual-Port pam\u011b\u0165, co\u017e znamen\u00e1, \u017ee umo\u017e\u0148uje nez\u00e1visl\u00fd \u010dten\u00ed/z\u00e1pis ze dvou port\u016f z\u00e1rove\u0148 na r\u016fzn\u00fdch frekvenc\u00edch (hodinov\u00fdch dom\u00e9n\u00e1ch). Lze ji konfigurovat jako RAM, ROM nebo FIFO. \u010casto obsahuje vestav\u011bnou logiku pro detekci a opravu chyb a lze je kask\u00e1dovit\u011b propojovat, co\u017e umo\u017e\u0148uje vyu\u017e\u00edt kapacitu od des\u00edtek po stovky Mbit\u016f. </li> <li>UltraRAM (URAM): V nov\u011bj\u0161\u00edch architektur\u00e1ch (UltraScale a d\u00e1le) se objevuj\u00ed tyto v\u011bt\u0161\u00ed bloky s vy\u0161\u0161\u00ed kapacitu na jeden sloupec zdroj\u016f a\u00a0granularitou 4K x 72 bit (288Kbit\u016f), kter\u00e9 jsou pln\u011b synchronn\u00ed, ale pouze pro jedny hodiny a nejsou pln\u011b dvouportov\u00e9 (neum\u00ed ReadFirst, WriteFrist re\u017eimy).</li> </ul>"},{"location":"HSC_19/#hodinove-rozvody","title":"Hodinov\u00e9 rozvody","text":"<p>V FPGA nejsou obvody pro spr\u00e1vu hodin rozh\u00e1zeny n\u00e1hodn\u011b. Jsou sdru\u017eeny do CMT (Clock Management Tile), kter\u00e9 se d\u011bl\u00ed na:</p> <ul> <li>MMCM (Mixed-Mode Clock Manager) \u2013 V\u00fdkonn\u011bj\u0161\u00ed gener\u00e1tor hodin, ur\u010den\u00fd pro slo\u017eitou synt\u00e9zu a f\u00e1zov\u00e1n\u00ed.</li> <li>PLL (Phase-Locked Loop) \u2013 Jednodu\u0161\u0161\u00ed gener\u00e1tor hodin, optimalizovan\u00e1 pro \u010distotu sign\u00e1lu.</li> </ul> <p>Z\u00e1kladem obou je analogov\u00fd obvod uzav\u0159en\u00e9 smy\u010dky, kter\u00fd dok\u00e1\u017ee synchronizovat vnit\u0159n\u00ed oscil\u00e1tor s vn\u011bj\u0161\u00edm sign\u00e1lem. PLL dorovn\u00e1vaj\u00ed zpo\u017ed\u011bn\u00ed, d\u011bl\u00ed nebo n\u00e1sob\u00ed frekvenci, m\u011bn\u00ed st\u0159\u00eddu, zaji\u0161\u0165uj\u00ed f\u00e1zov\u00e9 posuny. Snaha je o nulov\u00fd skluz hran hodinov\u00e9ho sign\u00e1lu v cel\u00e9m FPGA. Z\u00e1kladem f\u00e1zov\u00e9ho z\u00e1v\u011bsu je f\u00e1zov\u00fd kompar\u00e1tor a nap\u011bt\u00edm \u0159\u00edzen\u00fd oscil\u00e1tor dopln\u011bn\u00fd d\u011bli\u010dkami (resp. \u010d\u00edta\u010di).</p> <p></p> <p>Vygenerovat hodiny nesta\u010d\u00ed, mus\u00ed se tak\u00e9 rozv\u00e9st k tis\u00edc\u016fm klopn\u00fdch obvod\u016f tak, aby k nim dorazily ve stejn\u00fd \u010das. K tomu slou\u017e\u00ed speci\u00e1ln\u00ed buffery:</p> <p>BUFG (Global Clock Buffer): Nejd\u016fle\u017eit\u011bj\u0161\u00ed buffer. \u0158\u00edd\u00ed glob\u00e1ln\u00ed hodinov\u00fd strom (Global Clock Tree). Sign\u00e1l z BUFG dos\u00e1hne na jak\u00fdkoliv klopn\u00fd obvod v cel\u00e9m FPGA s minim\u00e1ln\u00edm rozd\u00edlem zpo\u017ed\u011bn\u00ed. Po\u010det je omezen\u00fd (nap\u0159. 32 na \u010dip).</p> <p>BUFR (Regional Clock Buffer): Rozv\u00e1d\u00ed hodiny jen v r\u00e1mci jedn\u00e9 \u010d\u00e1sti \u010dipu (Clock Region). Je mnohem krat\u0161\u00ed a m\u00e1 men\u0161\u00ed zpo\u017ed\u011bn\u00ed a spot\u0159ebu ne\u017e BUFG. Ide\u00e1ln\u00ed pro sb\u011brnice, kter\u00e9 vstupuj\u00ed na n\u011bkolika pinech vedle sebe. BUFIO (I/O Buffer): Speci\u00e1ln\u00ed buffer, kter\u00fd nevede do logiky, ale pouze do I/O pin\u016f. Slou\u017e\u00ed pro zachycen\u00ed extr\u00e9mn\u011b rychl\u00fdch dat na vstupu d\u0159\u00edve, ne\u017e se sign\u00e1l rozhod\u00ed pr\u016fchodem vnit\u0159ku \u010dipu.</p> <p>Dal\u0161\u00ed d\u016fle\u017eitou komponentou je BUFGMUX (Global Clock Buffer Multiplexer), kter\u00e1 m\u00e1 hodinov\u00e9 vstupy, v\u00fdb\u011brov\u00e9 vstupy a hodinov\u00fd v\u00fdstup. Jej\u00edm \u00fakolem je pustit do glob\u00e1ln\u00edho hodinov\u00e9ho stromu (BUFG) vstupn\u00ed hodinov\u00fd sign\u00e1l vybran\u00fd na z\u00e1klad\u011b hodnoty v\u00fdb\u011brov\u00e9ho sign\u00e1lu.</p>"},{"location":"HSC_19/#podpora-datovych-typu","title":"Podpora datov\u00fdch typ\u016f","text":"<p>Boolean: Jedn\u00e1 se o nejjednodu\u0161\u0161\u00ed datov\u00fd typ, kter\u00fd reprezentuje logickou 1 (True) nebo 0 (False). Pou\u017e\u00edv\u00e1 se pro \u0159\u00eddic\u00ed logiku (nap\u0159. podm\u00ednky if, enable sign\u00e1ly, reset). Nastaven\u00edm se ur\u010d\u00ed, kter\u00fd typ se synt\u00e9zou vygeneruje:</p> <ul> <li>bit: Star\u0161\u00ed typ ve VHDL, nab\u00fdv\u00e1 pouze hodnot 0 nebo 1.</li> <li>std_logic: Pr\u016fmyslov\u00fd standard. Krom\u011b 0 a 1 um\u00ed reprezentovat i dal\u0161\u00ed stavy, kter\u00e9 jsou pro hardware kritick\u00e9, jako je 'Z' (vysok\u00e1 impedance \u2013 odpojeno) nebo 'X' (nezn\u00e1m\u00e1 hodnota). </li> </ul> <p>Fixed (Pevn\u00e1 \u0159\u00e1dov\u00e1 \u010d\u00e1rka): Fixed-point \u010d\u00edsla umo\u017e\u0148uj\u00ed po\u010d\u00edtat s desetinn\u00fdmi \u010d\u00edsly, ale vyu\u017e\u00edvaj\u00ed k tomu celo\u010d\u00edselnou (integer) aritmetiku, co\u017e je mnohem rychlej\u0161\u00ed a \u00fasporn\u011bj\u0161\u00ed ne\u017e \u010d\u00edsla s\u00a0plovouc\u00ed desetinnou \u010d\u00e1rkou.</p> <ul> <li>UFix (Unsigned): Pouze kladn\u00e1 \u010d\u00edsla.</li> <li>Fix (Signed): Kladn\u00e1 i z\u00e1porn\u00e1 \u010d\u00edsla (obvykle v dopl\u0148kov\u00e9m k\u00f3du).</li> </ul> <p>Z\u00e1pis vypad\u00e1 n\u00e1sledovn\u011b Fix_WL_FL, kde WL je d\u00e9lka slova (Word Length) a FL je d\u00e9lka desetinn\u00e9 \u010d\u00e1sti (Fraction Length). P\u0159\u00edklad Fix_16_14: Cel\u00e9 \u010d\u00edslo m\u00e1 16 bit\u016f. Z toho 14 bit\u016f je vyhrazeno pro desetinnou \u010d\u00e1st. Zb\u00fdvaj\u00ed 2 bity pro celou \u010d\u00e1st (v\u010detn\u011b znam\u00e9nka, je-li to signed), to znamen\u00e1, \u017ee je pot\u0159eba v\u011bd\u011bt, v jak\u00e9m rozsahu se sign\u00e1ly pohybuj\u00ed a zvolit spr\u00e1vn\u00fd po\u010det bit\u016f. Na rozd\u00edl od float, kde se desetinn\u00e1 \u010d\u00e1rka posouv\u00e1, zde je pevn\u00e1.</p> <ul> <li>Kvantizace \u2013 Co se stane s bity vpravo. Kdy\u017e v\u00fdsledek operace m\u00e1 v\u00edce desetinn\u00fdch m\u00edst, ne\u017e kolik m\u016f\u017eeme ulo\u017eit (nap\u0159. n\u00e1soben\u00ed), mus\u00edme se zbavit p\u0159ebyte\u010dn\u00fdch bit\u016f na konci (LSB) bu\u010f klasick\u00fdm matematick\u00fdm zaokrouhlen\u00edm (round), kde se p\u0159i\u010dte se polovina nejm\u00e9n\u011b v\u00fdznamn\u00e9ho bitu a o\u0159\u00edzne se. Co\u017e je p\u0159esn\u011bj\u0161\u00ed, statistick\u00e1 chyba je nulov\u00e1, ale mus\u00ed se p\u0159i\u010d\u00edst polovina LSB, co\u017e vy\u017eaduje s\u010d\u00edta\u010dku, zab\u00edr\u00e1 to m\u00edsto na \u010dipu a trv\u00e1 to d\u00e9le. Dal\u0161\u00ed mo\u017enost\u00ed je o\u0159ez (truncate), co\u017e je prost\u00e9 odseknut\u00ed p\u0159ebyte\u010dn\u00fdch bit\u016f, nejsou k\u00a0tomu pot\u0159eba \u017e\u00e1dn\u00e1 logick\u00e1 hradla nav\u00edc, ale vn\u00e1\u0161\u00ed to v\u011bt\u0161\u00ed chybu (v\u017edy se zaokrouhluje sm\u011brem dol\u016f u Unsigned).</li> <li>P\u0159epln\u011bn\u00ed (Overflow) \u2013 Co se stane s bity vlevo. Kdy\u017e v\u00fdsledek operace p\u0159es\u00e1hne maxim\u00e1ln\u00ed hodnotu, kterou datov\u00fd typ dok\u00e1\u017ee zobrazit (nap\u0159. sou\u010det dvou velk\u00fdch \u010d\u00edsel). M\u016f\u017ee nastat saturace (saturate), kdy se hodnota zasekne na maximu nebo minimu. Nap\u0159\u00edklad rozsah je 0 a\u017e 255 a z v\u00fdpo\u010dtu vyjde 300, tak v\u00fdsledek bude 255. Nebo p\u0159ete\u010den\u00ed, kdy hodnota p\u0159ete\u010de a za\u010dne znovu od nuly. Nap\u0159\u00edklad rozsah je 0 a\u017e 255 a z v\u00fdpo\u010dtu vyjde 256, tak v\u00fdsledek bude 0.</li> </ul> <p>Float (Plovouc\u00ed \u0159\u00e1dov\u00e1 \u010d\u00e1rka): Klasick\u00e1 reprezentace re\u00e1ln\u00fdch \u010d\u00edsel s\u00a0plovouc\u00ed desetinnou \u010d\u00e1rkou, nap\u0159\u00edklad float (single) nebo double. Obecn\u011b jsou operace s\u00a0t\u011bmito datov\u00fdmi typy velmi n\u00e1ro\u010dn\u00e9 na zdroje a plochu na \u010dipu a maj\u00ed tak\u00e9 vy\u0161\u0161\u00ed latenci (trvaj\u00ed d\u00e9le) ne\u017e operace s Fixed-point, proto se pro jejich v\u00fdpo\u010dty vyu\u017e\u00edvaj\u00ed DSP bloky.</p>"},{"location":"HSC_2/","title":"Jazyk C: Pole, v\u00edcerozm\u011brn\u00e1 pole, ukazatele, generick\u00fd ukazatel, \u0159et\u011bzce","text":""},{"location":"HSC_2/#pole","title":"Pole","text":"<p>Pole pat\u0159\u00ed do skupiny slo\u017een\u00fdch homogenn\u00edch datov\u00fdch typ\u016f a jedn\u00e1 se o datovou strukturu, kter\u00e1 obsahuje pevn\u00fd po\u010det prvk\u016f libovoln\u00e9ho, ale jednotn\u00e9ho datov\u00e9ho typu (krom\u011b \u201evoid\u201c). Tyto prvky jsou v pam\u011bti ulo\u017eeny sekven\u010dn\u011b (za sebou) v souvisl\u00e9m bloku. Velikost nen\u00ed hl\u00eddan\u00e1, tud\u00ed\u017e je p\u0159i pr\u00e1ci s\u00a0polem nutn\u00e9 hl\u00eddat hranice, jeliko\u017e \u010dten\u00ed mimo rozsah pole je nedefinovan\u00e9 chov\u00e1n\u00ed a \u010dast\u00e1 p\u0159\u00ed\u010dina chyb. Velikost pole uv\u00e1d\u00edme p\u0159i jeho deklaraci do hranat\u00fdch z\u00e1vorek a v jazyce C se v\u017edy indexuje od 0 do N-1.</p> <p></p>"},{"location":"HSC_2/#vicerozmerne-pole","title":"V\u00edcerozm\u011brn\u00e9 pole","text":"<p>V\u00edcerozm\u011brn\u00e9 pole je pole, jeho\u017e prvky jsou op\u011bt pole, to znamen\u00e1, \u017ee nap\u0159\u00edklad dvourozm\u011brn\u00e9 pole</p> <p></p> <p>p\u0159edstavuje matici o dvou \u0159\u00e1dc\u00edch a t\u0159ech sloupc\u00edch, ulo\u017eenou v pam\u011bti souvisle po \u0159\u00e1dc\u00edch (tzv. rowmajor order). P\u0159\u00edstup k prvku prob\u00edh\u00e1 pomoc\u00ed v\u00edce index\u016f, nap\u0159\u00edklad</p> <p></p> <p>Pole m\u016f\u017ee b\u00fdt i v\u00edcerozm\u011brn\u00e9, nap\u0159\u00edklad t\u0159\u00edrozm\u011brn\u00e9, kter\u00e9 tvo\u0159\u00ed 2 bloky a ka\u017ed\u00fd obsahuje 3 \u0159\u00e1dky po 4 prvc\u00edch.</p> <p></p>"},{"location":"HSC_2/#ukazatel","title":"Ukazatel","text":"<p>Ukazatel je prom\u011bnn\u00e1, kter\u00e1 neuchov\u00e1v\u00e1 p\u0159\u00edmo hodnotu, ale adresu v pam\u011bti, kde je hodnota p\u0159\u00edslu\u0161n\u00e9ho datov\u00e9ho typu ulo\u017eena (zosob\u0148uje adresaci druh\u00e9ho \u0159\u00e1du v\u00a0ISA). Ukazatele jsou kl\u00ed\u010dov\u00e9 pro efektivn\u00ed pr\u00e1ci s pam\u011bt\u00ed, p\u0159ed\u00e1v\u00e1n\u00ed velk\u00fdch struktur bez kop\u00edrov\u00e1n\u00ed, dynamickou alokaci a pr\u00e1ci s\u00a0poli.</p> <p>Pou\u017e\u00edvaj\u00ed se dva oper\u00e1tory: - Referen\u010dn\u00ed oper\u00e1tor \u201e&amp;\u201c z\u00edsk\u00e1 adresu prom\u011bnn\u00e9 (\"kde to je?\") - Dereferen\u010dn\u00ed oper\u00e1tor \u201e*\u201c z\u00edsk\u00e1 hodnotu na dan\u00e9 adrese (\"co tam je?\")</p> <p></p> <p>Hodnoty ukazatel\u016f nemohou b\u00fdt libovoln\u011b p\u0159i\u0159azov\u00e1ny, tud\u00ed\u017e se mus\u00ed p\u0159\u00edpadn\u011b p\u0159etypovat.</p> <p></p> <p>N\u00e1zev pole se ve v\u011bt\u0161in\u011b v\u00fdraz\u016f chov\u00e1 jako konstantn\u00ed ukazatel na prvn\u00ed prvek pole, to znamen\u00e1, \u017ee \u201epole\u201c je ekvivalentn\u00ed s \u201e&amp;pole[0]\u201c a pro p\u0159\u00edstup k \u201epole[i]\u201c p\u0159eklada\u010d intern\u011b p\u0159ep\u00ed\u0161e na aritmetiku ukazatel\u016f \u201e*(pole + i)\u201c. Hlavn\u00edmi rozd\u00edly mezi polem a ukazatelem je, \u017ee ukazatel je prom\u011bnn\u00e1 a m\u016f\u017eeme u n\u011bj zm\u011bnit to, kam ukazuje, zat\u00edmco n\u00e1zev pole je konstantn\u00ed adresa, kter\u00e1 je pevn\u011b d\u00e1na (rezervov\u00e1na) v\u00a0pam\u011bti a zm\u011bnit ji nem\u016f\u017eeme. Dal\u0161\u00ed rozd\u00edl je ve velikosti. U pole \u201esizeof(pole)\u201c vr\u00e1t\u00ed celkovou velikost pole v\u00a0bytech, zat\u00edmco u ukazatele \u201esizeof(ukazatel)\u201c vr\u00e1t\u00ed velikost adresy (obvykle 4 nebo 8 byt\u016f), bez ohledu na to, jak velk\u00fd blok dat za n\u00ed le\u017e\u00ed.</p> <p>Hodnota ukazatele \u201eNULL\u201c p\u0159edstavuje speci\u00e1ln\u00ed konstantu, kter\u00e1 ozna\u010duje, \u017ee ukazatel neukazuje na \u017e\u00e1dn\u00fd platn\u00fd objekt ani adresu v pam\u011bti. Je to tedy \u201enulov\u00e1\u201c adresa, pou\u017e\u00edvan\u00e1 jako bezpe\u010dn\u00fd zp\u016fsob, jak vyj\u00e1d\u0159it, \u017ee ukazatel je pr\u00e1zdn\u00fd nebo neinicializovan\u00fd.</p>"},{"location":"HSC_2/#genericky-ukazatel","title":"Generick\u00fd ukazatel","text":"<p>Generick\u00fd ukazatel je ukazatel typu \u201evoid\u201c, kter\u00fd m\u016f\u017ee uchov\u00e1vat adresu libovoln\u00e9ho objektu bez informace o konkr\u00e9tn\u00edm datov\u00e9m typu. V jazyc\u00edch odvozen\u00fdch od C se kl\u00ed\u010dov\u00e9 slovo \u201evoid\u201c pou\u017e\u00edv\u00e1 k vyj\u00e1d\u0159en\u00ed absence typu, u funkc\u00ed znamen\u00e1 \u201enevrac\u00ed hodnotu\u201c, u parametr\u016f \u201e\u017e\u00e1dn\u00e9 parametry\u201c, a jako \u201evoid\u201c ozna\u010duje obecn\u00fd (typov\u011b neinformovan\u00fd) ukazatel. Generick\u00fd ukazatel nelze dereferencovat p\u0159\u00edmo, jeliko\u017e se nev\u00ed, kolik byt\u016f m\u00e1 z dan\u00e9 adresy p\u0159e\u010d\u00edst (zda je to \u201eint\u201c, \u201echar\u201c nebo \u201edouble\u201c), tak\u00e9 nelze prov\u00e1d\u011bt aritmetiku, proto\u017ee se nev\u00ed, o kolik se m\u00e1 adresa posunout. Proto se p\u0159ed pou\u017eit\u00edm mus\u00ed p\u0159etypovat na konkr\u00e9tn\u00ed typ. D\u00edky sv\u00e9 neutralit\u011b se b\u011b\u017en\u011b pou\u017e\u00edv\u00e1\u00a0pro alokace pam\u011bti, kop\u00edrov\u00e1n\u00ed blok\u016f nebo t\u0159\u00edd\u011bn\u00ed s\u00a0callbackem, kde typov\u00e1 informace je zn\u00e1m\u00e1 a\u017e volaj\u00edc\u00edmu.</p> <p></p>"},{"location":"HSC_2/#retezec","title":"\u0158et\u011bzec","text":"<p>\u0158et\u011bzec je zde definov\u00e1n jako pole znak\u016f typu \u201echar\u201c ulo\u017een\u00e9 v souvisl\u00e9m bloku pam\u011bti, kter\u00e9 je v\u017edy ukon\u010deno speci\u00e1ln\u00edm nulov\u00fdm znakem '\\0'. Tento ukon\u010dovac\u00ed znak umo\u017e\u0148uje funkc\u00edm ze standardn\u00ed knihovny (nap\u0159. strlen, printf(\"%s\"), strcpy) zjistit, kde \u0159et\u011bzec kon\u010d\u00ed, proto\u017ee samotn\u00e9 pole neuchov\u00e1v\u00e1 informaci o sv\u00e9 d\u00e9lce. \u0158et\u011bzec m\u016f\u017ee b\u00fdt vytvo\u0159en jako liter\u00e1l (\"Hello\"), pole znak\u016f (char s[] = \"Hello\";) nebo ukazatel na konstantn\u00ed pam\u011b\u0165 (char *p = \"Hello\";), p\u0159i\u010dem\u017e je nutn\u00e9 v\u017edy zajistit dostatek m\u00edsta pro v\u0161echny znaky v\u010detn\u011b ukon\u010dovac\u00ed nuly. Pro pr\u00e1ci s\u00a0\u0159et\u011bzcem plat\u00ed stejn\u00e1 pravidla jako pro pr\u00e1ci s\u00a0polem.</p> <p></p> <p></p>"},{"location":"HSC_20/","title":"Model Composer \u2013 V\u00fdhody a nev\u00fdhody oproti popisu HDL/HLS, bloky Gateway in, z\u00e1kladn\u00ed aritmetick\u00e9 bloky, podpora AXI stream","text":""},{"location":"HSC_20/#model-composter","title":"Model composter","text":"<ul> <li>N\u00e1stroj pod MATLAB ur\u010den\u00fd pro n\u00e1vrh HW</li> <li>Umo\u017e\u0148uje \u2013 n\u00e1vrh HW, IP jader, HW co-simulation</li> <li>Je t\u0159eba m\u00edt : MATLAB a Simulink, Vitis + Vivado+Model Composer</li> <li>P\u0159i pou\u017eit\u00ed star\u0161\u00edch technik (n\u00edzko\u00farov\u0148ov\u00fd n\u00e1vrh HDL, p\u0159\u00edp. grafick\u00fd) je nutn\u00e9 v\u0161emu (\u010d\u00edslicov\u00e1 elektronika) rozum\u011bt a zn\u00e1t do detail\u016f</li> <li>Vznikl jako snaha pomoci program\u00e1torovi <ul> <li>vysoko\u00farov\u0148ov\u00e1 synt\u00e9za (vy\u0161\u0161\u00ed abstrakce) \u2013 p\u0159evod z\u00a0prog, jazyka na HDL</li> <li>Alternativy Model C. - (vysoko\u00farov\u0148ov\u00fd grafick\u00fd n\u00e1vrh) \u2013 LabView, HDL Coder<ul> <li>Daj\u00ed se dos\u00e1hnout dobr\u00e9 v\u00fdsledky, program\u00e1tor mus\u00ed ch\u00e1pat HW </li> <li>P\u0159i pou\u017eit\u00ed spr\u00e1vn\u00fdch knihoven \u2013 zna\u010dn\u00e9 zkr\u00e1cen\u00ed v\u00fdvoj. cyklu</li> </ul> </li> </ul> </li> </ul>"},{"location":"HSC_20/#amd-toolbox","title":"AMD toolbox","text":"<p>spousta p\u0159ipraven\u00fdch blo\u010dk\u016f</p> <ul> <li>HDL \u2013 n\u00e1vrh p\u0159\u00edmo syntetizovateln\u00fdch (ud\u011blateln\u00fdch) primitiv<ul> <li>Hradla, registry, aritmetika, pam\u011bti</li> <li>FIR, FFT</li> </ul> </li> <li>HLS \u2013 Blokov\u00fd n\u00e1vrh pomoc\u00ed vysoko\u00farov\u0148ov\u00e9 synt\u00e9zy<ul> <li>Nepracuje se zde se sign\u00e1ly, ale s\u00a0maticemi, buffery</li> </ul> </li> <li>VITIS MODEL COMPOSER HUB<ul> <li>Blo\u010dek umo\u017e\u0148uj\u00edc\u00ed propojen\u00ed s\u00a0Vitis <ul> <li>V\u00fdb\u011br FPGA, V\u00fdvojov\u00e9 desky,co-sim platformy</li> <li>Nastaven\u00ed \u2013 VHDL/Verilog, HDL/IP j\u00e1dro,nastaven\u00ed hodin\u2026</li> </ul> </li> </ul> </li> </ul>"},{"location":"HSC_20/#vyhody-oproti-hls","title":"V\u00fdhody oproti HLS","text":"<p>(Vysoko\u00farov\u0148ov\u00e1 synt\u00e9za)/HDL(Hardware description language)</p> <ul> <li>Grafick\u00e1 reprezentace \u2013 P\u0159ehledn\u00e9,vy\u0161\u0161\u00ed m\u00edra abstrakce ne\u017e  C k\u00f3d/HDL</li> <li>Mo\u017enost pou\u017eit\u00ed Ekosyst\u00e9mu Simulink, MATLAB \u2013 mrda knihoven</li> <li>Rychlej\u0161\u00ed lad\u011bn\u00ed a simulace (v simulinku prost\u011b p\u0159ipoj\u00ed\u0161 dr\u00e1t) HLS/ - ru\u010dn\u011b<ul> <li>Do simulinku jde d\u00e1t jako vstup i posranej obr\u00e1zek.</li> </ul> </li> <li>Automatick\u00e1 generace rozhran\u00ed(AXI4 a handshake sign\u00e1ly) HLS \u2013 ru\u010dn\u011b</li> </ul>"},{"location":"HSC_20/#nevyhody-oproti-hls-hdl","title":"Nev\u00fdhody oproti HLS /HDL","text":"<ul> <li>Cena</li> <li>Men\u0161\u00ed kontrola nad detaily (simulink m\u00e1 nastaven\u00ed ale n\u011bkdy to je v\u00a0C lep\u0161\u00ed)<ul> <li>Zku\u0161en\u00fd HDL program\u00e1tor zabere m\u00e9\u0148e zdroj\u016f ne\u017e model composer</li> </ul> </li> <li>\u201eBlack Box efekt\u201c \u2013 je t\u011b\u017ek\u00fd zjistit, pro\u010d vygenerovan\u00fd blok zab\u00edr\u00e1 v\u00edce zdroj\u016f<ul> <li>V\u00a0C\u010dku to jde vid\u011bt \u2013 d\u00e1 se to dohledat</li> </ul> </li> <li>Kompatibilita \u2013 v\u00edce nutn\u00fdch softwar\u016f \u2013 nutno sladit verze \u2013 upgrade v\u0161eho</li> <li>Nep\u0159ehledn\u00e9/neefektivn\u00ed pro stavov\u00e9 automaty a slo\u017eit\u011bj\u0161\u00ed v\u011btven\u00ed</li> </ul>"},{"location":"HSC_20/#zakladni-bloky","title":"Z\u00e1kladn\u00ed bloky","text":""},{"location":"HSC_20/#gateway-in-gateway-out","title":"Gateway IN, Gateway OUT","text":"<ul> <li>V\u00a0r\u00e1mci simulinku jsou 2 prostory \u2013 1s v\u00a0simulinku = 1 takt clk v\u00a0Model Com.<ul> <li>SW prostor \u2013 Matlab (spojit\u00fd,double)</li> <li>HW prostor \u2013 Model Composer (diskr\u00e9tn\u00ed, synchronn\u00ed, u\u017eivatelsk\u00e9 datov\u00e9 typy)</li> </ul> </li> <li>Gateway bloky prov\u00e1d\u00ed konverzi mezi t\u011bmito prostory</li> <li>Gateway IN bloky \u2013 ADC (s nastaven\u00edm Ts a kvantizace), IN pin, AXi registr</li> <li>Gateway OUT bloky \u2013 DAC, OUT pin, AXI lite registr</li> </ul>"},{"location":"HSC_20/#aritmeticke-logicke-bloky-routovani","title":"Aritmetick\u00e9, logick\u00e9 bloky, routov\u00e1n\u00ed","text":"<ul> <li>Aritmetick\u00e9 \u2013 Absolute, Exponential,AssSub,Mult,Divide</li> <li>Logick\u00e9 \u2013 expression,relational,inverter,logical </li> <li>Routov\u00e1n\u00ed \u2013 serial to parallel, parallel to serial</li> </ul>"},{"location":"HSC_20/#sekvencni-bloky","title":"Sekven\u010dn\u00ed bloky","text":"<ul> <li>Delay,Register</li> <li>Rom, single port RAM, dual port RAM, FIFO, AXI FIFO</li> <li>LFSR (linear feedback shift register), Counter</li> </ul>"},{"location":"HSC_20/#specialni-bloky","title":"Speci\u00e1ln\u00ed bloky","text":"<ul> <li>Convert \u2013 konverze sign\u00e1lu na jin\u00fd datov\u00fd typ, zm\u011bna po\u010dtu bit\u016f</li> <li>Reinterpret \u2013 p\u0159etypov\u00e1n\u00ed sign\u00e1lu na jin\u00fd datov\u00fd typ, bez zm\u011bny po\u010dtu bit\u016f</li> <li>Assert </li> <li> <p>Bitov\u00e1 manipulace \u2013 Slice(\u0159ez vektoru),Concat(slou\u010den\u00ed &amp;),Bitbasher</p> </li> <li> <p>Mcode \u2013 spou\u0161t\u011bn\u00ed u\u017eivatelsk\u00fdch matlab funkc\u00ed \u2013 p\u00e1r \u0159\u00e1dk\u016f k\u00f3du je n\u011bkdy p\u0159ehledn\u011bj\u0161\u00ed, ne\u017e grafick\u00e1 interpretace, ale mus\u00ed se d\u00e1vat hodn\u011b pozor</p> <ul> <li>Matlab funkce mus\u00ed b\u00fdt realizovateln\u00e1 jako HW</li> <li>If, else, else if \u2013 deterministick\u00e9 podm. \u2013 hodnoty case mus\u00ed b\u00fdt zn\u00e1me v\u00a0dob\u011b kompilace \u2013 case (x) \u2013 x nesm\u00ed b\u00fdt m\u011bn\u00edc\u00ed se vstup, o\u0161et\u0159en\u00ed v\u0161ech stav\u016f</li> <li>D\u011blen\u00ed -  pro dva sign\u00e1ly- HW slo\u017eit\u00e9, t\u011b\u017ek\u00e1 synt\u00e9za, lze n\u00e1sobit p\u0159evr\u00e1cenou hodnotou </li> <li>D\u011blen\u00ed mocnonou 2 \u2013 mcode to interpretuje jako bitov\u00fd posun</li> <li>Rela\u010dn\u00ed oper\u00e1tory (&lt;,&gt; ==) \u2013 t\u0159eba hl\u00eddat datov\u00e9 typy</li> <li>Lze pou\u017e\u00edt pro sekven\u010dn\u00ed obvody \u2013 persistent prom\u011bnn\u00e9 uchov\u00e1vaj\u00ed hodnotu mezi cykly</li> </ul> </li> </ul>"},{"location":"HSC_20/#podpora-axi-stream","title":"Podpora AXI stream","text":"<ul> <li>Jsou tu bloky <ul> <li>Gateway In/Out \u2013 aut. nastaven\u00ed dle kontextu (aut inference)<ul> <li>X_tdata,  - p\u0159esouvan\u00e1 data</li> <li>X_tvalid, - 1 = p\u0159enos dat, 0 = data jsou napr\u00e1zdno</li> <li>X_tready \u2013 p\u0159ipraveno na p\u0159\u00edjem dat</li> </ul> </li> <li>P\u0159\u00edpadn\u011b Gateway In/Out AXIS</li> </ul> </li> </ul> <p>V\u00a0r\u00e1mci model composeru se d\u00e1 pou\u017e\u00edt blo\u010dek, kde je zapracovan\u00e1 AXI4-Stream - Jen interface bez nepovinn\u00fdch sign\u00e1l\u016f (tlast(packet end), tuser(packet start))</p>"},{"location":"HSC_20/#zakladni-flow","title":"Z\u00e1kladn\u00ed flow","text":"<ul> <li>Model composer<ul> <li>Sestaven\u00ed sch\u00e9ma</li> <li>Nastaven\u00ed Ins a Outs (datov\u00e9 typy, adresy registr\u016f)</li> <li>Ov\u011b\u0159en\u00ed funkce</li> <li>Vytvo\u0159en\u00ed subsyst\u00e9mu</li> <li>Nastaven\u00ed blo\u010dku Vitis model composer hub (export j\u00e1dra)</li> <li>Vygenerov\u00e1n\u00ed IP j\u00e1dra</li> </ul> </li> <li>Vivado<ul> <li>Import j\u00e1dra -&gt; blokov\u00e9 sch\u00e9ma -&gt; export bitstream (konfigurace fpga)</li> </ul> </li> <li>Vitis \u2013 tvorba ovlada\u010d\u016f(prost\u0159edn\u00edk mezi SW a HW),aplikace<ul> <li>Ovlada\u010d- kus k\u00f3du, kter\u00fd v\u00ed, kam s\u00e1hnout do pam\u011bti, aby se rozblikala led</li> </ul> </li> </ul>"},{"location":"HSC_21/","title":"HLS \u2013 v\u00fdhody a nev\u00fdhody oproti popisu HDL/Model Composer, popis flow, zpracov\u00e1n\u00ed z\u00e1kladn\u00edch prvk\u016f jazyka C do HW struktur, Interface AXI4","text":""},{"location":"HSC_21/#hls-vitis-vysokourovnova-synteza","title":"HLS (Vitis) \u2013 vysoko\u00farov\u0148ov\u00e1 synt\u00e9za","text":"<p>Ur\u010dujeme, co se m\u00e1 s\u00a0daty st\u00e1t (C/C++), ne to, jak se maj\u00ed p\u0159esouvat (HDL)</p>"},{"location":"HSC_21/#co-hls-provadi","title":"Co HLS prov\u00e1d\u00ed","text":"<p>P\u0159evod C/C++ funkc\u00ed do zadr\u00e1tovan\u00fdch funkc\u00ed (v r\u00e1mci toho d\u011bl\u00e1 i v\u011bci n\u00ed\u017ee) </p> <ul> <li>Pl\u00e1nov\u00e1n\u00ed operac\u00ed <ul> <li>Aut. Pl\u00e1nov\u00e1n\u00ed operac\u00ed na v\u00edce takt\u016f (n\u011bkter\u00e9 jsou i v\u00edcetaktov\u00e9) </li> <li>Rychl\u00e9 FPGA (mal\u00e9 clk, ale hodn\u011b HW) \u2013 v\u00edce operac\u00ed za jeden takt</li> <li>Je t\u0159eba dodr\u017eet datov\u00e9 z\u00e1voslosti \u2013 posloupnost operac\u00ed (+-*/)</li> </ul> </li> <li>P\u0159i\u0159azov\u00e1n\u00ed zdroj\u016f \u2013 ur\u010duje, kter\u00e9 zdroje budou pou\u017eity (na z\u00e1klad\u011b pl\u00e1nov\u00e1n\u00ed)<ul> <li>Se sd\u00edlen\u00edm/bez sd\u00edlen\u00ed \u2013 jestli mus\u00edm pou\u017e\u00edt v\u00edce n\u00e1sobi\u010dek (ab+cd) </li> <li>P\u0159i\u0159azov\u00e1n\u00ed lze ovlivnit \u2013 c\u00edlovou frekvenc\u00ed, direktivy (pragmas)</li> </ul> </li> <li>Extrakce \u0159\u00eddic\u00ed logiky \u2013 smy\u010dka v\u00a0C/C++ vede na stav. Automat <ul> <li>Do\u0159e\u0161\u00ed se dal\u0161\u00ed souvislosti<ul> <li>Latency \u2013 po\u010det cykl\u016f nezbytn\u00fdch pro celkov\u00fd v\u00fdpo\u010det</li> <li>Initiation interval \u2013 po\u010det cykl\u016f p\u0159ed p\u0159ijet\u00edm nov\u00fdch dat</li> <li>Troughput \u2013 po\u010det cykl\u016f mezi p\u0159ij\u00edm\u00e1n\u00edm dat</li> <li>Loop latency \u2013 po\u010det cykl\u016f jedn\u00e9 smy\u010dky</li> <li>Loop initiation interval \u2013 po\u010det cykl\u016f mezi iteracemi smy\u010dky</li> <li>Loop latency \u2013 ve\u0161ker\u00fd po\u010det cykl\u016f smy\u010dky</li> </ul> </li> </ul> </li> </ul> <p>Zpracov\u00e1n\u00ed kodu</p> <ul> <li>Hlavn\u00ed funkce<ul> <li>Argumenty t\u00e9to funkce vytvo\u0159\u00ed I/O porty </li> <li>Direktivy umo\u017enuj\u00ed nam\u00edsto portu HW protokol (AXIMM,AXIS,BRAM)</li> </ul> </li> <li>Ostatn\u00ed funkce \u2013 p\u0159eklad do RTL, vol\u00e1n\u00edm funkce vytvo\u0159en\u00edm instanci</li> <li>Smy\u010dky <ul> <li>Zabalen\u00e9 a z\u0159et\u011bzen\u00e9 (v\u00fdchoz\u00ed) \u2013 ka\u017ed\u00e1 iterace pou\u017e\u00edv\u00e1 stejn\u00e9 zdroje</li> <li>Rozbalen\u00e9 \u2013 pokud lze jejich meze staticky vyhodnotit \u2013 nutn\u00e9 v\u00edce HW </li> </ul> </li> <li> <p>Pole \u2013 pr\u00e1ce s n\u00edm vede k\u00a0pou\u017eit\u00ed BRAM(blokov\u00e1 ram)</p> <ul> <li>Pokud to lze a je to v\u00fdhodn\u00e9, tak synt\u00e9za slu\u010duje a rozd\u011bluje pole do v\u011bt\u0161\u00edch \u010di men\u0161\u00edch RAM </li> </ul> </li> <li> <p>Probl\u00e9my</p> <ul> <li>Printf(),fscanf, rekurzivn\u00ed funkce \u2013 nelze</li> <li>Dynamicky vytv\u00e1\u0159en\u00e9 a mazan\u00e9 objekty \u2013 nelze, mus\u00ed b\u00fdt statick\u00e9</li> <li>Generic pointery \u2013 ne</li> </ul> </li> </ul>"},{"location":"HSC_21/#zakladni-flow","title":"Z\u00e1kladn\u00ed flow","text":"<ul> <li>Z\u00e1kladn\u00ed C/C++ funkce</li> <li>Transformace funkc\u00ed pro RTL popis</li> <li>Vytvo\u0159en\u00ed testbench</li> <li>Verifikace funkce</li> <li>Vytvo\u0159en\u00ed RTL popisu</li> <li>Verifikace na RTL \u00farovni</li> <li>Vytvo\u0159en\u00ed ovlada\u010d\u016f\u00a8</li> <li>Export IP j\u00e1dra</li> </ul>"},{"location":"HSC_21/#interface-axi4","title":"Interface AXI4","text":"<p>Pomoc\u00ed direktiv kompil\u00e1toru lze argumenty funkce upravit na interface - Axis(stream), s_axilite(konfigura\u010dn\u00ed registry),m_axi(obsluha DMA \u2013 direct memory access controler)</p> <p>Mo\u017enost pou\u017e\u00edt AXI 4 Burst \u2013 akce, kter\u00e1 po\u0161le v\u00edce dat na se\u0159azen\u00e9 adresy</p> <ul> <li>Zavol\u00e1 se memcpy(), d\u00e1le to prob\u00edh\u00e1 ve z\u0159etezen\u00e9m for cyklu</li> <li>Po\u017eadavky, aby se to dalo pou\u017e\u00edt<ul> <li>Smy\u010dky mus\u00ed b\u00fdt pipeline</li> <li>Adresy se\u0159azen\u00e9 vzestupn\u011b</li> <li>P\u0159\u00edstup do pam\u011bti \u2013 bez podm\u00ednky</li> <li>Pouze 1 read nebo 1 write v\u00a0cyklu pro stejn\u00fd port</li> </ul> </li> </ul>"},{"location":"HSC_21/#vyhody-oproti-hdlmodel-composer","title":"V\u00fdhody oproti HDL/Model Composer","text":"<ul> <li>Algoritmick\u00fd popis \u0159e\u0161en\u00ed je rychlej\u0161\u00ed ne\u017e n\u00e1vrh HW- ne\u0159e\u0161\u00edme strukturu <ul> <li>100 \u0159\u00e1dk\u016f kodu C m\u016f\u017ee b\u00fdt 5000 \u0159\u00e1dk\u016f VHDL</li> </ul> </li> <li>M\u016f\u017eeme vyu\u017e\u00edt hardwarovou akceleraci \u2013 \u00fakoly d\u011bl\u00e1 krom\u011b cpu i spec. HW</li> <li>Odd\u011blen\u00e1 funkcionalita (C/C++) od re\u00e1ln\u00e9 implementace (direktivy to specifikuju)</li> <li>Rychlej\u0161\u00ed testov\u00e1n\u00ed funk\u010dnosti (C k\u00f3d)</li> <li>\u010citeln\u011bj\u0161\u00ed k\u00f3d \u2013 pr\u00e1ce s\u00a0poli, strukturami</li> </ul>"},{"location":"HSC_21/#nevyhody-oproti-hdl","title":"Nev\u00fdhody oproti HDL","text":"<ul> <li>Nutn\u00e9 p\u0159ev\u00e1d\u011bt  C/C++ kod do HDL jazyka v\u00a0RTL popisu</li> <li>Verifikace ve v\u0161ech f\u00e1z\u00edch n\u00e1vrhu - zdr\u017eov\u00e1n\u00ed</li> <li>Zku\u0161en\u00fd HDL program\u00e1tor zabere m\u00e9\u0148e zdroj\u016f ne\u017e HLS  (ni\u017e\u0161\u00ed mo\u017en\u00e1 frekvence)</li> <li>Viz \u2013 zpracov\u00e1n\u00ed k\u00f3du \u2013 probl\u00e9my (nesm\u00ed se pou\u017e\u00edvat konstrukce zn\u00e1me z C\u010dka)</li> <li>Mo\u017enost syntaktick\u00fdch chyb (oproti model composer)</li> </ul>"},{"location":"HSC_3/","title":"Jazyk C: Oper\u00e1tory, funkce, n\u00e1vratov\u00e9 hodnoty, z\u00e1sobn\u00edk, ukazatele na funkce, standartn\u00ed knihovny, direktivy","text":""},{"location":"HSC_3/#operatory","title":"Oper\u00e1tory","text":"<p>Oper\u00e1tory prov\u00e1d\u011bj\u00ed n\u011bjakou operaci mezi operandy, tato operace m\u016f\u017ee b\u00fdt matematick\u00e1, logick\u00e1 nebo bitov\u00e1. Lze je rozd\u011blit podle po\u010dtu operand\u016f na un\u00e1rn\u00ed (1 operand), bin\u00e1rn\u00ed (2 operandy) a tern\u00e1rn\u00ed (3 operandy). D\u00e1le se d\u011bl\u00ed na aritmetick\u00e9, logick\u00e9, bitov\u00e9, rela\u010dn\u00ed, p\u0159i\u0159azovac\u00ed. Maj\u00ed priority, kdy\u017e nev\u00ed\u0161, z\u00e1vorkuj.</p>"},{"location":"HSC_3/#unarni","title":"Un\u00e1rn\u00ed","text":"<ul> <li>p\u0159etypov\u00e1n\u00ed z int t\u0159eba na char int A = - 700; printf(\"%d\", (char)A); // prints 68!</li> <li>Velikost prvku v bajtech: sizeof(); Un\u00e1rn\u00ed plus a m\u00ednus: +4 = 4, -4 = (-1*)4</li> <li>Logick\u00e1 negace: !, bitov\u00e1 negace: ~; Oper\u00e1tor inkrement a dekrement: ++, --</li> <li>Oper\u00e1tor reference &amp; - Vrac\u00ed adresu operandu; Oper\u00e1tor dereference * - \u201eVyvol\u00e1\u201c operaci s nep\u0159\u00edm\u00fdm adresov\u00e1n\u00edm</li> </ul>"},{"location":"HSC_3/#binarni","title":"Bin\u00e1rn\u00ed","text":"<ul> <li>Aritmetick\u00e9: Multiplikativn\u00ed *,/,%; Aditivn\u00ed +,-; Posuvu &lt;&lt;,&gt;&gt;; Rela\u010dn\u00ed &lt;,&lt;=,&gt;=,&gt;; Rovnosti ==, !=; Bin\u00e1rn\u00ed AND &amp;; Bin\u00e1rn\u00ed XOR ^; Bin\u00e1rn\u00ed OR |</li> <li>Logick\u00e9: Logick\u00fd AND &amp;&amp;; Logick\u00fd OR ||</li> </ul>"},{"location":"HSC_3/#vyrazy-prirazeni","title":"V\u00fdrazy p\u0159i\u0159azen\u00ed","text":"<ul> <li>=, +=, -=, *=, /=, %=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=, |=; Datov\u00fd typ na lev\u00e9 a prav\u00e9 stran\u011b p\u0159i\u0159azen\u00ed by m\u011bl \u201en\u011bjak\u201c odpov\u00eddat. Nelze p\u0159i\u0159azovat do pole</li> </ul>"},{"location":"HSC_3/#funkce","title":"Funkce","text":"<p>Funkce je logick\u00fd blok k\u00f3du, kter\u00fd jednou nap\u00ed\u0161eme a pot\u00e9 ho m\u016f\u017eeme libovoln\u011b volat bez toho, abychom ho psali znovu a opakovali se. Funkci deklarujeme v glob\u00e1ln\u00edm prostoru, n\u011bkde nad funkc\u00ed main().</p> <ul> <li>Deklarace - n\u00e1vratov\u00fd_typ jm\u00e9no (typ_vstupn\u00ed_parametr, typ_vstupn\u00ed_parametr_2);</li> <li>T\u011blo funkce - n\u00e1vratov\u00fd_typ jm\u00e9no (typ_vstupn\u00ed_parametr, typ_vstupn\u00ed_parametr_2){ code\u2026; return n\u00e1vratov\u00e1 hodnota}</li> </ul>"},{"location":"HSC_3/#navratove-hodnoty","title":"N\u00e1vratov\u00e9 hodnoty","text":"<p>Funkce m\u016f\u017ee vracet n\u011bjakou hodnotu. Jakou vrac\u00ed hodnotu je definovan\u00e9 v deklaraci funkce, bu\u010f je tam n\u011bjak\u00fd datov\u00fd typ jako int, char, atd. nebo je tam void a funkce \u017e\u00e1dnou hodnotu nevrac\u00ed. N\u00e1vratovou hodnotu m\u016f\u017eeme z funkce cht\u00edt proto aby jsme s n\u00ed d\u00e1le v k\u00f3du mofli pracovat. P\u0159\u00edklad funkce s n\u00e1vratovou hodnotou a bez n\u00ed :</p> <p> </p>"},{"location":"HSC_3/#zasobnik","title":"Z\u00e1sobn\u00edk","text":"<p>Pam\u011b\u0165ov\u00e1 oblast typu LIFO (Last In, First Out - posledn\u00ed dovnit\u0159, prvn\u00ed ven), kter\u00e1 slou\u017e\u00ed pro do\u010dasn\u00e9 ukl\u00e1d\u00e1n\u00ed dat b\u011bhem b\u011bhu funkc\u00ed.</p> <ul> <li>Ukl\u00e1daj\u00ed se zde lok\u00e1ln\u00ed prom\u011bnn\u00e9, parametry funkc\u00ed a n\u00e1vratov\u00e9 adresy.</li> <li>Po ukon\u010den\u00ed funkce se data z vrcholu z\u00e1sobn\u00edku automaticky uvoln\u00ed (sma\u017eou).</li> </ul> <p>Re\u00e1ln\u00fd p\u0159\u00edklad u\u017eit\u00ed je nap\u0159. funkce Undo (zp\u011bt), kde se jednotliv\u00e9 kroky (nap\u0159. zm\u011bny v n\u011bjak\u00e9m editoru) ukl\u00e1daj\u00ed do z\u00e1sobn\u00edku a funkce Undo n\u00e1s v\u017edy vr\u00e1t\u00ed do toho posledn\u00edho ulo\u017een\u00e9ho stavu.  Je vlastn\u011b v\u0161ude, p\u0159i ka\u017ed\u00e9m vol\u00e1n\u00ed funce je n\u00e1vratov\u00e1 adresa do n\u011bj ulo\u017eena.</p> <ul> <li>push() (p\u0159idej) - p\u0159id\u00e1 na vrchol z\u00e1sobn\u00edku nov\u00fd ITEM obsahuj\u00edc\u00ed dan\u00e9 \u010d\u00edslo typu int</li> <li>pop() (odeber) - odebere z vrcholu z\u00e1sobn\u00edku posledn\u00ed ITEM a vr\u00e1t\u00ed jej</li> <li>peek() (viz) - vr\u00e1t\u00ed vrchol z\u00e1sobn\u00edku, ale prvek ze z\u00e1sobn\u00edku neodstra\u0148uje</li> </ul>"},{"location":"HSC_3/#ukazatele-na-funkce","title":"Ukazatele na funkce","text":"<p>Speci\u00e1ln\u00ed typ ukazatele, kter\u00fd neukazuje na data, ale na adresu k\u00f3du (za\u010d\u00e1tek funkce) v pam\u011bti. Vyu\u017eit\u00ed: Umo\u017e\u0148uje volat funkce dynamicky za b\u011bhu nebo p\u0159ed\u00e1vat funkci jako parametr jin\u00e9 funkci (tzv. callback - nap\u0159. porovn\u00e1vac\u00ed funkce pro \u0159azen\u00ed qsort). \"Ukazatele na funkce n\u00e1m umo\u017e\u0148uj\u00ed p\u0159ed\u00e1vat chov\u00e1n\u00ed (algoritmus) jako parametr, co\u017e d\u011bl\u00e1 program flexibiln\u011bj\u0161\u00edm a modul\u00e1rn\u011bj\u0161\u00edm.\"</p>"},{"location":"HSC_3/#knihovny","title":"Knihovny","text":"<p>Sada p\u0159edp\u0159ipraven\u00fdch funkc\u00ed, kter\u00e9 jsou sou\u010d\u00e1st\u00ed jazyka C, aby program\u00e1tor nemusel ps\u00e1t z\u00e1kladn\u00ed v\u011bci od nuly. Do k\u00f3du se vkl\u00e1daj\u00ed pomoc\u00ed #include.</p> <ul> <li>stdio.h: Vstup a v\u00fdstup (funkce printf, scanf).</li> <li>stdlib.h: Pr\u00e1ce s pam\u011bt\u00ed a p\u0159evody (malloc, free, atoi).</li> <li>math.h: Matematick\u00e9 operace (sqrt, pow).</li> <li>string.h: Pr\u00e1ce s \u0159et\u011bzci (strcpy, strlen).</li> </ul>"},{"location":"HSC_3/#direktivy","title":"Direktivy","text":"<p>Instrukce ur\u010den\u00e9 pro preprocesor, kter\u00e9 se zpracuj\u00ed je\u0161t\u011b p\u0159ed samotnou kompilac\u00ed. V\u017edy za\u010d\u00ednaj\u00ed znakem #.</p> <ul> <li>#include: Vlo\u017e\u00ed obsah jin\u00e9ho souboru (hlavi\u010dkov\u00e9ho souboru) do k\u00f3du.</li> <li>#define: Definuje makro nebo konstantu (nahrazen\u00ed textu v k\u00f3du).</li> <li>#ifdef / #endif: Podm\u00edn\u011bn\u00fd p\u0159eklad (\u010d\u00e1st k\u00f3du se zkompiluje jen p\u0159i spln\u011bn\u00ed podm\u00ednky).</li> <li>#if, #else, #endif: Podm\u00ednky p\u0159i kompilaci (staticky vyhodnotiteln\u00e9)</li> </ul>"},{"location":"HSC_4/","title":"Embedded syst\u00e9my, z\u00e1kladn\u00ed charakteristika, typick\u00e9 sou\u010d\u00e1sti embedded syst\u00e9m\u016f, ES v ASIC vs FPGA","text":""},{"location":"HSC_4/#embeded-system","title":"Embeded syst\u00e9m","text":"<p>Elektronick\u00fd syst\u00e9m (kombinace HW a SW) navr\u017een\u00fd prov\u00e1d\u011bt jednu nebo v\u00edce speci\u00e1ln\u00edch funkc\u00ed (m\u016f\u017ee b\u00fdt i sou\u010d\u00e1st\u00ed v\u011bt\u0161\u00edho syst\u00e9mu - Integrace)</p> <p>Postupn\u00e1 integrace: Tranzistory -&gt; Monolitick\u00e9 obvody -&gt; mikroprocesory -&gt;VLSI monolitck\u00e9 obvody -&gt; Systems on a Chip</p> <p>V\u0161ude: Router, telefon, pra\u010dka, mikrovlnka</p> <p>Funkce se typicky po dobu \u017eivotnosti v\u00fdrobku se obvykle nem\u011bn\u00ed</p> <p>Pracuj\u00ed v re\u00e1ln\u00e9m \u010dase s definovanou odezvou</p> <p>D\u016fraz na n\u00edzkou spot\u0159ebu (\u010dasto nap\u00e1jen\u00e9 z bateri\u00ed)</p> <p>Omezen\u00e9 prost\u0159edky (v\u00fdkon, pam\u011b\u0165)  - cena</p>"},{"location":"HSC_4/#soucasti-es","title":"Sou\u010d\u00e1sti ES","text":"<ul> <li>Procesor</li> <li>Vnit\u0159n\u00ed slu\u017eby a komunikace<ul> <li>Porty procesoru, \u010d\u00edta\u010de/\u010dasova\u010de </li> <li>Syst\u00e9mov\u00e9 slu\u017eby (Interrupt, Watchdog)</li> <li>Intern\u00ed \u201esb\u011brnice\u201c</li> </ul> </li> <li>Pam\u011bti<ul> <li>Intern\u00ed SRAM,FLASH</li> <li>\u0158adi\u010de extern\u00ed pam\u011bt\u00ed SRAM/(LP)DDR(2,3)</li> </ul> </li> <li>Extern\u00ed komunikace      \u2013 AD /DA p\u0159evodn\u00edky, USB, UART, Ethernet</li> <li>Dedikovan\u00fd HW<ul> <li>Float procesory, grafika, zvuk,speci\u00e1ln\u00ed</li> </ul> </li> <li>SW<ul> <li>Zalo\u017eeno na FW, OS</li> </ul> </li> </ul>"},{"location":"HSC_4/#fpga-vs-asic","title":"FPGA vs ASIC","text":"<p>U ASIC lze m\u00edt mnoho hodinov\u00fdch dom\u00e9n, jsou k\u00a0dispozici n\u011bkter\u00e9 z\u00e1kladn\u00ed sou\u010d\u00e1sti (s\u010d\u00edta\u010dky), je d\u00e1no rozlo\u017een\u00ed -&gt; vy\u0161\u0161\u00ed hustota tranzistor\u016f, vy\u0161\u0161\u00ed rychlost hodin</p> <p>FPGA m\u00e1 sd\u00edlen\u00e9 zdroje a prom\u011bnlivou topologii</p>"},{"location":"HSC_4/#asic-aplication-specific-integrated-circuit","title":"ASIC \u2013 aplication specific integrated circuit","text":"<p>navr\u017een\u00e9 pro konkr\u00e9tn\u00ed aplikaci \u2013 limitovan\u00e1 funk\u010dnost(-) vysok\u00fd v\u00fdpo\u010detn\u00ed v\u00fdkon(+) n\u00edzk\u00e1 spot\u0159eba(+) n\u00edzk\u00e1 cena(+) - p\u0159i vy\u0161\u0161\u00edm po\u010dtu kus\u016f nelze p\u0159eprogramovat(-) drah\u00fd a dlouh\u00fd v\u00fdvoj(-) mus\u00ed se d\u011blat fyzick\u00fd n\u00e1vrh(-) -&gt; m\u00e1me plnou \u201csvobodu\u201d n\u00e1vrhu(+)</p>"},{"location":"HSC_4/#fpga","title":"FPGA","text":"<p>nejd\u0159\u00edve v tov\u00e1rn\u011b vyrobeno a pot\u00e9 to navrhneme -&gt; short time to market lze p\u0159eprogramovat, rekonfigurovateln\u00e9(+) ihned k dispozici - ihned lad\u011bn\u00ed - ihned odzkou\u0161en\u00ed(+) nemus\u00ed se d\u011blat fyzick\u00e1 n\u00e1vrh - sta\u010d\u00ed bitstream ni\u017e\u0161\u00ed v\u00fdpo\u010detn\u00ed v\u00fdkon(+) vy\u0161\u0161\u00ed spot\u0159eba(-) vy\u0161\u0161\u00ed cena(-)</p>"},{"location":"HSC_5/","title":"Architektonick\u00e9 koncepty po\u010d\u00edta\u010de, ISA procesoru s p\u0159\u00edklady (stack, ACC, GPR), instruk\u010dn\u00ed cyklus, RISC vs CISC, sou\u010dasn\u00e9 trendy CPU","text":""},{"location":"HSC_5/#harvardska","title":"Harvardsk\u00e1","text":"<p>Z\u00e1kladem jsou odd\u011blen\u00e9 pam\u011bti pro data a program Nen\u00ed nutn\u00e9 pou\u017e\u00edt stejn\u00fd typ pam\u011bti (r\u016fzn\u00e1 \u0161\u00ed\u0159ka adresy a dat, \u010dasov\u00e1n\u00ed, kapacita) Lze p\u0159istupovat k\u00a0ob\u011bma pam\u011btem nar\u00e1z typick\u00fd \u201eHarvard\u201c procesor to ned\u011bl\u00e1</p> <p></p>"},{"location":"HSC_5/#von-neumann","title":"Von Neumann","text":"<p>Z\u00e1kladem je spole\u010dn\u00e1 pam\u011b\u0165 pro data a program Univerz\u00e1ln\u011bj\u0161\u00ed koncepce, ale program je nutn\u00e9 nejprve na\u010d\u00edst z extern\u00edho m\u00e9dia Pomalej\u0161\u00ed p\u0159\u00edstup, rychlost pam\u011bt\u00ed je slab\u00fdm \u010dl\u00e1nkem, proto procesory pou\u017e\u00edvaj\u00ed CACHE (vyrovn\u00e1vac\u00ed)</p> <p>Dne\u0161n\u00ed po\u010d\u00edta\u010de se zvenku jev\u00ed jako V.N. ale uvnit\u0159 je Harvard (odd\u011blen\u00e9 cache)</p> <p></p>"},{"location":"HSC_5/#isa-instruction-set-architecture-architektura-instrukcniho-souboru","title":"ISA \u2013 Instruction set architecture \u2013 architektura instruk\u010dn\u00edho souboru","text":"<p>Obecn\u00fd popis organiza\u010dn\u00edch, funk\u010dn\u00edch a provozn\u00edch princip\u016f procesoru Rozhran\u00ed mezi softwarem (programem) a hardwarem (procesorem). Z pohledu program\u00e1tora - seznam dostupn\u00fdch mechanism\u016f pro programov\u00e1n\u00ed. (Vlastnosti v\u00fdpo\u010detn\u00edho syst\u00e9mu) ISA ne\u0159e\u0161\u00ed, jak procesor funguje uvnit\u0159, ale co um\u00ed navenek \u2013 (d\u016fle\u017eit\u00e9 pro kompatibilitu) Procesory, co maj\u00ed stejnou instruk\u010dn\u00ed sadu, vykon\u00e1vaj\u00ed program stejn\u00fdm zp\u016fsobem</p>"},{"location":"HSC_5/#isa-definuje","title":"ISA definuje:","text":"<ul> <li>Instruk\u010dn\u00ed sadu: Seznam p\u0159\u00edkaz\u016f, kter\u00e9 procesor um\u00ed (nap\u0159. SE\u010cTI, P\u0158ESU\u0147).</li> <li>K\u00f3dov\u00e1n\u00ed instrukc\u00ed</li> <li>Nakl\u00e1d\u00e1n\u00ed s operandy \u2013 adresov\u00e1n\u00ed (p\u0159\u00edm\u00e9 \u2013 pomal\u00e9,RAM)(nep\u0159\u00edm\u00e9 \u2013 rychl\u00e9     registry p\u0159\u00edmo u procesoru)</li> <li>Nakl\u00e1d\u00e1n\u00ed s\u00a0v\u00fdsledkem</li> <li>V\u011btven\u00ed programu<ul> <li>Podm\u00ednky(flags-p\u0159\u00edznaky)</li> <li>Vol\u00e1n\u00ed podprogram\u016f</li> <li>Interupt(priorita,po\u010det)</li> </ul> </li> <li>Registry: Mal\u00e1, super-rychl\u00e1 pam\u011b\u0165 p\u0159\u00edmo v procesoru pro okam\u017eit\u00e9 v\u00fdpo\u010dty.</li> <li>Adresov\u00e1n\u00ed pam\u011bti: Jak\u00fdm zp\u016fsobem procesor \u010dte a zapisuje data do RAM.</li> </ul>"},{"location":"HSC_5/#isa-stradacove-orientovana-akumulator-acc","title":"ISA \u2013 St\u0159ada\u010dov\u011b orientovan\u00e1 (akumul\u00e1tor) acc","text":"<ul> <li>Nejstar\u0161\u00ed a nejjednodu\u0161\u0161\u00ed \u2013 mechanick\u00e1 kalkula\u010dka, 4004, 8051</li> <li>Procesor m\u00e1 jeden speci\u00e1ln\u00ed registr \u2013 St\u0159ada\u010d(akumul\u00e1tor), dal\u0161\u00ed nepou\u017e\u00edv\u00e1<ul> <li>Ten je zdrojem a c\u00edlem v\u011bt\u0161iny instrukc\u00ed</li> <li>Kv\u016fli tomu, \u017ee je registr jeden, se mus\u00ed l\u00e9st hodn\u011b do pam\u011bti</li> <li>Jeden vstup do v\u00fdpo\u010dtu je ve st\u0159ada\u010di, v\u00fdsledek pak tuto hodnotu p\u0159ep\u00ed\u0161e</li> </ul> </li> <li>Instrukce jsou velmi kr\u00e1tk\u00e9 \u2013 nen\u00ed t\u0159eba \u0159\u00edct, kam se m\u00e1 v\u00fdsledek ulo\u017eit \u2013 do st\u0159ada\u010de</li> </ul>"},{"location":"HSC_5/#isa-zasobnikove-orientovana-stack","title":"ISA \u2013 Z\u00e1sobn\u00edkov\u011b orientovan\u00e1 (stack)","text":"<ul> <li>Pou\u017e\u00edv\u00e1 z\u00e1sobn\u00edk(LIFO) \u2013 p\u0159. JAVA virtual machine(SW), Picojava</li> <li> <p>Zdroj a c\u00edl v\u0161ech operand\u016f</p> </li> <li> <p>Je to n\u011bco mezi, hor\u0161\u00ed ne\u017e architektura s registry (dne\u0161n\u00ed PC), ale lep\u0161\u00ed ne\u017e architektura se st\u0159ada\u010dem (star\u00e9 \u010dipy)  </p> </li> <li>Instrukce jsou bezadresov\u00e9 \u2013 sta\u010d\u00ed \u0159\u00edct, kolik hodnot z\u00a0vrchu z\u00e1sobn\u00edku chce\u0161  </li> <li>Vysok\u00e1 hustota k\u00f3du \u2013 efektivn\u00ed pro mat operace  </li> <li> <p>P\u0159 ADD 4 (se\u010dti posledn\u00ed 4 hodnoty stacku a v\u00fdsledek ulo\u017e na vrchol stacku)</p> </li> <li> <p>Nemo\u017enost n\u00e1hodn\u00e9ho p\u0159\u00edstupu \u2013 hodnota m\u016f\u017ee b\u00fdt hluboko a \u010d\u00edsle ve vy\u0161\u0161\u00edch patrech je nutn\u00e9 n\u011bkam odlo\u017eit  </p> </li> <li>Pomal\u00e9 \u2013 z\u00e1sobn\u00edk b\u00fdv\u00e1 ulo\u017een\u00ed v\u00a0pam\u011bti (RAM, CACHE), co\u017e je pomalej\u0161\u00ed ne\u017e registry</li> </ul>"},{"location":"HSC_5/#isa-general-purpose-register-gpr","title":"ISA \u2013 General purpose register (GPR)","text":"<ul> <li>Pou\u017e\u00edv\u00e1 spousty registr\u016f - x86/x64 ARM</li> <li> <p>Zdroj a c\u00edl v\u0161ech operand\u016f</p> </li> <li> <p>\u010casto obsahuje pipeline  </p> </li> <li> <p>Pipelining - z\u0159et\u011bzen\u00e9 zpracov\u00e1n\u00ed \u010di p\u0159ekr\u00fdv\u00e1n\u00ed strojov\u00fdch instrukc\u00ed je zp\u016fsob zv\u00fd\u0161en\u00ed v\u00fdkonu procesoru Z\u00e1kladn\u00ed my\u0161lenkou je rozd\u011blen\u00ed zpracov\u00e1n\u00ed jedn\u00e9 instrukce mezi r\u016fzn\u00e9 \u010d\u00e1sti procesoru a t\u00edm i umo\u017en\u011bn\u00ed zpracov\u00e1vat v\u00edce instrukc\u00ed najednou.</p> </li> <li> <p>Mnoho m\u00f3d\u016f adresace \u2013 ka\u017ed\u00fd registr m\u016f\u017ee b\u00fdt zdrojem i c\u00edlem operace</p> </li> <li>Sni\u017euje n\u00e1roky na propustnost pam\u011b\u0165ov\u00e9ho syst\u00e9mu</li> <li>Snadn\u00e1 paralelizovatelnost<ul> <li>Superskal\u00e1rn\u00ed architektury \u2013 v\u00edce ALU</li> <li>Single instruction multiple data (SIMD) sd\u00edlen\u00e1 pam\u011b\u0165 \u2013 Vektorov\u00e9 po\u010d\u00edta\u010de - Urychluj\u00ed pr\u00e1ci t\u00edm, \u017ee vykon\u00e1vaj\u00ed instrukce na \u0159ad\u011b hodnot najednou (vektoru), obvykle obsahuj\u00ed jednu \u0159\u00edd\u00edc\u00ed jednotku a v\u00edce v\u00fdkonn\u00fdch, ka\u017ed\u00e1 v\u00fdkonn\u00e1 pracuje na sv\u00fdch datech.  </li> <li>P\u0159. MMX(multimedia extension),SSE(streaming simd extension), Neon</li> <li>Very long instruction word - typ architektury procesoru navr\u017een\u00fd pro prov\u00e1d\u011bn\u00ed v\u00edce operac\u00ed v jedin\u00e9m instruk\u010dn\u00edm cyklu.</li> </ul> </li> </ul>"},{"location":"HSC_5/#instrukcni-cyklus","title":"Instruk\u010dn\u00ed cyklus","text":"<p>V\u0161echny kroky nutn\u00e9 k\u00a0vykon\u00e1n\u00ed instrukce:</p> <ul> <li>Na\u010dten\u00ed instrukce z\u00a0pam\u011bti (dle \u010d\u00edta\u010de programu) FETCH</li> <li>Dekodov\u00e1n\u00ed instrukce (p\u0159\u00edprava ovl\u00e1d\u00e1n\u00ed datov\u00e9 cesty procesoru)  DECODE</li> <li>Na\u010dten\u00ed operand\u016f \u2013 nastaven\u00ed \u010dten\u00ed registr\u016f   LOAD</li> <li>Vykon\u00e1n\u00ed instrukce EXECUTE</li> <li>Z\u00e1pis do pam\u011bti, proveden\u00ed IO operace MEMORY/IO</li> <li>Ulo\u017een\u00ed v\u00fdsledku WRITEBACK</li> </ul>"},{"location":"HSC_5/#cisc-complex-instruction-set-computer","title":"CISC \u2013 Complex instruction set computer","text":"<ul> <li>Velk\u00fd po\u010det instrukc\u00ed, mal\u00fd po\u010det vnit\u0159n\u00edch registr\u016f  </li> <li>Mikrok\u00f3d umo\u017e\u0148uje naprogramovat jakoukoliv instrukci  </li> <li>Slo\u017eit\u00fd \u0159adi\u010d instrukc\u00ed \u2013 stavov\u00fd automat \u010dasto relizovan\u00fd na ROM pam\u011bti  </li> <li>Instrukce jsou r\u016fzn\u011b dlouh\u00e9 \u2013 r\u016fzn\u00fd po\u010det operand\u016f, r\u016fzn\u00e1 velikost v programov\u00e9 pam\u011bti, r\u016fzn\u00e1 doba vykon\u00e1n\u00ed  </li> <li>Instruk\u010dn\u00ed sada obsahuje i velmi slo\u017eit\u00e9 instrukce (n\u00e1soben\u00ed, d\u011blen\u00ed apod.), v\u011bt\u0161ina operac\u00ed se prov\u00e1d\u00ed s\u00a0akumul\u00e1torem -&gt;pomalej\u0161\u00ed zpracov\u00e1n\u00ed instrukc\u00ed Efektivn\u00ed pro komplexn\u00ed instrukce, neefektivn\u00ed pro jednoduch\u00e9  </li> <li>Intern\u00ed Frekvence = 1 / zpo\u017ed\u011bn\u00ed na nejdel\u0161\u00ed kombina\u010dn\u00ed cest\u011b  </li> <li>Extern\u00ed frekvence = intern\u00ed frekvence / po\u010det stup\u0148\u016f</li> </ul>"},{"location":"HSC_5/#risc-reduced-instruction-set-computer","title":"RISC \u2013 Reduced instruction set computer","text":"<ul> <li>Optimalizovan\u00e1 sada instrukc\u00ed \u2013 jednoduch\u00e9, stejn\u011b dlouh\u00e9 \u2013 lze prov\u00e1d\u011bt efektivn\u011b  </li> <li>Komplexn\u00ed isntrukce ponech\u00e1ny kompil\u00e1toru  </li> <li>D\u00e9lka prov\u00e1d\u011bn\u00ed trv\u00e1 v\u017edy jeden cyklus  </li> <li>Intern\u00ed frekvence = extern\u00ed frekvence = 1 / max(zpo\u017ed\u011bn\u00ed stupn\u011b)  </li> <li>\u0158adi\u010d instrukc\u00ed je distribuov\u00e1n mezi jednotliv\u00e9 stupn\u011b  </li> <li> <p>Pracuje se s\u00a0registry \u2013 odpad\u00e1 pr\u00e1ce s\u00a0akumul\u00e1torem  </p> </li> <li> <p>Re\u00e1ln\u011b : pro se\u010dten\u00ed dvou \u010d\u00edsel je mus\u00edm nejd\u0159\u00edve na\u010d\u00edst \u2013 mezi t\u00edm STALL (\u010dek\u00e1n\u00ed)</p> </li> <li> <p>STALL mus\u00ed b\u00fdt odstran\u011bn</p> <ul> <li>CACHE \u2013 rychl\u00e1 pam\u011b\u0165 v\u00a0m\u00edst\u011b pot\u0159eby</li> <li>Superskalarita \u2013 p\u0159id\u00e1n\u00ed v\u00edce ALU \u2013 paraleln\u00ed zpracov\u00e1n\u00ed</li> <li>Kompil\u00e1tor m\u016f\u017ee p\u0159et\u0159\u00eddit instrukce</li> <li>V dob\u011b \u010dek\u00e1n\u00ed lze zpracovat dal\u0161\u00ed instrukci \u2013 Out od order</li> </ul> </li> </ul>"},{"location":"HSC_6/","title":"Zynq PS","text":"<p>Zynq-7000 APSoC je hybridn\u00ed \u010dip kombinuj\u00edc\u00ed procesorov\u00fd syst\u00e9m a programovatelnou logiku FPGA (SoC Zynq). PS (Processing System) je v \u010dipu Zynq Hard Macro. To znamen\u00e1, \u017ee je to fyzicky vyroben\u00fd procesor, kter\u00fd je nem\u011bnn\u00fd a funguje nez\u00e1visle na tom, zda je naprogramovan\u00e1 FPGA \u010d\u00e1st.</p>"},{"location":"HSC_6/#charakteristika-a-architektura","title":"Charakteristika a architektura","text":"<p>Srdcem syst\u00e9mu je Application Processing Unit (APU), kter\u00e1 obsahuje:</p> <ul> <li>J\u00e1dra: Dual-core ARM Cortex-A9 MPCore.</li> <li>Architektura: ARMv7 (32-bit instrukce, podpora Thumb-2).</li> <li>V\u00fdkon: A\u017e 1 GHz (typ. 667 MHz),</li> <li>Vlastnosti vykon\u00e1v\u00e1n\u00ed:<ul> <li>Superskal\u00e1rn\u00ed: Procesor dok\u00e1\u017ee na\u010d\u00edst a spustit v\u00edce instrukc\u00ed (a\u017e 2) v jednom hodinov\u00e9m taktu, co\u017e zvy\u0161uje rychlost zpracov\u00e1n\u00ed.</li> <li>Out-of-Order execution: CPU m\u016f\u017ee m\u011bnit po\u0159ad\u00ed instrukc\u00ed. Pokud jedna instrukce \u010dek\u00e1 na pomalou pam\u011b\u0165, CPU \u201ep\u0159edb\u011bhne\u201c a vykon\u00e1 jinou instrukci, kter\u00e1 je p\u0159ipraven\u00e1. M\u00e1 prom\u011bnnou d\u00e9lku pipeline.</li> <li>Predikce skok\u016f: Procesor se sna\u017e\u00ed odhadnout, kam program sko\u010d\u00ed (nap\u0159. v podm\u00ednce if), a p\u0159edna\u010dte si instrukce dop\u0159edu, aby se nezastavil. Dynamick\u00e1 (pomoc\u00ed 2bit v\u011btv\u00ed) i statick\u00e1.</li> </ul> </li> </ul>"},{"location":"HSC_6/#charakteristika-vektorove-jednotky","title":"Charakteristika vektorov\u00e9 jednotky","text":"<p>Ka\u017ed\u00e9 j\u00e1dro m\u00e1 vlastn\u00ed koprocesory pro specializovan\u00e9 v\u00fdpo\u010dty, kter\u00e9 by hlavn\u00ed CPU zdr\u017eovaly.</p> <ul> <li>NEON (Media Processing Engine): 128-bitov\u00e1 SIMD (Single Instruction Multiple Data) jednotka.<ul> <li>Umo\u017e\u0148uje zpracovat v\u00edce dat jednou instrukc\u00ed (nap\u0159. 2x64bit, 4x32bit, 16x8bit).</li> <li>Podpora signed i unsigned celo\u010d\u00edseln\u00fdch form\u00e1t\u016f</li> <li>Podpora polynom\u016f nad dvojkov\u00fdch t\u011blesem (kryptografie) </li> <li>Vyu\u017eit\u00ed: DSP, multim\u00e9dia, maticov\u00e9 operace.</li> <li>Obsahuje 32 samostatn\u00fdch registr\u016f (32x64, 32x32, 16x128).</li> </ul> </li> <li>VFPv3 (FPU): Je hardwarov\u00e1 jednotka pro po\u010d\u00edt\u00e1n\u00ed s desetinn\u00fdmi \u010d\u00edsly (plovouc\u00ed \u0159\u00e1dov\u00e1 \u010d\u00e1rka). </li> </ul>"},{"location":"HSC_6/#pametovy-subsystem","title":"Pam\u011b\u0165ov\u00fd subsyst\u00e9m","text":"<p>Pam\u011b\u0165ov\u00fd syst\u00e9m Zynqu je hierarchick\u00fd a zahrnuje v\u0161e od rychl\u00fdch cache a\u017e po \u0159adi\u010de extern\u00edch pam\u011bt\u00ed.</p> <ul> <li>MMU (Memory Management Unit): Hardwarov\u00e1 podpora pro virtu\u00e1ln\u00ed pam\u011b\u0165. P\u0159ekl\u00e1d\u00e1 virtu\u00e1ln\u00ed adresy na fyzick\u00e9, co\u017e je nezbytn\u00e9 pro b\u011bh opera\u010dn\u00edch syst\u00e9m\u016f jako Linux</li> <li>Low Memory (&lt; 1GB): Zde se nach\u00e1z\u00ed OCM (On-Chip Memory, rychl\u00e1 SRAM - pro rychl\u00fd start (boot) a kritick\u00fd k\u00f3d.) a hlavn\u00ed opera\u010dn\u00ed pam\u011b\u0165 DDR.</li> <li>PL Adresy (M_AXI_GP)(&lt;1GB,3GB&gt;): Dva obrovsk\u00e9 bloky adres vyhrazen\u00e9 pro komunikaci s FPGA. <ul> <li>Kdy\u017e procesor zap\u00ed\u0161e data na tyto adresy, sign\u00e1l projde p\u0159es m\u016fstky (AXI GP porty) p\u0159\u00edmo do va\u0161eho vlastn\u00edho hardwaru v FPGA. Takto ovl\u00e1d\u00e1te sv\u00e9 IP bloky.</li> </ul> </li> <li>&lt;3GB,4GB&gt;</li> <li>I/O Periferie<ul> <li>IOP Registers: Nastaven\u00ed periferi\u00ed jako USB, Ethernet, UART.</li> <li>SMC Memories: P\u0159\u00edm\u00fd p\u0159\u00edstup k extern\u00edm Flash pam\u011btem (NAND/NOR).</li> </ul> </li> <li>Syst\u00e9mov\u00e9 a Priv\u00e1tn\u00ed registry<ul> <li>SLCR (System Level Control Registers): nastaven\u00ed hodin, reset\u016f a multiplexingu pin\u016f (MIO).</li> <li>CPU Private: Registry soukrom\u00e9 pro ka\u017ed\u00e9 j\u00e1dro (\u010dasova\u010de, p\u0159eru\u0161en\u00ed). </li> </ul> </li> <li>&lt; 4G \u2013 256KB, 4G&gt; - zde je znovu mapov\u00e1na OCM - Slou\u017e\u00ed jako rychl\u00e1 odkl\u00e1dac\u00ed pam\u011b\u0165 na konci adresn\u00edho prostoru, kterou procesor vid\u00ed v\u017edy, bez ohledu na nastaven\u00ed DDR.</li> </ul>"},{"location":"HSC_6/#cache","title":"Cache","text":"<p>je mal\u00e1, velmi rychl\u00e1 pam\u011b\u0165, kter\u00e1 le\u017e\u00ed p\u0159\u00edmo u procesoru a slou\u017e\u00ed k urychlen\u00ed p\u0159\u00edstupu k \u010dasto pou\u017e\u00edvan\u00fdm dat\u016fm nebo instrukc\u00edm.</p> <p>Hierarchie Cache a Koherence:</p> <ul> <li>L1 Cache (Priv\u00e1tn\u00ed): Ka\u017ed\u00e9 j\u00e1dro m\u00e1 vlastn\u00ed 32 KB pro instrukce a 32 KB pro data. Funguje na principu Harvard (odd\u011blen\u00e1 data a k\u00f3d).</li> <li>L2 Cache (Sd\u00edlen\u00e1): V\u011bt\u0161\u00ed 512 KB pam\u011b\u0165 spole\u010dn\u00e1 pro ob\u011b j\u00e1dra.</li> <li>SCU (Snoop Control Unit): \u0158adi\u010d, kter\u00fd zaji\u0161\u0165uje cache koherenci (aby ob\u011b j\u00e1dra vid\u011bla stejn\u00e1 data) a propojuje j\u00e1dra s L2 cache a pam\u011bt\u00ed.</li> </ul>"},{"location":"HSC_6/#periferie","title":"Periferie","text":"<p>PS obsahuje sadu \"tvrd\u00fdch\" (Hard IP) periferi\u00ed, kter\u00e9 se nekonfiguruj\u00ed v FPGA.</p> <ul> <li>Sada periferi\u00ed (v\u017edy po dvojici): USB 2.0, Gigabit Ethernet (GigE), SDIO, UART, SPI, I2C, CAN, GPIO.</li> <li>Multiplexing (MIO vs. EMIO): Proto\u017ee \u010dip nem\u00e1 dostatek fyzick\u00fdch pin\u016f pro v\u0161echny periferie najednou, pou\u017e\u00edv\u00e1 se multiplexing:<ul> <li>MIO (Multiplexed I/O): 54 vyhrazen\u00fdch pin\u016f p\u0159\u00edmo z PS. Nejkrat\u0161\u00ed cesta, nezab\u00edr\u00e1 logiku FPGA.</li> <li>EMIO (Extended MIO): Pokud nesta\u010d\u00ed MIO piny, lze sign\u00e1ly periferi\u00ed p\u0159esm\u011brovat do FPGA a vyv\u00e9st je na jeho libovoln\u00e9 piny.</li> </ul> </li> </ul>"},{"location":"HSC_6/#propojeni-interconnect","title":"Propojen\u00ed (Interconnect)","text":"<ul> <li>V\u0161echny tyto \u010d\u00e1sti (CPU, Pam\u011bti, Periferie, FPGA) jsou propojeny syst\u00e9mem sb\u011brnic AMBA AXI. </li> <li>Vyu\u017e\u00edv\u00e1 se Central Interconnect s architekturou Crossbar (p\u0159ep\u00edna\u010d), kter\u00fd propojuje CPU, pam\u011bti, periferie a FPGA \u010d\u00e1st.</li> </ul>"},{"location":"HSC_7/","title":"Microblaze \u2013 charakteristika a architektura CPU, mo\u017enosti konfigurace, mo\u017enosti cache","text":"<p>Microblaze je vysoce konfigurovateln\u00fd Soft-core procesor od firmy AMD (Xilinx). Nen\u00ed to fyzick\u00fd \u010dip, ale IP j\u00e1dro implementovan\u00e9 v programovateln\u00e9 logice (FPGA).</p>"},{"location":"HSC_7/#charakteristika-a-architektura-cpu","title":"Charakteristika a architektura CPU","text":"<p>Vych\u00e1z\u00ed z architektury RISC (Reduced Instruction Set Computer) a je velmi podobn\u00e1 architektu\u0159e MIPS.</p> <ul> <li>Instruk\u010dn\u00ed sada: Pou\u017e\u00edv\u00e1 32-bitov\u00e9 instrukce, pracuje se 3 operandy a m\u00e1 k dispozici 32 obecn\u00fdch registr\u016f.</li> <li>Pipeline (Z\u0159et\u011bzen\u00e9 zpracov\u00e1n\u00ed): D\u00e9lka pipeline je konfigurovateln\u00e1, co\u017e ovliv\u0148uje v\u00fdkon a spot\u0159ebu m\u00edsta v FPGA:<ul> <li>3 stupn\u011b: \u0160et\u0159\u00ed m\u00edsto (Logiku), ale m\u00e1 ni\u017e\u0161\u00ed maxim\u00e1ln\u00ed frekvenci.</li> <li>5 stup\u0148\u016f: Zlat\u00fd st\u0159ed (v\u00fdkon/plocha).</li> <li>8 stup\u0148\u016f: Pro maxim\u00e1ln\u00ed frekvenci (vhodn\u00e9 pro velmi rychl\u00e9 aplikace), ale zabere v\u00edce m\u00edsta.</li> </ul> </li> <li>Endianita: Bi-endian (lze nastavit Big nebo Little endian).</li> </ul>"},{"location":"HSC_7/#moznosti-konfigurace","title":"Mo\u017enosti konfigurace","text":"<p>Velkou v\u00fdhodou Soft-core je, \u017ee spot\u0159ebuje jen tolik FPGA zdroj\u016f, kolik funkc\u00ed zapnete.</p> <ul> <li>Aritmetick\u00e9 jednotky (ALU):<ul> <li>Barrel Shifter: Standardn\u011b um\u00ed CPU posun jen o 1 bit. Zapnut\u00ed t\u00e9to jednotky umo\u017en\u00ed posun o libovoln\u00fd po\u010det bit\u016f v jednom taktu (nutn\u00e9 pro \u0161ifrov\u00e1n\u00ed/kryptografii)</li> <li>HW N\u00e1sobi\u010dka a D\u011bli\u010dka: Pokud se nezapnou, tyto operace se po\u010d\u00edtaj\u00ed softwarov\u011b a velmi pomalu (iteracemi).<ul> <li>SW v\u00fdpo\u010det d\u011blen\u00ed \u2248 32\u00d7(shift, ode\u010dten\u00ed, porovn\u00e1n\u00ed, skok, ulo\u017een\u00ed bitu, shift, skok)</li> <li>HW v\u00fdpo\u010det \u2248 32\u00d7iterace v HW</li> </ul> </li> <li>Pattern Comparator: HW vyhled\u00e1v\u00e1n\u00ed shody bajt\u016f ve slov\u011b (akcelerace textov\u00fdch operac\u00ed).</li> </ul> </li> <li>FPU (Floating Point Unit): Hardwarov\u00e1 podpora pro desetinn\u00e1 \u010d\u00edsla (IEEE 754 float).<ul> <li>Basic: Z\u00e1kladn\u00ed operace (+, -, *, /).</li> <li>Extended: Pokro\u010dil\u00e9 funkce (odmocnina, konverze int/float).</li> <li>Softwarov\u00e1 emulace (sou\u010d\u00e1st\u00ed knihoven)<ul> <li>N\u00e1soben\u00ed= Xor znam\u00e9nek, sou\u010det exponent\u016f, n\u00e1soben\u00ed mantis, zaokrouhlen\u00ed, normalizace</li> <li>S\u010d\u00edt\u00e1n\u00ed = normalizace men\u0161\u00edho \u010d\u00edsla, sou\u010det, zaokrouhlen\u00ed, normalizace v\u00fdpo\u010dtu</li> </ul> </li> </ul> </li> <li>MMU (Memory Management Unit): Voliteln\u00fd blok pro spr\u00e1vu virtu\u00e1ln\u00ed pam\u011bti a ochranu pam\u011b\u0165ov\u00fdch str\u00e1nek. Nutnost, pokud chcete na Microblaze spustit Linux.<ul> <li>Voliteln\u00e9 a nastaviteln\u00e9 cache</li> </ul> </li> <li>Stream Links (FSL/AXI Stream): Rozhran\u00ed pro p\u0159\u00edm\u00e9 a rychl\u00e9 napojen\u00ed vlastn\u00edch HW akceler\u00e1tor\u016f p\u0159\u00edmo do procesoru (obch\u00e1z\u00ed se t\u00edm pomal\u00e1 sb\u011brnice).</li> <li>Stream Links (FSL/AXI Stream): Rozhran\u00ed pro p\u0159\u00edm\u00e9 a rychl\u00e9 napojen\u00ed vlastn\u00edch HW akceler\u00e1tor\u016f p\u0159\u00edmo do procesoru (obch\u00e1z\u00ed se t\u00edm pomal\u00e1 sb\u011brnice).</li> </ul>"},{"location":"HSC_7/#moznosti-cache","title":"Mo\u017enosti cache","text":"<p>Microblaze pou\u017e\u00edv\u00e1 harvardskou architekturu (odd\u011blen\u00e9 cesty pro data a instrukce) a dva typy sb\u011brnic lok\u00e1ln\u00ed pam\u011b\u0165 a extern\u00ed pam\u011b\u0165.</p> <ul> <li>Typy sb\u011brnic:<ul> <li>LMB (Local Memory Bus): Propriet\u00e1rn\u00ed sb\u011brnice s n\u00edzkou latenc\u00ed. Slou\u017e\u00ed pro p\u0159ipojen\u00ed lok\u00e1ln\u00ed pam\u011bti (BRAM) uvnit\u0159 FPGA (pro bootloader, kritick\u00fd k\u00f3d).</li> <li>AXI: Standardn\u00ed sb\u011brnice pro p\u0159ipojen\u00ed extern\u00edch pam\u011bt\u00ed (DDR) a periferi\u00ed.</li> </ul> </li> <li>Cache (L1): Lze zapnout Instruk\u010dn\u00ed (I-Cache) a Datovou (D-Cache).<ul> <li>Write-Through: Data se zapisuj\u00ed do cache i do pam\u011bti hned (bezpe\u010dn\u011bj\u0161\u00ed).</li> <li>Write-Back: Zapisuje se jen do cache (rychlej\u0161\u00ed), do pam\u011bti a\u017e p\u0159i vyhozen\u00ed z cache.</li> </ul> </li> <li>Speci\u00e1ln\u00ed funkce cache:<ul> <li>Victim Cache: Mal\u00e1 vyrovn\u00e1vac\u00ed pam\u011b\u0165 pro \"vyhozen\u00e1\" data z hlavn\u00ed cache, zvy\u0161uje v\u00fdkon.</li> <li>Speculative loading: Na\u010d\u00edt\u00e1 data z pam\u011bti d\u0159\u00edve, ne\u017e si o n\u011b program \u0159ekne (odhaduje pot\u0159ebu).</li> </ul> </li> </ul>"},{"location":"HSC_7/#microblaze-v","title":"Microblaze V","text":"<ul> <li>RISC-V RV32I ISA<ul> <li>32 registr\u016f, roz\u0161i\u0159iteln\u00fd 32bit PC</li> <li>In-Order, single-issue</li> <li>Barel Shifter, CSR instrukce, fence</li> </ul> </li> <li>Voliteln\u011b:<ul> <li>Roz\u0161\u00ed\u0159en\u00ed M(ultiplier/divider), A(tomic instructions), C(ompressed instructions), F(loating point)</li> <li>Memory protection / Memory Management, Cache</li> <li>Pipeline 3,4,5,8 (Mem)</li> <li>Voliteln\u00e9 datov\u00e9 a instruk\u010dn\u00ed sb\u011brnice</li> <li>Podpora 4 u\u017eivatelsk\u00fdch instrukc\u00ed (stream interface)</li> <li>Lockstep m\u00f3d</li> </ul> </li> </ul>"},{"location":"HSC_7/#microblaze-v-vs-11","title":"Microblaze V vs 11","text":"<ul> <li>O 20% ni\u017e\u0161\u00ed max. frekvence</li> <li>O ~100% vy\u0161\u0161\u00ed spot\u0159eba zdroj\u016f</li> <li>Vylad\u011bn\u011bj\u0161\u00ed n\u00e1vrh - 11</li> <li>Linux support rem\u00edza</li> <li>Do budoucna RISC-V </li> </ul>"},{"location":"HSC_8/","title":"Z\u00e1kladn\u00ed IP j\u00e1dra s n\u00e1vaznost\u00ed na HW FPGA, obvody hodin, \u010d\u00edta\u010de/\u010dasova\u010de, GPIO","text":""},{"location":"HSC_8/#ip-jadro-intellectual-property-core","title":"IP j\u00e1dro (Intellectual Property Core)","text":"<p>Je to analogie softwarov\u00e9 knihovny pro hardware. P\u0159edstavuje p\u0159edp\u0159ipraven\u00fd blok logiky (nap\u0159. \u0159adi\u010d pam\u011bti, procesor, komunika\u010dn\u00ed rozhran\u00ed), kter\u00fd vkl\u00e1d\u00e1me do n\u00e1vrhu v FPGA jako \u201esou\u010d\u00e1stku\u201c.</p> <p>AMD dod\u00e1v\u00e1 spole\u010dn\u011b s Vivado \u0159adu jader zdarma</p> <ul> <li>Infrastruktura SoC \u2013 hodiny, sb\u011brnice, CPU, mailbox, mutex</li> <li>Z\u00e1kladn\u00ed komunikace \u2013 GPIO, IIC, SPI, CAN</li> <li>Rychl\u00e9 komunikace - ETH, USB, PCIE,\u2026</li> <li>Speci\u00e1ln\u00ed j\u00e1dra \u2013 Inference NN, rekonfigurace, \u2026</li> <li>N\u011bkter\u00e1 j\u00e1dra nelze rozumn\u011b provozovat bez SW stack (ETH, USB) nebo OS</li> <li>N\u011bkter\u00e1 jsou zat\u00ed\u017eena licenc\u00ed (10G ETH, H265Encoder,\u2026)</li> </ul>"},{"location":"HSC_8/#obvody-hodin-clocking-wizard","title":"Obvody hodin (Clocking Wizard)","text":"<p>V FPGA ke spr\u00e1v\u011b a generov\u00e1n\u00ed hodinov\u00fdch sign\u00e1l\u016f slou\u017e\u00ed IP j\u00e1dro Clocking Wizard, kter\u00e9 konfiguruje hardwarov\u00e9 bloky PLL (Phase-Locked Loop) nebo MMCM (Mixed-Mode Clock Manager).</p>"},{"location":"HSC_8/#princip-pll-digitalne-rizeny-fazovy-zaves","title":"Princip PLL (Digit\u00e1ln\u011b \u0159\u00edzen\u00fd f\u00e1zov\u00fd z\u00e1v\u011bs)","text":"<ul> <li>Z\u00e1kladem je zp\u011btnovazebn\u00ed smy\u010dka, kter\u00e1 srovn\u00e1v\u00e1 f\u00e1zi a frekvenci vstupu s v\u00fdstupem.</li> <li>Hlavn\u00ed \u010d\u00e1sti:<ul> <li>PFD (Phase Frequency Detector): Porovn\u00e1v\u00e1 vstupn\u00ed hodiny se zp\u011btnou vazbou.</li> <li>CP (Charge Pump) + LF (Loop Filter): P\u0159ev\u00e1d\u00ed rozd\u00edl f\u00e1z\u00ed na nap\u011bt\u00ed pro \u0159\u00edzen\u00ed oscil\u00e1toru.</li> <li>VCO (Voltage Controlled Oscillator): Generuje frekvenci na z\u00e1klad\u011b vstupn\u00edho nap\u011bt\u00ed.</li> <li>D\u011bli\u010dky (D, M, O): Umo\u017e\u0148uj\u00ed n\u00e1soben\u00ed a d\u011blen\u00ed frekvence.</li> </ul> </li> <li> <p>Vzorec pro v\u00fdstupn\u00ed frekvenci:     $$ F_{VCO} = F_{CLKIN} \\times \\frac{M}{D} $$     $$ F_{OUT} = F_{CLKIN} \\times \\frac{M}{D \\times O} $$</p> <ul> <li>Kde M je n\u00e1sobitel (ve zp\u011btn\u00e9 vazb\u011b),D je vstupn\u00ed d\u011bli\u010dka a O je v\u00fdstupn\u00ed d\u011bli\u010dka.</li> </ul> </li> <li> <p>Vlastnosti:</p> <ul> <li>Synt\u00e9za frekvence, f\u00e1zov\u00fd posuv</li> <li>A\u017e 7 hodinov\u00fdch v\u00fdstup\u016f s rozd\u00edlnou frekvenc\u00ed a f\u00e1z\u00ed</li> <li>Mo\u017enost rekonfigurace za b\u011bhu</li> <li>Obsahuje sign\u00e1l LOCKED, kter\u00fd CPU informuje, \u017ee frekvence je stabiln\u00ed.</li> </ul> </li> <li>Limitace<ul> <li>Vstupn\u00ed hodiny &lt;10, 800&gt;MHz</li> <li>Frekvence VCO &lt;5,1200&gt; MHz</li> <li>M &lt;2,128&gt; po inkrementu 0.125</li> <li>D &lt;1, 106&gt;</li> </ul> </li> </ul>"},{"location":"HSC_8/#systemovy-reset-processor-system-reset","title":"Syst\u00e9mov\u00fd Reset (Processor System Reset)","text":"<p>Processor System Reset je IP j\u00e1dro, kter\u00e9 v FPGA \u0159\u00edd\u00ed a synchronizuje v\u0161echny resetov\u00e9 sign\u00e1ly v procesorov\u00e9m syst\u00e9mu. Zaji\u0161\u0165uje, \u017ee se syst\u00e9m spust\u00ed a\u017e po stabilizaci hodin (kontroluje nap\u0159. locked z PLL/MMCM). Kombinuje r\u016fzn\u00e9 zdroje reset\u016f (extern\u00ed, softwarov\u00e9, debug) a vytv\u00e1\u0159\u00ed z nich bezpe\u010dn\u00e9 synchronizovan\u00e9 resety pro procesor, perif\u00e9rie i sb\u011brnice. Dr\u017e\u00ed reset aktivn\u00ed, dokud nejsou v\u0161echny podm\u00ednky spln\u011bny, aby nedo\u0161lo k chyb\u00e1m p\u0159i startu. Celkov\u011b slou\u017e\u00ed jako centr\u00e1ln\u00ed, spolehliv\u00fd gener\u00e1tor reset\u016f pro cel\u00fd procesorov\u00fd subsyst\u00e9m ve FPGA.</p> <p>Sekvence startu: Aby syst\u00e9m nab\u011bhl bezpe\u010dn\u011b, resetuje se postupn\u011b: Sb\u011brnice Interconnect Periferie (po 16 cyklech) Procesor (po dal\u0161\u00edch 16 cyklech) .</p>"},{"location":"HSC_8/#citacecasovace","title":"\u010c\u00edta\u010de/\u010dasova\u010de","text":"<p>Jedn\u00e1 se o univerz\u00e1ln\u00ed programovateln\u00fd blok pro m\u011b\u0159en\u00ed \u010dasu nebo generov\u00e1n\u00ed ud\u00e1lost\u00ed.</p> <ul> <li>Konfigurace HW<ul> <li>A\u017e dva 32bit \u010d\u00edta\u010de nebo kask\u00e1dn\u00ed 64bit re\u017eim</li> <li>Polarita generovan\u00fdch sign\u00e1l\u016f; Polarita spou\u0161t\u00ed</li> </ul> </li> <li>Z\u00e1kladn\u00ed re\u017eimy:<ul> <li>Generate (Generuj\u00edc\u00ed): Po\u010d\u00edt\u00e1 do nastaven\u00e9 hodnoty a po\u0161le na v\u00fdstup 0/1 dle nastaven\u00ed (nebo cyklicky v re\u017eimu Auto-reload).</li> <li>Capture (Sn\u00edmac\u00ed): Funguje jako stopky. Ulo\u017e\u00ed aktu\u00e1ln\u00ed hodnotu \u010d\u00edta\u010de v moment\u011b, kdy p\u0159ijde extern\u00ed sign\u00e1l (Capture Trig).</li> <li>PWM (Pulzn\u00ed \u0161\u00ed\u0159kov\u00e1 modulace): Vyu\u017e\u00edv\u00e1 dva \u010d\u00edta\u010de \u2013 prvn\u00ed ur\u010duje frekvenci (periodu) a druh\u00fd st\u0159\u00eddu (pln\u011bn\u00ed/duty cycle) sign\u00e1lu.</li> <li>64bit: HW mus\u00ed obsahovat oba \u010d\u00edta\u010de</li> </ul> </li> <li>SW Obsluha: Ovlada\u010d XTmrCtr. Funkce jako XTmrCtr_Initialize, _Start, _Stop, _GetCaptureValue</li> </ul>"},{"location":"HSC_8/#gpio-general-purpose-inputoutput","title":"GPIO (General Purpose Input/Output)","text":"<p>Z\u00e1kladn\u00ed rozhran\u00ed pro ovl\u00e1d\u00e1n\u00ed pin\u016f. Ka\u017ed\u00fd pin m\u016f\u017ee fungovat jako vstup nebo v\u00fdstup, co\u017e vy\u017eaduje speci\u00e1ln\u00ed hardwarov\u00e9 \u0159e\u0161en\u00ed pro obousm\u011brnou komunikaci.</p> <p>Jednosm\u011brn\u00e1 komunikace</p> <ul> <li>Primitivn\u00ed sch\u00e9ma<ul> <li>v\u00fdstupn\u00ed buffer \u017eiv\u00ed dr\u00e1t</li> <li>vstupn\u00ed buffer obdobn\u011b \u017eiv\u00ed vnit\u0159ek obvodu</li> </ul> </li> <li>nelze ale z\u00e1rove\u0148 tedy poslouchat a vys\u00edlat, aby byla mo\u017en\u00e1 obousm\u011brn\u00e1 komunikace mus\u00edme realizovat jeden komunika\u010dn\u00ed prvek pro poslouch\u00e1n\u00ed a druh\u00fd pro vys\u00edl\u00e1n\u00ed</li> <li>pou\u017eiteln\u00e9 pro n\u011bkter\u00e9 s\u00e9riov\u00e9 komunikace: SPI, UART</li> </ul> <p>T\u0159\u00edstavov\u00fd budi\u010d</p> <ul> <li>je \u0159e\u0161en\u00ed jednosm\u011brn\u00e9 komunikace, realizuje mechanizmus odpojen\u00ed budi\u010de pomoc\u00ed tranzistoru tranzistoru na vstupu EN</li> <li>Je z\u00e1kladem GPIO v\u00a0FPGA</li> <li>M\u00e1 logicky t\u0159i stavy:<ul> <li>l.0, l.1 a vysok\u00e1 impedance (High-Z) kdy je budi\u010d elektricky odpojen a pin m\u016f\u017ee slou\u017eit jako vstup</li> </ul> </li> <li>To umo\u017e\u0148uje obousm\u011brnou komunikaci po jednom vodi\u010di (v \u010dasov\u00e9m multiplexu) \u2013 ob\u011b strany se st\u0159\u00eddaj\u00ed v tom, kdo mluv\u00ed a kdo poslouch\u00e1. K \u0159\u00edzen\u00ed sm\u011bru je nutn\u00fd handshake</li> </ul> <p>AXI GPIO</p> <ul> <li>P\u0159\u00edm\u00e9 ovl\u00e1d\u00e1n\u00ed vstup\u016f a v\u00fdstup\u016f, z\u00e1kladem je t\u0159\u00edstavov\u00fd budi\u010d</li> <li>HW volby:<ul> <li>Po\u010det kan\u00e1l\u016f, Povolen\u00ed p\u0159eru\u0161en\u00ed, \u0160\u00ed\u0159ka kan\u00e1l\u016f, Sm\u011br (IO, I, O)</li> </ul> </li> <li>Ovl\u00e1dac\u00ed registry jsou p\u0159\u00edmo p\u0159ipojen\u00e9 k\u00a0t\u0159\u00edstavov\u00e9mu budi\u010di<ul> <li>DATA Register: Hodnota dat (to, co \u010dteme nebo zapisujeme).</li> <li>TRI Register: \u0158\u00edd\u00ed sign\u00e1l EN (sm\u011br toku).  Log. 0 = V\u00fdstup aktivn\u00ed, Log. 1 = V\u00fdstup odpojen (Input / High-Z).</li> </ul> </li> <li>SW obsluha</li> <li>xparameters.h: Obsahuje definice a ID v\u0161ech jader (nap\u0159. XPAR_AXI_TIMER_0_DEVICE_ID). </li> <li>Ovlada\u010de (Drivers): C funkcepro ovl\u00e1d\u00e1n\u00ed HW (nap\u0159. XGpio_SetDataDirection pro z\u00e1pis do TRI registru)</li> </ul>"},{"location":"HSC_9/","title":"S\u00e9riov\u00e9 sb\u011brnice \u2013 p\u0159ehled a principy (SPI, IIC, UART)","text":"<p>S\u00e9riov\u00e9 sb\u011brnice p\u0159en\u00e1\u0161ej\u00ed data bit po bitu za sebou. Pou\u017e\u00edvaj\u00ed se pro komunikaci mezi mikrokontrol\u00e9ry a periferiemi (senzory, displeje, pam\u011bti). Jsou to: Uart(Rs232, Rs485,Rs455), i2c, spi, usb, can, ethernet. Obecn\u011b se u nich \u0159e\u0161\u00ed tyto vlastnosti:</p>"},{"location":"HSC_9/#synchronizace","title":"Synchronizace","text":"<ul> <li>Synchronn\u00ed: Data se \u010dtou p\u0159esn\u011b s tikem hodin.</li> <li>Asynchronn\u00ed: Nem\u00e1 hodiny. Ob\u011b strany mus\u00ed m\u00edt p\u0159edem nastavenou stejnou rychlost.</li> </ul>"},{"location":"HSC_9/#smer-toku-dat","title":"Sm\u011br toku dat","text":"<ul> <li>Symplex: Data te\u010dou trvale jen jedn\u00edm sm\u011brem.</li> <li>Half-Duplex: Data te\u010dou ob\u011bma sm\u011bry, ale st\u0159\u00eddav\u011b.</li> <li>Full-Duplex: Data te\u010dou ob\u011bma sm\u011bry sou\u010dasn\u011b.</li> </ul>"},{"location":"HSC_9/#rychlost-prenosu","title":"Rychlost p\u0159enosu","text":"<ul> <li>Modula\u010dn\u00ed rychlost \u2013 baud (Bd, bps)</li> <li>P\u0159enosov\u00e1 rychlost \u2013 bit\u016f za sekundu (b/s, bps) pouze bity, kter\u00e9 nesou informace</li> </ul>"},{"location":"HSC_9/#uart-universal-asynchronous-receiver-transmitter","title":"UART (Universal Asynchronous Receiver-Transmitter)","text":"<ul> <li>Typ: Asynchronn\u00ed (nem\u00e1 hodinov\u00fd sign\u00e1l), vyskytuje se i USART (synchronn\u00ed).</li> <li>Topologie: Point-to-point (spojen\u00ed dvou za\u0159\u00edzen\u00ed).</li> <li>Vodi\u010de: 2 datov\u00e9 vodi\u010de (+ zem):<ul> <li>TX (Transmit) \u2013 vys\u00edl\u00e1n\u00ed.</li> <li>RX (Receive) \u2013 p\u0159\u00edjem.</li> <li>Pozn\u00e1mka: Zapojuje se k\u0159\u00ed\u017eem (TX jednoho na RX druh\u00e9ho).</li> </ul> </li> <li>Princip:<ul> <li>Jeliko\u017e chyb\u00ed hodiny, ob\u011b za\u0159\u00edzen\u00ed mus\u00ed m\u00edt p\u0159edem nastavenou stejnou rychlost (Baud rate, nap\u0159. 9600 Bd).</li> <li>Komunikace za\u010d\u00edn\u00e1 Start bitem (log. 0), n\u00e1sleduj\u00ed data (obvykle 8 bit\u016f), voliteln\u011b paritn\u00ed bit (kontrola chyby) a kon\u010d\u00ed se Stop bitem (log. 1).</li> </ul> </li> </ul>"},{"location":"HSC_9/#spi-serial-peripheral-interface","title":"SPI (Serial Peripheral Interface)","text":"<ul> <li>Typ: Synchronn\u00ed (m\u00e1 hodinov\u00fd sign\u00e1l).</li> <li>Topologie: Master-Slave (jeden \u0159\u00eddic\u00ed, v\u00edce pod\u0159\u00edzen\u00fdch).</li> <li>Vodi\u010de: 4 vodi\u010de (\u010dty\u0159dr\u00e1tov\u00e1 sb\u011brnice):<ul> <li>SCLK (Serial Clock) \u2013 hodinov\u00fd sign\u00e1l, generuje Master.</li> <li>MOSI (Master Out Slave In) \u2013 data od Mastera k Slave.</li> <li>MISO (Master In Slave Out) \u2013 data od Slave k Masterovi.</li> <li>SS/CS (Slave Select / Chip Select) \u2013 v\u00fdb\u011br konkr\u00e9tn\u00edho za\u0159\u00edzen\u00ed.</li> </ul> </li> <li>Princip:<ul> <li>Master vybere Slave sta\u017een\u00edm jeho linky CS do nuly (aktivn\u00ed v nule).</li> <li>S ka\u017ed\u00fdm tikem hodin se p\u0159esune jeden bit tam a jeden zp\u011bt (funguje jako posuvn\u00fd registr).</li> <li>Na sb\u011brnici je v\u017edy jeden Master, komunika\u010dn\u00ed rychlost ur\u010duje hodinov\u00fd sign\u00e1l \u2013 a\u017e des\u00edtky MHz, v\u0161echny sign\u00e1ly jsou pouze jednosm\u011brn\u00e9</li> </ul> </li> <li>Vlastnosti: Velmi rychl\u00e1 komunikace, Full-duplex. Nev\u00fdhodou je spot\u0159eba pin\u016f (ka\u017ed\u00fd Slave pot\u0159ebuje vlastn\u00ed CS dr\u00e1t). Ur\u010den\u00e1 k propojov\u00e1n\u00ed periferi\u00ed a k p\u0159ipojov\u00e1n\u00ed periferi\u00ed k procesoru, vhodn\u00e1 pouze pro velmi kr\u00e1tk\u00e9 spoje, pou\u017e\u00edv\u00e1 se pro p\u0159ipojen\u00ed EEPROM, RTC</li> </ul>"},{"location":"HSC_9/#i2c-inter-integrated-circuit-psano-take-i2c-nebo-iic","title":"I2C (Inter-Integrated Circuit, ps\u00e1no tak\u00e9 I\u00b2C nebo IIC)","text":"<ul> <li>Typ: Synchronn\u00ed.</li> <li>Topologie: Multi-master (sb\u011brnicov\u00e1 topologie).</li> <li>Vodi\u010de: 2 vodi\u010de:<ul> <li>SDA (Serial Data) \u2013 obousm\u011brn\u00e1 data.</li> <li>SCL (Serial Clock) \u2013 hodiny.</li> <li>D\u016fle\u017eit\u00e9: Vy\u017eaduje pull-up rezistory (vodi\u010de jsou v klidu na log. 1).</li> </ul> </li> <li>Princip:<ul> <li>Komunikace je \u0159\u00edzena adresou. Master po\u0161le Start condition, pak adresu za\u0159\u00edzen\u00ed (7 bit\u016f) a bit R/W (\u010dten\u00ed/z\u00e1pis).</li> <li>Za\u0159\u00edzen\u00ed s touto adresou odpov\u00ed bitem ACK (potvrzen\u00ed).</li> <li>Data se pos\u00edlaj\u00ed po 8 bitech, za ka\u017ed\u00fdm bytem n\u00e1sleduje ACK/NACK.</li> </ul> </li> <li>Vlastnosti: Half-duplex (data te\u010dou jen jedn\u00edm sm\u011brem v dan\u00fd \u010das). \u0160et\u0159\u00ed piny (jen 2 dr\u00e1ty pro a\u017e 127 za\u0159\u00edzen\u00ed), ale je pomalej\u0161\u00ed a slo\u017eit\u011bj\u0161\u00ed ne\u017e SPI.</li> </ul>"}]}